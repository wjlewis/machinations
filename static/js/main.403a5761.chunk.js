(window.webpackJsonpmachinations=window.webpackJsonpmachinations||[]).push([[0],{36:function(e,t,n){e.exports=n(66)},48:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(22),i=n.n(a),c=n(12),s=n(19),u=n(35),l=n(33),p=n(2),d=function(e){return{type:"ADD_TRANSITION_DETAIL",payload:{arrow:e}}},f=function(e){return{type:"MOVE_TAPE",payload:{direction:e}}},O=function(e){return{type:"WRITE_TAPE_SYMBOL",payload:{symbol:e}}},m=function(e,t,n,r){return{type:"DELETE_ENTITIES",payload:{nodes:e,arrows:t,controlPoints:n,transitionDetails:r}}},h=function(e,t){return{type:"DISPLAY_MESSAGE",payload:{title:e,content:t}}},y="STEP_SIM",b="PLAY_SIM",E="PAUSE_SIM",_="RESET_SIM",v=function(e){return{type:"SET_CURRENT_STATE",payload:{id:e}}},D=function(e){return{type:"SET_ACTIVE_NODE",payload:{id:e}}},w=function(e){return{type:"SET_ACTIVE_TRANSITION_DETAIL",payload:{id:e}}},N=function(e){return{type:"SET_ACTIVE_CONTROL_POINT",payload:{id:e}}},g=function(e){return{type:"SET_ACTIVE_ARROW",payload:{id:e}}},j="HALT_ACCEPT",T=function(){return{type:j}},S="HALT_REJECT",A=function(){return{type:S}},I=function(e){return{type:"SWITCH_MODE",payload:{mode:e}}},P=function(){return{type:"SAVE_SNAPSHOT"}},C=function(e){return{type:"INSTALL_SNAPSHOT",payload:{snapshot:e}}},M=n(4),L=n.n(M),k=n(20),R=n.n(k);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var U=function(e){return e.wip||e.committed},G=function(e){return L.a.get(e,"entities")},F=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{entities:L.a.mapValues(t,function(e){return L.a.mapValues(e,function(e,t){return"wip"===t?null:e})})})},W=n(6),V=n(7),B=function(){function e(t,n){Object(W.a)(this,e),this.x=t,this.y=n}return Object(V.a)(e,[{key:"magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalize",value:function(){var t=this.magnitude();if(0===t)throw new Error("Cannot normalize 0 vector");return new e(this.x/t,this.y/t)}},{key:"perp",value:function(){return new e(-this.y,this.x)}},{key:"plus",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"minus",value:function(e){return this.plus(e.scale(-1))}},{key:"scale",value:function(t){return new e(t*this.x,t*this.y)}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"project",value:function(e){return e.scale(this.dot(e)/e.dot(e))}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}}],[{key:"from",value:function(t){return new e(t.x,t.y)}}]),e}(),H=n(16),K=function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n};function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var J={EDIT:"EDIT",SIM:"SIM"},z={mode:J.EDIT},Q=function(e){return e.mode.mode===J.EDIT},q=function(e,t){switch(t.type){case"SWITCH_MODE":return X(e,t.payload.mode);default:return e.mode}},X=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.mode,{mode:t})};function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ee={mousePos:new B(0,0),keysDown:[],isMouseDownNode:!1,isMouseDownControlPoint:!1,isAddingNode:!1,wasMouseReleasedOverNode:!1,wasMouseDragged:!1,wasMnemonicChanged:!1},te=function(e){return e.ui.mousePos},ne=function(e){return e.ui.keysDown.includes("Shift")},re=function(e){return e.ui.isMouseDownNode},oe=function(e){return e.ui.isMouseDownControlPoint},ae=function(e){return e.ui.isAddingNode},ie=function(e){return e.ui.wasMouseDragged},ce=function(e,t){if(!Q(e))return e.ui;switch(t.type){case"KEY_DOWN":return se(e,t.payload.key);case"KEY_UP":return ue(e,t.payload.key);case"MOUSE_DOWN_NODE":return le(e);case"MOUSE_UP_NODE":return pe(e);case"MOUSE_DOWN_CONTROL_POINT":return de(e);case"MOUSE_UP_CONTROL_POINT":return fe(e);case"MOUSE_DOWN_CANVAS":return Oe(e);case"MOUSE_UP_CANVAS":return me(e);case"START_ADDING_NODE":return he(e);case"ADD_NODE":return ye(e);case"MOUSE_MOVE_CANVAS":return be(e,t.payload.pos);case"CHANGE_MNEMONIC":return Ee(e);case"BLUR_MNEMONIC":return _e(e);default:return e.ui}},se=function(e,t){return $({},e.ui,{keysDown:L.a.uniq([].concat(Object(H.a)(e.ui.keysDown),[t]))})},ue=function(e,t){return $({},e.ui,{keysDown:e.ui.keysDown.filter(function(e){return e!==t})})},le=function(e){return $({},e.ui,{isMouseDownNode:!0})},pe=function(e){return $({},e.ui,{isMouseDownNode:!1,wasMouseReleasedOverNode:!0})},de=function(e){return $({},e.ui,{isMouseDownControlPoint:!0})},fe=function(e){return $({},e.ui,{isMouseDownControlPoint:!1})},Oe=function(e){return $({},e.ui,{wasMouseDragged:!1})},me=function(e){return $({},e.ui,{isMouseDownNode:!1,isMouseDownControlPoint:!1,wasMouseReleasedOverNode:!1})},he=function(e){return $({},e.ui,{isAddingNode:!0})},ye=function(e){return $({},e.ui,{isAddingNode:!1,wasMouseReleasedOverNode:!0})},be=function(e,t){return $({},e.ui,{mousePos:t,wasMouseDragged:!0})},Ee=function(e){return $({},e.ui,{wasMnemonicChanged:!0})},_e=function(e){return $({},e.ui,{wasMnemonicChanged:!1})};function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var we=function(e){return Object.values(U(e.entities.nodes).byId)},Ne=function(e,t){var n=we(e).find(function(e){return e.id===t});if(!n)throw new Error('No Node with ID "'.concat(t,'"'));return n},ge=function(e,t){return U(e.entities.nodes).selected.includes(t)},je=function(e,t){return U(e.entities.nodes).byId[t].isFinal},Te=function(e){return U(e.entities.nodes).selected},Se=function(e,t){var n=U(e.entities.nodes).startNode;return null!==n&&n===t},Ae=function(e,t){if(!Q(e))return e.entities.nodes;switch(t.type){case"ADD_NODE":return Ie(e,t.payload.pos);case"ADD_ARROW":return Pe(e,t.payload.start,t.payload.end);case"DELETE_ENTITIES":return Ce(e,t.payload.nodes);case"MAKE_SELECTED_START_NODE":return Me(e);case"TOGGLE_SELECTED_FINAL_NODES":return Le(e);case"CHANGE_MNEMONIC":return ke(e,t.payload.id,t.payload.value);case"BLUR_MNEMONIC":return Re(e);case"SELECT_ALL_NODES":return xe(e);case"MOUSE_DOWN_NODE":return Ue(e,t.payload.id);case"MOUSE_UP_NODE":return Ge(e);case"MOUSE_DOWN_CANVAS":return Fe(e,t.payload.pos);case"MOUSE_UP_CANVAS":return We(e);case"MOUSE_MOVE_CANVAS":return Ve(e,t.payload.pos);default:return e.entities.nodes}},Ie=function(e,t){var n=R()(),r={id:n,pos:t,mnemonic:"",isFinal:!1};return{wip:null,committed:L.a.mergeWith({},e.entities.nodes.committed,{byId:Object(p.a)({},n,r)},function(e,t,r){return"selected"===r?[n]:void 0})}},Pe=function(e,t,n){return{wip:null,committed:De({},e.entities.nodes.committed,{selected:t!==n?[]:e.entities.nodes.committed.selected})}},Ce=function(e,t){var n=e.entities.nodes.committed;return{wip:null,committed:De({},n,{byId:L.a.omit(n.byId,t),selected:[],startNode:n.startNode&&t.includes(n.startNode)?null:n.startNode})}},Me=function(e){return{wip:null,committed:L.a.merge({},e.entities.nodes.committed,{startNode:e.entities.nodes.committed.selected[0]})}},Le=function(e){var t=Te(e).map(function(t){return Ne(e,t)}),n=t.some(function(e){return e.isFinal}),r=t.reduce(function(e,t){return De({},e,Object(p.a)({},t.id,De({},t,{isFinal:!n})))},{});return{wip:null,committed:L.a.merge({},e.entities.nodes.committed,{byId:De({},r)})}},ke=function(e,t,n){return De({},e.entities.nodes,{wip:L.a.merge({},U(e.entities.nodes),{byId:Object(p.a)({},t,{mnemonic:n})})})},Re=function(e){return{wip:null,committed:U(e.entities.nodes)}},xe=function(e){return{wip:null,committed:De({},e.entities.nodes.committed,{selected:Object.keys(e.entities.nodes.committed.byId)})}},Ue=function(e,t){var n,r,o=e.entities.nodes,a=o.committed.selected;return{wip:null,committed:De({},o.committed,{selected:ne(e)?(n=t,r=a,r.includes(n)?r.filter(function(e){return e!==n}):[].concat(Object(H.a)(r),[n])):a.includes(t)?a:[t]})}},Ge=function(e){return{wip:null,committed:De({},U(e.entities.nodes),{offsets:{}})}},Fe=function(e,t){if(!re(e))return e.entities.nodes;var n=e.entities.nodes,r=n.committed.selected.reduce(function(e,r){var o=n.committed.byId[r];return De({},e,Object(p.a)({},r,B.from(o.pos).minus(t)))},{});return De({},n,{wip:De({},n.committed,{offsets:r})})},We=function(e){return function(e){return e.ui.wasMouseReleasedOverNode}(e)?e.entities.nodes:{wip:null,committed:De({},e.entities.nodes.committed,{selected:[]})}},Ve=function(e,t){var n=e.entities.nodes;if(!re(e)||!n.wip)return n;var r=Object.keys(n.wip.offsets).reduce(function(e,r){var o=n.wip.byId[r],a=t.plus(n.wip.offsets[r]);return De({},e,Object(p.a)({},r,De({},o,{pos:a})))},{});return L.a.merge({},n,{wip:{byId:De({},r)}})};function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var He=function(e){return Object.values(e.entities.arrows.byId)},Ke=function(e,t){var n=e.entities.arrows.byId[t];if(!n)throw new Error('No Arrow with ID "'.concat(t,'"'));return n},Ye=function(e,t){if(!Q(e))return e.entities.arrows;switch(t.type){case"ADD_ARROW":return Je(e,t.payload.start,t.payload.end,t.payload.id);case"DELETE_ENTITIES":return ze(e,t.payload.arrows);default:return e.entities.arrows}},Je=function(e,t,n,r){return L.a.merge({},e.entities.arrows,{byId:Object(p.a)({},r,{start:t,end:n,id:r})})},ze=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.entities.arrows,{byId:L.a.omit(e.entities.arrows.byId,t)})};function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Xe=function(e){return Object.values(U(e.entities.controlPoints).byId)},Ze=function(e,t){var n=Xe(e).find(function(e){return e.arrow===t});if(!n)throw new Error('No ControlPoint associated with Arrow having ID "'.concat(t,'"'));return n},$e=function(e,t){if(!Q(e))return e.entities.controlPoints;switch(t.type){case"ADD_ARROW":return et(e,t.payload.start,t.payload.end,t.payload.id);case"DELETE_ENTITIES":return tt(e,t.payload.controlPoints);case"MOUSE_DOWN_CONTROL_POINT":return nt(e,t.payload.id);case"MOUSE_UP_CONTROL_POINT":return rt(e);case"MOUSE_DOWN_CANVAS":return ot(e,t.payload.pos);case"MOUSE_MOVE_CANVAS":return ct(e,t.payload.pos);case"MOUSE_UP_CANVAS":case"MOUSE_UP_NODE":return lt(e);default:return e.entities.controlPoints}},et=function(e,t,n,r){var o=R()(),a=B.from(Ne(e,t).pos),i=t===n?a:B.from(Ne(e,n).pos),c=t===n?a.minus(new B(0,90)):function(e,t){var n=t.minus(e),r=0!==n.magnitude()?n.perp().normalize().scale(1):new B(0,-1);return n.scale(.5).plus(r).plus(e)}(a,i);return{wip:null,committed:L.a.merge({},e.entities.controlPoints.committed,{byId:Object(p.a)({},o,{id:o,arrow:r,pos:c})})}},tt=function(e,t){return{wip:null,committed:qe({},e.entities.controlPoints.committed,{byId:L.a.omit(e.entities.controlPoints.committed.byId,t)})}},nt=function(e,t){return qe({},e.entities.controlPoints,{wip:null,committed:qe({},e.entities.controlPoints.committed,{selected:t})})},rt=function(e){return{wip:null,committed:qe({},U(e.entities.controlPoints),{selected:null,selectedOffset:null})}},ot=function(e,t){return oe(e)?at(e,t):re(e)?it(e,t):e.entities.controlPoints},at=function(e,t){var n=e.entities.controlPoints.committed;if(!n.selected)return e.entities.controlPoints;var r=n.byId[n.selected],o=B.from(r.pos).minus(t);return qe({},e.entities.controlPoints,{wip:L.a.merge({},n,{selectedOffset:o})})},it=function(e,t){var n=e.entities.controlPoints.committed,r=Te(e),o=Object.values(n.byId).filter(function(t){var n=Ke(e,t.arrow);return r.includes(n.start)&&r.includes(n.end)}).reduce(function(e,n){return qe({},e,Object(p.a)({},n.id,new B(n.pos.x-t.x,n.pos.y-t.y)))},{}),a=Object.values(n.byId).reduce(function(n,o){var a,i,c=Ke(e,o.arrow),s=r.includes(c.start),u=r.includes(c.end);if(i=u,!(a=s)&&!i||a&&i)return n;var l=B.from(Ne(e,u?c.start:c.end).pos),d=B.from(Ne(e,s?c.start:c.end).pos),f=d.minus(t),O=l.minus(d),m=B.from(o.pos).minus(d),h=m.project(O),y=h.magnitude()/O.magnitude(),b=m.minus(h),E=(b.dot(h.perp())>0?1:-1)*b.magnitude();return qe({},n,Object(p.a)({},o.id,{fixedPos:l,movingOffset:f,fractionAlong:y,perpLength:E}))},{});return qe({},e.entities.controlPoints,{wip:qe({},n,{fullOffsets:o,halfOffsets:a})})},ct=function(e,t){return oe(e)?st(e,t):re(e)?ut(e,t):e.entities.controlPoints},st=function(e,t){var n=e.entities.controlPoints;if(!n.wip||!n.wip.selected||!n.wip.selectedOffset)return n;var r=n.wip.byId[n.wip.selected],o=t.plus(B.from(n.wip.selectedOffset));return qe({},n,{wip:L.a.merge({},n.wip,{byId:Object(p.a)({},r.id,qe({},r,{pos:o}))})})},ut=function(e,t){var n=e.entities.controlPoints;if(!n.wip)return n;var r=Object.keys(n.wip.fullOffsets).reduce(function(e,r){var o=n.wip.byId[r],a=t.plus(B.from(n.wip.fullOffsets[r]));return qe({},e,Object(p.a)({},r,qe({},o,{pos:a})))},{}),o=Object.keys(n.wip.halfOffsets).reduce(function(e,r){var o=n.wip.byId[r],a=n.wip.halfOffsets[r],i=a.fixedPos,c=a.movingOffset,s=a.fractionAlong,u=a.perpLength,l=t.plus(c),d=i.minus(l),f=d.scale(s).plus(l),O=0!==d.magnitude()?d.perp().normalize().scale(u).plus(f):new B(0,-80).plus(f);return qe({},e,Object(p.a)({},r,qe({},o,{pos:O})))},{});return qe({},n,{wip:L.a.merge({},n.wip,{byId:qe({},r,{},o)})})},lt=function(e){return qe({},e.entities.controlPoints,{wip:null,committed:qe({},U(e.entities.controlPoints),{selected:null,selectedOffset:null,fullOffsets:{},halfOffsets:{}})})};function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ft={entries:K("",20),scrollLeft:0,active:0,focused:null},Ot={L:"L",R:"R"},mt=function(e){return e.entities.tape.entries},ht=function(e){return e.entities.tape.focused},yt=function(e){var t=e.entities.tape;return t.entries[t.active]},bt=function(e,t){switch(t.type){case"CHANGE_TAPE_CELL":return Et(e,t.payload.pos,t.payload.value);case"UPDATE_SCROLL_LEFT":return Dt(e,t.payload.scrollLeft);case"FOCUS_TAPE_CELL":return _t(e,t.payload.pos);case"CLEAR_TAPE":return vt(e);case"MOVE_TAPE":return Nt(e,t.payload.direction);case"WRITE_TAPE_SYMBOL":return gt(e,t.payload.symbol);default:return e.entities.tape}},Et=function(e,t,n){return dt({},e.entities.tape,{entries:L.a.update(L.a.clone(e.entities.tape.entries),t,function(e){return n}),focused:n.length>0&&null!==e.entities.tape.focused?e.entities.tape.focused+1:e.entities.tape.focused})},_t=function(e,t){return dt({},e.entities.tape,{focused:t})},vt=function(e){return ft},Dt=function(e,t){return dt({},e.entities.tape,{entries:wt(e.entities.tape.entries,t),scrollLeft:t})},wt=function(e,t){var n=e.length-Math.floor(t/36);return n<20?[].concat(Object(H.a)(e),Object(H.a)(K("",20))):n>40&&e.slice(-20).every(function(e){return 0===e.length})?e.slice(0,-20):e},Nt=function(e,t){return dt({},e.entities.tape,{active:e.entities.tape.active+("L"===t?1:-1)})},gt=function(e,t){var n=e.entities.tape;return dt({},n,{entries:L.a.set(L.a.clone(n.entries),n.active,t)})};function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var St=function(e){return Object.values(e.entities.transitionDetails.byId)},At=function(e){return L.a.groupBy(St(e),function(e){return e.arrow})},It=function(e,t){return At(e)[t]},Pt=function(e){var t=Object.values(function(e){return L.a.groupBy(St(e),function(t){return Ke(e,t.arrow).start})}(e)).map(function(e){return Object.values(L.a.groupBy(e,function(e){return e.read}))}).map(function(e){return e.filter(function(e){return e.length>1})});return L.a.flattenDeep(t).map(function(e){return e.id})},Ct=function(e){return e.entities.transitionDetails.focused},Mt=function(e,t){if(!Q(e))return e.entities.transitionDetails;switch(t.type){case"ADD_TRANSITION_DETAIL":return Lt(e,t.payload.arrow);case"ADD_ARROW":return kt(e,t.payload.id);case"CHANGE_TRANSITION_DETAIL":return Rt(e,t.payload.detail);case"DELETE_TRANSITION_DETAIL":return xt(e,t.payload.id);case"DELETE_ENTITIES":return Ut(e,t.payload.transitionDetails);case"FOCUS_TRANSIITON_DETAIL":return Gt(e,t.payload.id);case"BLUR_TRANSITION_DETAIL":return Ft(e);case"MARK_DUPLICATE_TRANSITIONS":return Wt(e,t.payload.ids);default:return e.entities.transitionDetails}},Lt=function(e,t){var n=R()(),r={id:n,arrow:t,read:"",write:"",move:Ot.L,isFocused:!1};return L.a.merge({},e.entities.transitionDetails,{byId:Object(p.a)({},n,r),focused:n})},kt=function(e,t){return Lt(e,t)},Rt=function(e,t){return L.a.merge({},e.entities.transitionDetails,{byId:Object(p.a)({},t.id,t)})},xt=function(e,t){var n=e.entities.transitionDetails;return Tt({},n,{byId:L.a.omit(n.byId,t)})},Ut=function(e,t){return Tt({},e.entities.transitionDetails,{byId:L.a.omit(e.entities.transitionDetails.byId,t)})},Gt=function(e,t){return Tt({},e.entities.transitionDetails,{focused:t})},Ft=function(e){return Tt({},e.entities.transitionDetails,{focused:null})},Wt=function(e,t){return Tt({},e.entities.transitionDetails,{byId:L.a.mapValues(e.entities.transitionDetails.byId,function(e){return Tt({},e,{isDuplicate:t.includes(e.id)})})})},Vt=n(29);function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Kt=function(e,t){if(!Q(e))return e.undoRedo;switch(t.type){case"MOUSE_UP_NODE":return Yt(e);case"MOUSE_UP_CONTROL_POINT":return Jt(e);case"ADD_NODE":return Xt(e,"add node");case"BLUR_MNEMONIC":return zt(e);case"MAKE_SELECTED_START_NODE":return Xt(e,"change initial state");case"TOGGLE_SELECTED_FINAL_NODES":return Xt(e,'toggle "final" status for selected states');case"ADD_ARROW":case"ADD_TRANSITION_DETAIL":return Xt(e,"add new transition");case"DELETE_ENTITIES":return Xt(e,"delete entities");case"CHANGE_TRANSITION_DETAIL":return Xt(e,"change transition");case"CHANGE_TAPE_CELL":return Xt(e,"change tape cell");case"CLEAR_TAPE":return Xt(e,"clear tape");default:return e.undoRedo}},Yt=function(e){return ie(e)?Xt(e,"move node"):e.undoRedo},Jt=function(e){return ie(e)?Xt(e,"move control point"):e.undoRedo},zt=function(e){return function(e){return e.ui.wasMnemonicChanged}(e)?Xt(e,"change mnemonic"):e.undoRedo},Qt=function(e){if(0===e.undoRedo.actions.length)return e;var t=Object(Vt.a)(e.undoRedo.actions),n=t[0],r=t.slice(1),o=Ht({},n,{value:G(e)});return Ht({},F(e,n.value),{undoRedo:Ht({},e.undoRedo,{actions:r,redoable:[o].concat(Object(H.a)(e.undoRedo.redoable))})})},qt=function(e){if(0===e.undoRedo.redoable.length)return e;var t=Object(Vt.a)(e.undoRedo.redoable),n=t[0],r=t.slice(1),o=Ht({},n,{value:G(e)});return Ht({},F(e,n.value),{undoRedo:Ht({},e.undoRedo,{actions:[o].concat(Object(H.a)(e.undoRedo.actions)),redoable:r})})},Xt=function(e,t){return{actions:[{description:t,value:G(e)}].concat(Object(H.a)(e.undoRedo.actions.slice(0,32))),redoable:[]}};function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var en=function(e){return e.message.show},tn=function(e){return e.message.title},nn=function(e){return e.message.content},rn=function(e,t){switch(t.type){case"DISPLAY_MESSAGE":return on(e,t.payload.title,t.payload.content);case"DISMISS_MESSAGE":return an(e);default:return e.message}},on=function(e,t,n){return $t({},e.message,{show:!0,title:t,content:void 0!==n?n:null})},an=function(e){return $t({},e.message,{show:!1,title:null,content:null})};function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var un=function(e){return e.sim.currentState||function(e){var t=U(e.entities.nodes).startNode;if(null===t)throw new Error("No start node has been distinguished.");return t}(e)},ln=function(e,t){return e.sim.activeNode===t},pn=function(e,t){return e.sim.activeArrow===t},dn=function(e,t){return e.sim.activeControlPoint===t},fn=function(e){return e.sim.activeTransitionDetail},On=function(e,t){switch(t.type){case"SET_CURRENT_STATE":return mn(e,t.payload.id);case"SET_ACTIVE_NODE":return hn(e,t.payload.id);case"SET_ACTIVE_TRANSITION_DETAIL":return yn(e,t.payload.id);case"SET_ACTIVE_ARROW":return bn(e,t.payload.id);case"SET_ACTIVE_CONTROL_POINT":return En(e,t.payload.id);case _:return _n(e);default:return e.sim}},mn=function(e,t){return sn({},e.sim,{currentState:t})},hn=function(e,t){return sn({},e.sim,{activeNode:t})},yn=function(e,t){return sn({},e.sim,{activeTransitionDetail:t})},bn=function(e,t){return sn({},e.sim,{activeArrow:t})},En=function(e,t){return sn({},e.sim,{activeControlPoint:t})},_n=function(e){return sn({},e.sim,{currentState:null,activeNode:null,activeArrow:null,activeTransitionDetail:null,activeControlPoint:null})};function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Dn=function(e){return e.entities.metaData.name},wn=function(e,t){switch(t.type){case"CHANGE_MACHINE_NAME":return Nn(e,t.payload.name);default:return e.entities.metaData}},Nn=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.entities.metaData,{name:t})},gn={entities:{nodes:{wip:null,committed:{byId:{},selected:[],offsets:{},startNode:null}},arrows:{byId:{}},controlPoints:{wip:null,committed:{byId:{},selected:null,selectedOffset:null,fullOffsets:{},halfOffsets:{}}},transitionDetails:{byId:{},focused:null},tape:ft,metaData:{name:"Untitled"}},ui:ee,undoRedo:{actions:[],redoable:[]},message:{show:!1,title:null,content:null},mode:z,sim:{currentState:null,activeNode:null,activeArrow:null,activeTransitionDetail:null,activeControlPoint:null}};function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Sn=function(e,t){return Tn({},F(e,t),{undoRedo:Xt(e,"install entity snapshot")})},An=function(e){var t=G(gn);return Tn({},F(e,t),{undoRedo:Xt(e,"create new machine")})},In=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UNDO":return Qt(e);case"REDO":return qt(e);case"INSTALL_SNAPSHOT":return Sn(e,t.payload.snapshot);case"NEW_MACHINE":return An(e);default:return Tn({},e,{entities:Tn({},e.entities,{nodes:Ae(e,t),arrows:Ye(e,t),controlPoints:$e(e,t),transitionDetails:Mt(e,t),tape:bt(e,t),metaData:wn(e,t)}),ui:ce(e,t),undoRedo:Kt(e,t),message:rn(e,t),mode:q(e,t),sim:On(e,t)})}},Pn={a:function(e,t){return t.ctrlKey?{type:"SELECT_ALL_NODES"}:null},x:function(e,t){return t.ctrlKey?{type:"DELETE_SELECTED_NODES"}:null},n:function(e,t){return t.ctrlKey?(t.preventDefault(),{type:"START_ADDING_NODE"}):null},t:function(e,t){return Te(e).length>0&&t.ctrlKey?(t.preventDefault(),{type:"ADD_TRANSITION_BETWEEN_SELECTED"}):null},f:function(e,t){return Te(e).length>0&&t.ctrlKey?{type:"TOGGLE_SELECTED_FINAL_NODES"}:null},i:function(e,t){return 1===Te(e).length&&t.ctrlKey?{type:"MAKE_SELECTED_START_NODE"}:null},z:function(e,t){return t.ctrlKey||t.metaKey?{type:"UNDO"}:null},y:function(e,t){return t.ctrlKey||t.metaKey?(t.preventDefault(),{type:"REDO"}):null}},Cn=n(11),Mn=n(9),Ln=n(10),kn=(n(48),function(e){function t(){return Object(W.a)(this,t),Object(Cn.a)(this,Object(Mn.a)(t).apply(this,arguments))}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"error-report"},o.a.createElement("div",{className:"error-report__section"},o.a.createElement("span",{className:"error-report__title"},"What's wrong:\u2002"),o.a.createElement("span",{className:"error-report__content"},this.props.whatsWrong)),o.a.createElement("div",{className:"error-report__section"},o.a.createElement("span",{className:"error-report__title"},"How to fix it:\u2002"),o.a.createElement("span",{className:"error-report__content"},this.props.howToFix)))}}]),t}(o.a.Component)),Rn=o.a.createElement(kn,{whatsWrong:"In order for the machine to start, a state must be distinguished as the initial or start state. You have not yet identified any state as such.",howToFix:'Select one of your machine states and click the "Make Start State" button to distinguish it as the initial state.'}),xn=o.a.createElement(kn,{whatsWrong:"At the moment, you have 2 or more transitions from the same state with the same read symbol. Such nondeterministic behavior is not supported.",howToFix:"Find all transitions whose read symbols are marked red, and modify or remove the associated transitions so that all transitions for each state have distinct read symbols"}),Un=(n(49),function(e){function t(){return Object(W.a)(this,t),Object(Cn.a)(this,Object(Mn.a)(t).apply(this,arguments))}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props.accepted;return o.a.createElement("div",{className:"halt-report"},o.a.createElement("div",{className:"halt-report__title"},"The machine has\xa0",o.a.createElement("span",{className:"halt-report__result halt-report__result--".concat(e?"accepted":"rejected")},e?"accepted":"rejected"),"\xa0the input string."))}}]),t}(o.a.Component)),Gn=o.a.createElement(Un,{accepted:!0}),Fn=o.a.createElement(Un,{accepted:!1}),Wn=n(13),Vn=n.n(Wn),Bn=n(34),Hn=n(8),Kn=Vn.a.mark(Yn);function Yn(){var e;return Vn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=5e3;case 1:return t.next=4,Object(Hn.c)(e);case 4:return t.next=6,Object(Hn.e)(P());case 6:t.next=1;break;case 8:case"end":return t.stop()}},Kn)}var Jn=Vn.a.mark(Xn),zn=Vn.a.mark(Zn),Qn=Vn.a.mark($n),qn=Vn.a.mark(tr);function Xn(e){var t;return Vn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Hn.d)(Zn,e);case 2:return t=n.sent,n.next=5,Object(Hn.g)([E,_,j,S]);case 5:return n.next=7,Object(Hn.b)(t);case 7:case"end":return n.stop()}},Jn)}function Zn(e){return Vn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Hn.e)(I(J.SIM));case 3:if(!e){t.next=8;break}return t.next=6,$n();case 6:t.next=13;break;case 8:return t.next=11,$n();case 11:t.next=8;break;case 13:return t.prev=13,t.next=16,Object(Hn.e)(I(J.EDIT));case 16:return t.finish(13);case 17:case"end":return t.stop()}},zn,null,[[0,,13,17]])}function $n(){var e,t,n,r,o,a,i,c,s,u,l;return Vn.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Object(Hn.f)(un);case 2:return e=p.sent,p.next=5,Object(Hn.f)(yt);case 5:return t=p.sent,p.next=8,Object(Hn.f)(function(n){return er(n,e,t)});case 8:return n=p.sent,r=1e3,p.next=12,Object(Hn.e)(D(e));case 12:return p.next=14,Object(Hn.c)(r/4);case 14:if(null!==n){p.next=25;break}return p.next=17,Object(Hn.f)(function(t){return je(t,e)});case 17:if(!p.sent){p.next=23;break}return p.next=21,Object(Hn.e)(T());case 21:p.next=25;break;case 23:return p.next=25,Object(Hn.e)(A());case 25:return a=(o=n).endId,i=o.arrowId,c=o.controlPointId,s=o.transitionDetailId,u=o.writeSymbol,l=o.tapeDirection,p.next=28,Object(Hn.e)(g(i));case 28:return p.next=30,Object(Hn.e)(N(c));case 30:return p.next=32,Object(Hn.e)(w(s));case 32:return p.next=34,Object(Hn.e)(O(u));case 34:return p.next=36,Object(Hn.e)(f(l));case 36:return p.next=38,Object(Hn.c)(r/4);case 38:return p.next=40,Object(Hn.e)(D(a));case 40:return p.next=42,Object(Hn.e)(v(a));case 42:return p.next=44,Object(Hn.c)(r/4);case 44:return p.next=46,Object(Hn.e)(g(null));case 46:return p.next=48,Object(Hn.e)(N(null));case 48:return p.next=50,Object(Hn.e)(w(null));case 50:return p.next=52,Object(Hn.c)(r/4);case 52:case"end":return p.stop()}},Qn)}var er=function(e,t,n){var r=function(e,t){return He(e).filter(function(e){return e.start===t})}(e,t),o=L.a.flatten(r.map(function(t){return It(e,t.id)})).find(function(e){return e.read===n});if(!o)return null;var a=r.find(function(e){return e.id===o.arrow});if(!a)throw new Error('Inconsistency in state: transition detail references nonexistent arrow "'.concat(o.arrow,'"'));var i=Ze(e,a.id);return{endId:a.end,arrowId:a.id,controlPointId:i.id,transitionDetailId:o.id,writeSymbol:o.write,tapeDirection:o.move}};function tr(){return Vn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hn.h)(y,Xn,!0);case 2:return e.next=4,Object(Hn.h)(b,Xn,!1);case 4:case"end":return e.stop()}},qn)}var nr=Vn.a.mark(rr);function rr(){return Vn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hn.a)([Yn(),tr()]);case 2:case"end":return e.stop()}},nr)}var or=Object(u.a)(),ar=Object(s.createStore)(In,Object(l.composeWithDevTools)(Object(s.applyMiddleware)(function(e){return function(t){return function(n){if("KEY_DOWN"!==n.type)return t(n);var r=e.getState(),o=n.payload,a=o.key,i=o.event,c=Pn[a];if(!c)return t(n);var s=c(r,i);return s?(t(n),t(s)):t(n)}}},function(e){return function(t){return function(n){if("ADD_TRANSITION_BETWEEN_SELECTED"!==n.type)return t(n);var r=e.getState(),o=Te(r),a=o[0],i=o[1]||o[0],c=function(e,t,n){return He(e).find(function(e){return e.start===t&&e.end===n})||null}(r,a,i);if(c)return t(d(c.id));var s=R()();return t(function(e,t,n){return{type:"ADD_ARROW",payload:{start:e,end:t,id:n}}}(a,i,s))}}},function(e){return function(t){return function(n){if("DELETE_TRANSITION_DETAIL"!==n.type)return t(n);var r=n.payload,o=r.id,a=r.arrow,i=e.getState();if(It(i,a).filter(function(e){return e.id!==o}).length>0)return t(n);var c=Ze(i,a).id;return t(m([],[a],[c],[o]))}}},function(e){return function(t){return function(n){if("DELETE_SELECTED_NODES"!==n.type)return t(n);var r=e.getState(),o=Te(r),a=L.a.flatten(o.map(function(e){return function(e,t){return He(e).filter(function(e){return e.start===t||e.end===t})}(r,e)})),i=L.a.uniq(L.a.flatten(a.map(function(e){return e.id}))),c=i.map(function(e){return Ze(r,e)}).map(function(e){return e.id}),s=L.a.flatten(i.map(function(e){return It(r,e)})).map(function(e){return e.id});return t(m(o,i,c,s))}}},function(e){return function(t){return function(n){if(!["ADD_TRANSITION_DETAIL","CHANGE_TRANSITION_DETAIL","DELETE_TRANSITION_DETAIL","ADD_ARROW"].includes(n.type))return t(n);t(n);var r=Pt(e.getState());return t({type:"MARK_DUPLICATE_TRANSITIONS",payload:{ids:r}})}}},function(e){return function(t){return function(n){if(![y,b].includes(n.type))return t(n);var r=e.getState();return function(e){return null!==U(e.entities.nodes).startNode}(r)?Pt(r).length>0?t(h("Nondeterministic transitions",xn)):t(n):t(h("Missing start state",Rn))}}},or,function(e){return function(e){return function(t){return[j,S].includes(t.type)?t.type===j?e(h("Machine Halted",Gn)):t.type===S?e(h("Machine Halted",Fn)):void 0:e(t)}}},function(e){return function(t){return function(n){if("LOAD_SNAPSHOT"!==n.type)return t(n);try{var r=localStorage.getItem("machine");if(!r)return;var o=JSON.parse(r);t(C(o))}catch(e){localStorage.clearItem("machine")}}}},function(e){return function(t){return function(n){if("SAVE_SNAPSHOT"!==n.type)return t(n);var r=e.getState(),o=G(r);try{localStorage.setItem("machine",JSON.stringify(o))}catch(a){return}}}},function(e){return function(t){return function(n){if("DOWNLOAD_MACHINE"!==n.type)return t(n);var r=e.getState(),o=G(r),a=JSON.stringify(o,null,"  "),i="data:application/json;charset=utf-8,".concat(encodeURIComponent(a)),c=Dn(r).toLowerCase().split(" ").join("-"),s=c.length>0?c:"untitled-machine",u=document.createElement("a");u.setAttribute("href",i),u.setAttribute("download",s),u.click()}}},function(e){return function(e){return function(t){if("UPLOAD_MACHINE"!==t.type)return e(t);function n(){return r.apply(this,arguments)}function r(){return(r=Object(Bn.a)(Vn.a.mark(function t(){var r,a;return Vn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o.removeEventListener("change",n),t.prev=1,t.next=4,this.files[0].text();case 4:return r=t.sent,a=JSON.parse(r),t.abrupt("return",e(C(a)));case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",e(h("Upload Error","We were unable to upload your machine. Please verify that you have selected a valid machine file.")));case 12:case"end":return t.stop()}},t,this,[[1,9]])}))).apply(this,arguments)}var o=document.createElement("input");o.type="file",o.accept=".json,.JSON",o.addEventListener("change",n),o.click()}}})));or.run(rr);var ir=ar,cr=n(14),sr=n.n(cr),ur=(n(51),function(e){function t(){return Object(W.a)(this,t),Object(Cn.a)(this,Object(Mn.a)(t).apply(this,arguments))}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=sr()("arrow",{"arrow--editable":this.props.isEditable,"arrow--active":this.props.isActive}),t=this.props.isSelfLoop?this.computeCubicPathString():this.computeQuadraticPathString();return o.a.createElement("path",{className:e,d:t})}},{key:"computeQuadraticPathString",value:function(){var e=this.props,t=e.start,n=e.end,r=e.control,o=t.plus(n.minus(t).scale(.5)),a=o.plus(r.minus(o).scale(2));return"M ".concat(t.x," ").concat(t.y," Q ").concat(a.x," ").concat(a.y," ").concat(n.x," ").concat(n.y)}},{key:"computeCubicPathString",value:function(){var e=this.props,t=e.start,n=e.control.minus(t).scale(4/3),r=0!==n.magnitude()?n.perp().normalize().scale(80):new B(80,0),o=t.plus(n).plus(r),a=t.plus(n).minus(r);return"M ".concat(t.x," ").concat(t.y," C ").concat(o.x," ").concat(o.y," ").concat(a.x," ").concat(a.y," ").concat(t.x," ").concat(t.y)}}]),t}(o.a.Component)),lr=Object(c.b)(function(e,t){var n=Ne(e,t.details.start),r=Ne(e,t.details.end),o=Ze(e,t.details.id);return{start:B.from(n.pos),end:B.from(r.pos),control:B.from(o.pos),isSelfLoop:n.id===r.id,isEditable:Q(e),isActive:pn(e,t.details.id)}})(ur),pr=(n(52),function(e){function t(){var e,n;Object(W.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Cn.a)(this,(e=Object(Mn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown()},n.handleMouseUp=function(e){n.props.mouseUp()},n.handleInputChange=function(e){n.props.changeMnemonic(e.target.value)},n.handleInputBlur=function(){n.props.blurMnemonic()},n}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props.details.mnemonic,t=sr()("node",{"node--selected":this.props.isSelected,"node--final":this.props.details.isFinal,"node--start":this.props.isStart,"node--editable":this.props.isEditable,"node--active":!this.props.isEditable&&this.props.isActive}),n=sr()("node__mnemonic-input",{"node__mnemonic-input--editable":this.props.isEditable}),r=B.from(this.props.details.pos),a=r.plus(new B(-19,24));return o.a.createElement("div",{className:"node__container"},o.a.createElement("div",{className:t,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,style:{position:"absolute",left:r.x-21,top:r.y-21}}),o.a.createElement("input",{className:n,disabled:!this.props.isEditable,value:e,onChange:this.handleInputChange,onBlur:this.handleInputBlur,type:"text",maxLength:4,style:{position:"absolute",left:a.x,top:a.y}}))}}]),t}(o.a.Component)),dr=Object(c.b)(function(e,t){return{isSelected:ge(e,t.details.id),isStart:Se(e,t.details.id),isEditable:Q(e),isActive:ln(e,t.details.id)}},function(e,t){return{changeMnemonic:function(n){return e(function(e,t){return{type:"CHANGE_MNEMONIC",payload:{id:e,value:t}}}(t.details.id,n))},blurMnemonic:function(){return e({type:"BLUR_MNEMONIC"})},mouseDown:function(){return e({type:"MOUSE_DOWN_NODE",payload:{id:t.details.id}})},mouseUp:function(){return e({type:"MOUSE_UP_NODE"})}}})(pr),fr=(n(53),function(e){function t(){var e,n;Object(W.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Cn.a)(this,(e=Object(Mn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown()},n.handleMouseUp=function(e){n.props.mouseUp()},n}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=sr()("control-point",{"control-point--editable":this.props.isEditable,"control-point--active":this.props.isActive}),t=this.props.isSelfLoop?this.computeCubicString():this.computeQuadraticPathString();return o.a.createElement("path",{className:e,d:t,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp})}},{key:"computeQuadraticPathString",value:function(){var e=this.props,t=e.start,n=e.end,r=B.from(this.props.details.pos),o=n.minus(t),a=0!==o.magnitude()?o.normalize().scale(18):new B(18,0),i=a.perp().scale(1/3),c=r.minus(a).plus(i),s=r.minus(a).minus(i);return"M ".concat(c.x," ").concat(c.y," L ").concat(r.x," ").concat(r.y," L ").concat(s.x," ").concat(s.y)}},{key:"computeCubicString",value:function(){var e=this.props.start,t=B.from(this.props.details.pos),n=t.minus(e),r=0!==n.magnitude()?n.normalize():new B(0,1),o=r.perp().scale(18),a=t.plus(o.scale(.5)),i=a.minus(o).plus(r.scale(6)),c=a.minus(o).minus(r.scale(6));return"M ".concat(i.x," ").concat(i.y," L ").concat(a.x," ").concat(a.y," L ").concat(c.x," ").concat(c.y)}}]),t}(o.a.Component)),Or=Object(c.b)(function(e,t){var n=Ke(e,t.details.arrow),r=Ne(e,n.start),o=Ne(e,n.end);return{start:B.from(r.pos),end:B.from(o.pos),isSelfLoop:r.id===o.id,isEditable:Q(e),isActive:dn(e,t.details.id)}},function(e,t){return{mouseDown:function(){return e({type:"MOUSE_DOWN_CONTROL_POINT",payload:{id:t.details.id}})},mouseUp:function(){return e({type:"MOUSE_UP_CONTROL_POINT"})}}})(fr);n(54);function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mr(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var yr=function(e){function t(){var e,n;Object(W.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(Cn.a)(this,(e=Object(Mn.a)(t)).call.apply(e,[this].concat(a)))).readRef=o.a.createRef(),n.handleSelectChange=function(e){n.props.onChange&&n.changeDirection(e.target.value)},n.selectLeft=function(){n.changeDirection(Ot.L)},n.selectRight=function(){n.changeDirection(Ot.R)},n.handleFocus=function(){n.props.onFocus&&n.props.onFocus()},n.handleBlur=function(){n.props.onBlur&&n.props.onBlur()},n.handleDeleteClick=function(){n.props.onDelete&&n.props.onDelete()},n}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props.detail,t=e.read,n=e.write,r=e.move,a=sr()("transition-detail",{"transition-detail--active":this.props.isActive}),i=sr()("transition-detail__input",{"transition-detail__input--focus":this.props.isFocused,"transition-detail__input--editable":this.props.isEditable}),c=sr()(i,{"transition-detail__input--error":this.props.detail.isDuplicate}),s=sr()("transition-detail__selector",{"transition-detail__selector--focus":this.props.isFocused,"transition-detail__selector--editable":this.props.isEditable});return o.a.createElement("div",{className:a},o.a.createElement("input",{className:c,ref:this.readRef,disabled:!this.props.isEditable,value:t,placeholder:"\u2205",onChange:this.handleInputChange("read"),onFocus:this.handleFocus,onBlur:this.handleBlur,type:"text",maxLength:1}),o.a.createElement("span",{className:"transition-detail__separator"},"/"),o.a.createElement("input",{className:i,disabled:!this.props.isEditable,value:n,placeholder:"\u2205",onChange:this.handleInputChange("write"),onFocus:this.handleFocus,onBlur:this.handleBlur,type:"text",maxLength:1}),o.a.createElement("select",{className:s,disabled:!this.props.isEditable,value:r,onChange:this.handleSelectChange},o.a.createElement("option",{value:Ot.L,onMouseDown:this.selectLeft},"\u2190"),o.a.createElement("option",{value:Ot.R,onMouseDown:this.selectRight},"\u2192")),this.props.isEditable&&o.a.createElement("button",{className:"transition-detail__button",onClick:this.handleDeleteClick}))}},{key:"componentDidMount",value:function(){this.props.isFocused&&this.focus()}},{key:"focus",value:function(){this.readRef.current&&this.readRef.current.focus()}},{key:"handleInputChange",value:function(e){var t=this;return function(n){t.props.onChange&&" "!==n.target.value&&t.props.onChange(hr({},t.props.detail,Object(p.a)({},e,n.target.value)))}}},{key:"changeDirection",value:function(e){this.props.onChange&&this.props.onChange(hr({},this.props.detail,{move:e}))}}]),t}(o.a.Component),br=(n(55),function(e){function t(){var e,n;Object(W.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Cn.a)(this,(e=Object(Mn.a)(t)).call.apply(e,[this].concat(o)))).handleDetailChange=function(e){n.props.changeDetail(e)},n}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.details,r=t.control,a=this.computeStance(),i=sr()("transition-details","transition-details--".concat(a));return o.a.createElement("div",{className:i,style:{position:"absolute",left:r.x,top:r.y}},this.props.isEditable&&!this.isTopStance(a)&&this.renderAddDetailButton(),n.map(function(t){return o.a.createElement(yr,{key:t.id,detail:t,isFocused:e.props.focusedDetail===t.id,isEditable:e.props.isEditable,isActive:!e.props.isEditable&&e.props.activeDetail===t.id,onChange:e.handleDetailChange,onDelete:e.handleDetailDelete(t.id,t.arrow),onFocus:e.handleDetailFocus(t.id),onBlur:e.handleDetailBlur(t.id)})}),this.props.isEditable&&this.isTopStance(a)&&this.renderAddDetailButton())}},{key:"handleDetailDelete",value:function(e,t){var n=this;return function(){return n.props.deleteDetail(e,t)}}},{key:"handleDetailFocus",value:function(e){var t=this;return function(){return t.props.focusDetail(e)}}},{key:"handleDetailBlur",value:function(e){var t=this;return function(){return t.props.blurDetail(e)}}},{key:"handleAddDetailButton",value:function(e){var t=this;return function(){return t.props.addDetail(e)}}},{key:"computeStance",value:function(){return this.props.isSelfLoop?this.computeSelfLoopStance():this.computeStandardStance()}},{key:"computeSelfLoopStance",value:function(){var e=this.props,t=e.start,n=e.control.minus(t).angle();return this.computeClassNameFromAngle(n)}},{key:"computeStandardStance",value:function(){var e=this.props,t=e.start,n=e.end,r=e.control.minus(t),o=r.project(n.minus(t)),a=r.minus(o).angle();return this.computeClassNameFromAngle(a)}},{key:"computeClassNameFromAngle",value:function(e){return 0<e&&e<=Math.PI/2?"top-left":Math.PI/2<e&&e<=Math.PI?"top-right":-Math.PI/2>e&&e>=-Math.PI?"bottom-right":"bottom-left"}},{key:"isTopStance",value:function(e){return/^top/.test(e)}},{key:"renderAddDetailButton",value:function(){return o.a.createElement("button",{className:"transition-details__add-button",onClick:this.handleAddDetailButton(this.props.arrowId)},"add new")}}]),t}(o.a.Component)),Er=Object(c.b)(function(e,t){var n=Ke(e,t.arrowId),r=Ne(e,n.start),o=Ne(e,n.end),a=Ze(e,n.id);return{start:B.from(r.pos),end:B.from(o.pos),control:B.from(a.pos),isSelfLoop:r.id===o.id,focusedDetail:Ct(e),isEditable:Q(e),activeDetail:fn(e)}},function(e){return{changeDetail:function(t){return e(function(e){return{type:"CHANGE_TRANSITION_DETAIL",payload:{detail:e}}}(t))},deleteDetail:function(t,n){return e(function(e,t){return{type:"DELETE_TRANSITION_DETAIL",payload:{id:e,arrow:t}}}(t,n))},addDetail:function(t){return e(d(t))},focusDetail:function(t){return e(function(e){return{type:"FOCUS_TRANSIITON_DETAIL",payload:{id:e}}}(t))},blurDetail:function(t){return e(function(e){return{type:"BLUR_TRANSITION_DETAIL",payload:{id:e}}}(t))}}})(br),_r=(n(56),function(e){function t(){var e,n;Object(W.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Cn.a)(this,(e=Object(Mn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseUp=function(e){n.props.add(n.props.pos)},n}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.pos;return t&&o.a.createElement("div",{className:"shadow-node",onMouseUp:this.handleMouseUp,style:{position:"absolute",left:n.x-21,top:n.y-21-2}})}}]),t}(o.a.Component)),vr=Object(c.b)(function(e){return{isVisible:ae(e),pos:te(e)}},function(e){return{add:function(t){return e(function(e){return{type:"ADD_NODE",payload:{pos:e}}}(t))}}})(_r),Dr=(n(57),function(e){function t(){var e,n;Object(W.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Cn.a)(this,(e=Object(Mn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown(n.computeMousePos(e))},n.handleMouseUp=function(){n.props.mouseUp()},n.handleMouseMove=function(e){e.preventDefault(),n.props.mouseMove(n.computeMousePos(e))},n}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.arrows,n=e.nodes,r=e.controlPoints,a=e.transitionDetails;return o.a.createElement("div",{className:"canvas",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseMove:this.handleMouseMove},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},t.map(function(e){return o.a.createElement(lr,{key:e.id,details:e})}),r.map(function(e){return o.a.createElement(Or,{key:e.id,details:e})})),n.map(function(e){return o.a.createElement(dr,{key:e.id,details:e})}),Object.keys(a).map(function(e){return o.a.createElement(Er,{key:e,arrowId:e,details:a[e]})}),o.a.createElement(vr,null))}},{key:"computeMousePos",value:function(e){var t=e.currentTarget.getBoundingClientRect(),n=t.left,r=t.top,o=e.clientX,a=e.clientY;return new B(o-n,a-r)}}]),t}(o.a.Component)),wr=Object(c.b)(function(e){return{arrows:He(e),nodes:we(e),controlPoints:Xe(e),transitionDetails:At(e)}},function(e){return{mouseDown:function(t){return e(function(e){return{type:"MOUSE_DOWN_CANVAS",payload:{pos:e}}}(t))},mouseUp:function(){return e({type:"MOUSE_UP_CANVAS"})},mouseMove:function(t){return e(function(e){return{type:"MOUSE_MOVE_CANVAS",payload:{pos:e}}}(t))}}})(Dr),Nr=function(e){switch(Te(e).length){case 0:return[gr.ADD_STATE];case 1:return[gr.ADD_STATE,gr.REMOVE_STATE,gr.ADD_SELF_TRANSITION,gr.MAKE_START,gr.TOGGLE_ACCEPTING];case 2:return[gr.ADD_STATE,gr.REMOVE_TWO_STATES,gr.ADD_TRANSITION,gr.TOGGLE_TWO_ACCEPTING];default:return[gr.ADD_STATE,gr.REMOVE_MANY_STATES,gr.TOGGLE_MANY_ACCEPTING]}},gr={ADD_STATE:"ADD_STATE",REMOVE_STATE:"REMOVE_STATE",REMOVE_TWO_STATES:"REMOVE_TWO_STATES",REMOVE_MANY_STATES:"REMOVE_MANY_STATES",ADD_SELF_TRANSITION:"ADD_SELF_TRANSITION",ADD_TRANSITION:"ADD_TRANSITION",MAKE_START:"MAKE_START",UNMAKE_START:"UNMAKE_START",TOGGLE_ACCEPTING:"TOGGLE_ACCEPTING",TOGGLE_TWO_ACCEPTING:"TOGGLE_TWO_ACCEPTING",TOGGLE_MANY_ACCEPTING:"TOGGLE_MANY_ACCEPTING"},jr=(n(58),function(e){function t(){var e,n,r;Object(W.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(r=Object(Cn.a)(this,(e=Object(Mn.a)(t)).call.apply(e,[this].concat(a)))).handleUndoButtonClick=function(){r.props.undo()},r.handleRedoButtonClick=function(){r.props.redo()},r.buttonConfig=(n={},Object(p.a)(n,gr.ADD_STATE,{action:function(){return r.props.addState()},className:"add-state",title:"add new state"}),Object(p.a)(n,gr.REMOVE_STATE,{action:function(){return r.props.removeStates()},className:"remove-state",title:"remove state"}),Object(p.a)(n,gr.REMOVE_TWO_STATES,{action:function(){return r.props.removeStates()},className:"remove-two-states",title:"remove states"}),Object(p.a)(n,gr.REMOVE_MANY_STATES,{action:function(){return r.props.removeStates()},className:"remove-many-states",title:"remove states"}),Object(p.a)(n,gr.ADD_SELF_TRANSITION,{action:function(){return r.props.addTransition()},className:"add-self-transition",title:"add self transition"}),Object(p.a)(n,gr.ADD_TRANSITION,{action:function(){return r.props.addTransition()},className:"add-transition",title:"add transition"}),Object(p.a)(n,gr.MAKE_START,{action:function(){return r.props.makeStart()},className:"make-start",title:"distinguish as initial state"}),Object(p.a)(n,gr.TOGGLE_ACCEPTING,{action:function(){return r.props.toggleFinal()},className:"toggle-accepting",title:"toggle state's status as final"}),Object(p.a)(n,gr.TOGGLE_TWO_ACCEPTING,{action:function(){return r.props.toggleFinal()},className:"toggle-two-accepting",title:"toggle states' statuses as final"}),Object(p.a)(n,gr.TOGGLE_MANY_ACCEPTING,{action:function(){return r.props.toggleFinal()},className:"toggle-many-accepting",title:"toggle states' statuses as final"}),n),r}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"edit-controls"},o.a.createElement("div",{className:"edit-controls__undo-redo-buttons"},o.a.createElement("button",{className:"edit-controls__button edit-controls__undo-button",title:"undo",onClick:this.handleUndoButtonClick}),o.a.createElement("button",{className:"edit-controls__button edit-controls__redo-button",title:"redo",onClick:this.handleRedoButtonClick})),this.props.inEditMode&&this.props.buttonTypes.map(function(t){var n=e.buttonConfig[t];return n&&o.a.createElement("button",{className:"edit-controls__button edit-controls__".concat(n.className,"-button"),title:n.title,key:t,onClick:n.action})}))}}]),t}(o.a.Component)),Tr=Object(c.b)(function(e){return{inEditMode:Q(e),buttonTypes:Nr(e)}},function(e){return{undo:function(){return e({type:"UNDO"})},redo:function(){return e({type:"REDO"})},addState:function(){return e({type:"START_ADDING_NODE"})},removeStates:function(){return e({type:"DELETE_SELECTED_NODES"})},addTransition:function(){return e({type:"ADD_TRANSITION_BETWEEN_SELECTED"})},makeStart:function(){return e({type:"MAKE_SELECTED_START_NODE"})},toggleFinal:function(){return e({type:"TOGGLE_SELECTED_FINAL_NODES"})}}})(jr),Sr=(n(59),function(e){function t(){var e,n;Object(W.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Cn.a)(this,(e=Object(Mn.a)(t)).call.apply(e,[this].concat(o)))).handleNewClick=function(){n.props.newMachine()},n.handleDownloadClick=function(){n.props.download()},n.handleUploadClick=function(){n.props.upload()},n}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"app-controls"},o.a.createElement("div",{className:"app-controls__buttons"},o.a.createElement("button",{className:"app-controls__button app-controls__new-button",title:"new empty machine",onClick:this.handleNewClick}),o.a.createElement("button",{className:"app-controls__button app-controls__download-button",title:"download machine (JSON)",onClick:this.handleDownloadClick}),o.a.createElement("button",{className:"app-controls__button app-controls__upload-button",title:"upload machine (JSON)",onClick:this.handleUploadClick})),o.a.createElement("a",{className:"app-controls__link",href:"#examples"},"Examples"),o.a.createElement("a",{className:"app-controls__link",href:"#tutorial"},"Tutorial"),o.a.createElement("a",{className:"app-controls__link",href:"#guide"},"Guide"),o.a.createElement("a",{className:"app-controls__link",href:"#about"},"About"),o.a.createElement("a",{className:"app-controls__link app-controls__source-link",href:"https://github.com/wjlewis/tm",target:"_blank",rel:"noopener noreferrer"},"<Source/>"))}}]),t}(o.a.Component)),Ar=Object(c.b)(null,function(e){return{newMachine:function(){return e({type:"NEW_MACHINE"})},download:function(){return e({type:"DOWNLOAD_MACHINE"})},upload:function(){return e({type:"UPLOAD_MACHINE"})}}})(Sr),Ir=(n(60),function(e){function t(){var e,n;Object(W.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(Cn.a)(this,(e=Object(Mn.a)(t)).call.apply(e,[this].concat(a)))).tapeRef=o.a.createRef(),n.handleScroll=function(e){n.props.updateScrollLeft(e.target.scrollLeft)},n.handleClearButtonClick=function(){n.props.clear()},n}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this,t=this.props.isEditable,n=sr()("tape__cell",{"tape__cell--editable":t});return o.a.createElement(o.a.Fragment,null,this.renderReadHead(),o.a.createElement("div",{className:"tape",ref:this.tapeRef,onScroll:this.handleScroll,style:{width:"".concat(720,"px")}},o.a.createElement("div",{className:"tape__cells"},o.a.createElement("div",{className:"tape__padding-left",style:{width:360}},"\u21d0\u2002this half intentionally left blank"),this.props.entries.map(function(t,r){return o.a.createElement("input",{key:r,disabled:!e.props.isEditable,className:n,value:t,placeholder:"\u2205",onChange:e.handleCellChange(r),onFocus:e.handleCellFocus(r),style:{width:"".concat(36,"px")},type:"text",maxLength:1})}),o.a.createElement("div",{className:"tape__padding-right",style:{width:"".concat(18,"px")}}))),this.renderFeeders(),this.renderClearButton())}},{key:"componentDidMount",value:function(){this.tapeRef.current&&this.tapeRef.current.scrollTo(18,0)}},{key:"componentDidUpdate",value:function(e){e.focusedCell!==this.props.focusedCell&&null!==this.props.focusedCell&&this.updateFocus()}},{key:"updateFocus",value:function(){if(this.tapeRef.current){var e=this.tapeRef.current.childNodes[0].childNodes[this.props.focusedCell+1];e&&e.focus()}}},{key:"handleCellChange",value:function(e){var t=this;return function(n){" "!==n.target.value&&t.props.changeCell(e,n.target.value)}}},{key:"handleCellFocus",value:function(e){var t=this;return function(){t.props.focusCell(e)}}},{key:"renderReadHead",value:function(){var e=sr()("tape-reader",{"tape-reader--active":!this.props.isEditable});return o.a.createElement("div",{className:e,style:{position:"absolute",left:"calc(50% - ".concat(18,"px)")}})}},{key:"renderClearButton",value:function(){return o.a.createElement("button",{className:"tape__clear-button",title:"clear tape contents",onClick:this.handleClearButtonClick,style:{position:"absolute",right:"calc(50% - ".concat(430,"px)")}})}},{key:"renderFeeders",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"tape-feed tape-feed__left",style:{position:"absolute",left:"calc(50% - ".concat(366,"px)")}}),o.a.createElement("div",{className:"tape-feed tape-feed__right",style:{position:"absolute",right:"calc(50% - ".concat(366,"px)")}}))}}]),t}(o.a.Component)),Pr=Object(c.b)(function(e){return{entries:mt(e),isEditable:Q(e),focusedCell:ht(e)}},function(e){return{changeCell:function(t,n){return e(function(e,t){return{type:"CHANGE_TAPE_CELL",payload:{pos:e,value:t}}}(t,n))},updateScrollLeft:function(t){return e(function(e){return{type:"UPDATE_SCROLL_LEFT",payload:{scrollLeft:e}}}(t))},focusCell:function(t){return e(function(e){return{type:"FOCUS_TAPE_CELL",payload:{pos:e}}}(t))},clear:function(){return e({type:"CLEAR_TAPE"})}}})(Ir),Cr=(n(61),function(e){function t(){var e,n;Object(W.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Cn.a)(this,(e=Object(Mn.a)(t)).call.apply(e,[this].concat(o)))).reset=function(){n.props.reset()},n.togglePlayPause=function(){n.props.isInEditMode?n.props.play():n.props.pause()},n.step=function(){n.props.step()},n}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props.isInEditMode;return o.a.createElement("div",{className:"sim-controls"},o.a.createElement("button",{onClick:this.reset},"Reset"),o.a.createElement("button",{onClick:this.togglePlayPause},e?"Play":"Pause"),o.a.createElement("button",{disabled:!e,onClick:this.step},"Step"))}}]),t}(o.a.Component)),Mr=Object(c.b)(function(e){return{isInEditMode:Q(e)}},function(e){return{reset:function(){return e({type:_})},pause:function(){return e({type:E})},step:function(){return e({type:y})},play:function(){return e({type:b})}}})(Cr),Lr=(n(62),function(e){function t(){var e,n;Object(W.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Cn.a)(this,(e=Object(Mn.a)(t)).call.apply(e,[this].concat(o)))).handleNameChange=function(e){n.props.changeName(e.target.value)},n}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){return o.a.createElement("input",{className:"name-input",type:"text",value:this.props.name,onChange:this.handleNameChange,placeholder:"Machine name"})}}]),t}(o.a.Component)),kr=Object(c.b)(function(e){return{name:Dn(e)}},function(e){return{changeName:function(t){return e(function(e){return{type:"CHANGE_MACHINE_NAME",payload:{name:e}}}(t))}}})(Lr),Rr=(n(63),function(e){function t(){var e,n;Object(W.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Cn.a)(this,(e=Object(Mn.a)(t)).call.apply(e,[this].concat(o)))).handleMessageClick=function(e){e.stopPropagation()},n.dismiss=function(){n.props.dismiss()},n}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){return this.props.show&&o.a.createElement("div",{className:"message__container",onClick:this.dismiss},o.a.createElement("div",{className:"message",onClick:this.handleMessageClick},o.a.createElement("h1",{className:"message__title"},this.props.title),o.a.createElement("div",{className:"message__content"},this.props.content),o.a.createElement("button",{className:"message__dismiss-button",onClick:this.dismiss},"Dismiss")))}}]),t}(o.a.Component)),xr=Object(c.b)(function(e){return{show:en(e),title:tn(e),content:nn(e)}},function(e){return{dismiss:function(){return e({type:"DISMISS_MESSAGE"})}}})(Rr),Ur=(n(64),function(e){function t(){var e,n;Object(W.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Cn.a)(this,(e=Object(Mn.a)(t)).call.apply(e,[this].concat(o)))).handleKeyDown=function(e){n.props.keyDown(e.key,e)},n.handleKeyUp=function(e){n.props.keyUp(e.key)},n}return Object(Ln.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement(wr,null),o.a.createElement(kr,null),o.a.createElement(Pr,null),o.a.createElement(Tr,null),o.a.createElement(Ar,null),o.a.createElement(Mr,null),o.a.createElement(xr,null))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp),this.props.loadSaved()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}}]),t}(o.a.Component)),Gr=Object(c.b)(null,function(e){return{keyDown:function(t,n){return e(function(e,t){return{type:"KEY_DOWN",payload:{key:e,event:t}}}(t,n))},keyUp:function(t){return e(function(e){return{type:"KEY_UP",payload:{key:e}}}(t))},loadSaved:function(){return e({type:"LOAD_SNAPSHOT"})}}})(Ur);n(65);i.a.render(o.a.createElement(c.a,{store:ir},o.a.createElement(Gr,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.403a5761.chunk.js.map