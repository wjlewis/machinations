(window.webpackJsonpmachinations=window.webpackJsonpmachinations||[]).push([[0],{35:function(e,t,n){e.exports=n(63)},47:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(22),a=n.n(i),c=n(12),s=n(18),u=n(34),l=n(33),p=n(3),d=function(e){return{type:"ADD_TRANSITION_DETAIL",payload:{arrow:e}}},f=function(e){return{type:"MOVE_TAPE",payload:{direction:e}}},O=function(e){return{type:"WRITE_TAPE_SYMBOL",payload:{symbol:e}}},y=function(e,t,n,r){return{type:"DELETE_ENTITIES",payload:{nodes:e,arrows:t,controlPoints:n,transitionDetails:r}}},m=function(e,t){return{type:"DISPLAY_MESSAGE",payload:{title:e,content:t}}},b="STEP_SIM",h="PLAY_SIM",E="PAUSE_SIM",v="RESET_SIM",D=function(e){return{type:"SET_CURRENT_STATE",payload:{id:e}}},_=function(e){return{type:"SET_ACTIVE_NODE",payload:{id:e}}},w=function(e){return{type:"SET_ACTIVE_TRANSITION_DETAIL",payload:{id:e}}},T=function(e){return{type:"SET_ACTIVE_CONTROL_POINT",payload:{id:e}}},j=function(e){return{type:"SET_ACTIVE_ARROW",payload:{id:e}}},N="HALT_ACCEPT",S=function(){return{type:N}},g="HALT_REJECT",A=function(){return{type:g}},I=function(e){return{type:"SWITCH_MODE",payload:{mode:e}}},P=n(4),M=n.n(P),C=n(19),R=n.n(C),k=function(e){return e.wip||e.committed},L=n(20),x=n(6),U=n(7),F=function(){function e(t,n){Object(x.a)(this,e),this.x=t,this.y=n}return Object(U.a)(e,[{key:"magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalize",value:function(){var t=this.magnitude();if(0===t)throw new Error("Cannot normalize 0 vector");return new e(this.x/t,this.y/t)}},{key:"perp",value:function(){return new e(-this.y,this.x)}},{key:"plus",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"minus",value:function(e){return this.plus(e.scale(-1))}},{key:"scale",value:function(t){return new e(t*this.x,t*this.y)}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"project",value:function(e){return e.scale(this.dot(e)/e.dot(e))}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}}]),e}();function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var V={EDIT:"EDIT",SIM:"SIM"},B={mode:V.EDIT},W=function(e){return e.mode.mode===V.EDIT},K=function(e,t){switch(t.type){case"SWITCH_MODE":return H(e,t.payload.mode);default:return e.mode}},H=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.mode,{mode:t})};function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Q={mousePos:new F(0,0),keysDown:[],isMouseDownNode:!1,isMouseDownControlPoint:!1,isAddingNode:!1,wasMouseReleasedOverNode:!1,wasMouseDragged:!1,wasMnemonicChanged:!1},q=function(e){return e.ui.mousePos},J=function(e){return e.ui.keysDown.includes("Shift")},X=function(e){return e.ui.isMouseDownNode},Z=function(e){return e.ui.isMouseDownControlPoint},$=function(e){return e.ui.isAddingNode},ee=function(e){return e.ui.wasMouseDragged},te=function(e,t){if(!W(e))return e.ui;switch(t.type){case"KEY_DOWN":return ne(e,t.payload.key);case"KEY_UP":return re(e,t.payload.key);case"MOUSE_DOWN_NODE":return oe(e);case"MOUSE_UP_NODE":return ie(e);case"MOUSE_DOWN_CONTROL_POINT":return ae(e);case"MOUSE_UP_CONTROL_POINT":return ce(e);case"MOUSE_DOWN_CANVAS":return se(e);case"MOUSE_UP_CANVAS":return ue(e);case"START_ADDING_NODE":return le(e);case"ADD_NODE":return pe(e);case"MOUSE_MOVE_CANVAS":return de(e,t.payload.pos);case"CHANGE_MNEMONIC":return fe(e);case"BLUR_MNEMONIC":return Oe(e);default:return e.ui}},ne=function(e,t){return z({},e.ui,{keysDown:M.a.uniq([].concat(Object(L.a)(e.ui.keysDown),[t]))})},re=function(e,t){return z({},e.ui,{keysDown:e.ui.keysDown.filter(function(e){return e!==t})})},oe=function(e){return z({},e.ui,{isMouseDownNode:!0})},ie=function(e){return z({},e.ui,{isMouseDownNode:!1,wasMouseReleasedOverNode:!0})},ae=function(e){return z({},e.ui,{isMouseDownControlPoint:!0})},ce=function(e){return z({},e.ui,{isMouseDownControlPoint:!1})},se=function(e){return z({},e.ui,{wasMouseDragged:!1})},ue=function(e){return z({},e.ui,{isMouseDownNode:!1,isMouseDownControlPoint:!1,wasMouseReleasedOverNode:!1})},le=function(e){return z({},e.ui,{isAddingNode:!0})},pe=function(e){return z({},e.ui,{isAddingNode:!1,wasMouseReleasedOverNode:!0})},de=function(e,t){return z({},e.ui,{mousePos:t,wasMouseDragged:!0})},fe=function(e){return z({},e.ui,{wasMnemonicChanged:!0})},Oe=function(e){return z({},e.ui,{wasMnemonicChanged:!1})};function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var be=function(e){return Object.values(k(e.entities.nodes).byId)},he=function(e,t){var n=be(e).find(function(e){return e.id===t});if(!n)throw new Error('No Node with ID "'.concat(t,'"'));return n},Ee=function(e,t){return k(e.entities.nodes).selected.includes(t)},ve=function(e,t){return k(e.entities.nodes).byId[t].isFinal},De=function(e){return k(e.entities.nodes).selected},_e=function(e,t){var n=k(e.entities.nodes).startNode;return null!==n&&n===t},we=function(e,t){if(!W(e))return e.entities.nodes;switch(t.type){case"ADD_NODE":return Te(e,t.payload.pos);case"DELETE_ENTITIES":return je(e,t.payload.nodes);case"MAKE_SELECTED_START_NODE":return Ne(e);case"TOGGLE_SELECTED_FINAL_NODES":return Se(e);case"CHANGE_MNEMONIC":return ge(e,t.payload.id,t.payload.value);case"BLUR_MNEMONIC":return Ae(e);case"MOUSE_DOWN_NODE":return Ie(e,t.payload.id);case"MOUSE_UP_NODE":return Pe(e);case"MOUSE_DOWN_CANVAS":return Me(e,t.payload.pos);case"MOUSE_UP_CANVAS":return Ce(e);case"MOUSE_MOVE_CANVAS":return Re(e,t.payload.pos);default:return e.entities.nodes}},Te=function(e,t){var n=R()(),r={id:n,pos:t,mnemonic:"",isFinal:!1};return{wip:null,committed:M.a.mergeWith({},e.entities.nodes.committed,{byId:Object(p.a)({},n,r)},function(e,t,r){return"selected"===r?[n]:void 0})}},je=function(e,t){var n=e.entities.nodes.committed;return{wip:null,committed:me({},n,{byId:M.a.omit(n.byId,t),selected:[],startNode:n.startNode&&t.includes(n.startNode)?null:n.startNode})}},Ne=function(e){return{wip:null,committed:M.a.merge({},e.entities.nodes.committed,{startNode:e.entities.nodes.committed.selected[0]})}},Se=function(e){var t=De(e).map(function(t){return he(e,t)}),n=t.some(function(e){return e.isFinal}),r=t.reduce(function(e,t){return me({},e,Object(p.a)({},t.id,me({},t,{isFinal:!n})))},{});return{wip:null,committed:M.a.merge({},e.entities.nodes.committed,{byId:me({},r)})}},ge=function(e,t,n){return me({},e.entities.nodes,{wip:M.a.merge({},k(e.entities.nodes),{byId:Object(p.a)({},t,{mnemonic:n})})})},Ae=function(e){return{wip:null,committed:k(e.entities.nodes)}},Ie=function(e,t){var n,r,o=e.entities.nodes,i=o.committed.selected;return{wip:null,committed:me({},o.committed,{selected:J(e)?(n=t,r=i,r.includes(n)?r.filter(function(e){return e!==n}):[].concat(Object(L.a)(r),[n])):i.includes(t)?i:[t]})}},Pe=function(e){return{wip:null,committed:me({},k(e.entities.nodes),{offsets:{}})}},Me=function(e,t){if(!X(e))return e.entities.nodes;var n=e.entities.nodes,r=n.committed.selected.reduce(function(e,r){var o=n.committed.byId[r];return me({},e,Object(p.a)({},r,o.pos.minus(t)))},{});return me({},n,{wip:me({},n.committed,{offsets:r})})},Ce=function(e){return function(e){return e.ui.wasMouseReleasedOverNode}(e)?e.entities.nodes:{wip:null,committed:me({},e.entities.nodes.committed,{selected:[]})}},Re=function(e,t){var n=e.entities.nodes;if(!X(e)||!n.wip)return n;var r=Object.keys(n.wip.offsets).reduce(function(e,r){var o=n.wip.byId[r],i=t.plus(n.wip.offsets[r]);return me({},e,Object(p.a)({},r,me({},o,{pos:i})))},{});return M.a.merge({},n,{wip:{byId:me({},r)}})};function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Le=function(e){return Object.values(e.entities.arrows.byId)},xe=function(e,t){var n=e.entities.arrows.byId[t];if(!n)throw new Error('No Arrow with ID "'.concat(t,'"'));return n},Ue=function(e,t){if(!W(e))return e.entities.arrows;switch(t.type){case"ADD_ARROW":return Fe(e,t.payload.start,t.payload.end,t.payload.id);case"DELETE_ENTITIES":return Ge(e,t.payload.arrows);default:return e.entities.arrows}},Fe=function(e,t,n,r){return M.a.merge({},e.entities.arrows,{byId:Object(p.a)({},r,{start:t,end:n,id:r})})},Ge=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.entities.arrows,{byId:M.a.omit(e.entities.arrows.byId,t)})};function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var We=function(e){return Object.values(k(e.entities.controlPoints).byId)},Ke=function(e,t){var n=We(e).find(function(e){return e.arrow===t});if(!n)throw new Error('No ControlPoint associated with Arrow having ID "'.concat(t,'"'));return n},He=function(e,t){if(!W(e))return e.entities.controlPoints;switch(t.type){case"ADD_ARROW":return Ye(e,t.payload.start,t.payload.end,t.payload.id);case"DELETE_ENTITIES":return ze(e,t.payload.controlPoints);case"MOUSE_DOWN_CONTROL_POINT":return Qe(e,t.payload.id);case"MOUSE_UP_CONTROL_POINT":return qe(e);case"MOUSE_DOWN_CANVAS":return Je(e,t.payload.pos);case"MOUSE_MOVE_CANVAS":return $e(e,t.payload.pos);case"MOUSE_UP_CANVAS":case"MOUSE_UP_NODE":return nt(e);default:return e.entities.controlPoints}},Ye=function(e,t,n,r){var o=R()(),i=he(e,t).pos,a=t===n?i:he(e,n).pos,c=t===n?i.minus(new F(0,120)):function(e,t){var n=t.minus(e),r=n.perp().normalize().scale(1);return n.scale(.5).plus(r).plus(e)}(i,a);return{wip:null,committed:M.a.merge({},e.entities.controlPoints.committed,{byId:Object(p.a)({},o,{id:o,arrow:r,pos:c})})}},ze=function(e,t){return{wip:null,committed:Be({},e.entities.controlPoints.committed,{byId:M.a.omit(e.entities.controlPoints.committed.byId,t)})}},Qe=function(e,t){return Be({},e.entities.controlPoints,{wip:null,committed:Be({},e.entities.controlPoints.committed,{selected:t})})},qe=function(e){return{wip:null,committed:Be({},k(e.entities.controlPoints),{selected:null,selectedOffset:null})}},Je=function(e,t){return Z(e)?Xe(e,t):X(e)?Ze(e,t):e.entities.controlPoints},Xe=function(e,t){var n=e.entities.controlPoints.committed;if(!n.selected)return e.entities.controlPoints;var r=n.byId[n.selected].pos.minus(t);return Be({},e.entities.controlPoints,{wip:M.a.merge({},n,{selectedOffset:r})})},Ze=function(e,t){var n=e.entities.controlPoints.committed,r=De(e),o=Object.values(n.byId).filter(function(t){var n=xe(e,t.arrow);return r.includes(n.start)&&r.includes(n.end)}).reduce(function(e,n){return Be({},e,Object(p.a)({},n.id,new F(n.pos.x-t.x,n.pos.y-t.y)))},{}),i=Object.values(n.byId).reduce(function(n,o){var i,a,c=xe(e,o.arrow),s=r.includes(c.start),u=r.includes(c.end);if(a=u,!(i=s)&&!a||i&&a)return n;var l=he(e,u?c.start:c.end).pos,d=he(e,s?c.start:c.end).pos,f=d.minus(t),O=l.minus(d),y=o.pos.minus(d),m=y.project(O),b=m.magnitude()/O.magnitude(),h=y.minus(m),E=(h.dot(m.perp())>0?1:-1)*h.magnitude();return Be({},n,Object(p.a)({},o.id,{fixedPos:l,movingOffset:f,fractionAlong:b,perpLength:E}))},{});return Be({},e.entities.controlPoints,{wip:Be({},n,{fullOffsets:o,halfOffsets:i})})},$e=function(e,t){return Z(e)?et(e,t):X(e)?tt(e,t):e.entities.controlPoints},et=function(e,t){var n=e.entities.controlPoints;if(!n.wip||!n.wip.selected||!n.wip.selectedOffset)return n;var r=n.wip.byId[n.wip.selected],o=t.plus(n.wip.selectedOffset);return Be({},n,{wip:M.a.merge({},n.wip,{byId:Object(p.a)({},r.id,Be({},r,{pos:o}))})})},tt=function(e,t){var n=e.entities.controlPoints;if(!n.wip)return n;var r=Object.keys(n.wip.fullOffsets).reduce(function(e,r){var o=n.wip.byId[r],i=t.plus(n.wip.fullOffsets[r]);return Be({},e,Object(p.a)({},r,Be({},o,{pos:i})))},{}),o=Object.keys(n.wip.halfOffsets).reduce(function(e,r){var o=n.wip.byId[r],i=n.wip.halfOffsets[r],a=i.fixedPos,c=i.movingOffset,s=i.fractionAlong,u=i.perpLength,l=t.plus(c),d=a.minus(l),f=d.scale(s).plus(l),O=d.perp().normalize().scale(u).plus(f);return Be({},e,Object(p.a)({},r,Be({},o,{pos:O})))},{});return Be({},n,{wip:M.a.merge({},n.wip,{byId:Be({},r,{},o)})})},nt=function(e){return Be({},e.entities.controlPoints,{wip:null,committed:Be({},k(e.entities.controlPoints),{selected:null,selectedOffset:null,fullOffsets:{},halfOffsets:{}})})};function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var it=function(e){return Object.values(e.entities.transitionDetails.byId)},at=function(e){return M.a.groupBy(it(e),function(e){return e.arrow})},ct=function(e,t){return at(e)[t]},st=function(e){var t=Object.values(function(e){return M.a.groupBy(it(e),function(t){return xe(e,t.arrow).start})}(e)).map(function(e){return Object.values(M.a.groupBy(e,function(e){return e.read}))}).map(function(e){return e.filter(function(e){return e.length>1})});return M.a.flattenDeep(t).map(function(e){return e.id})},ut=function(e){return e.entities.transitionDetails.focused},lt=function(e,t){if(!W(e))return e.entities.transitionDetails;switch(t.type){case"ADD_TRANSITION_DETAIL":return pt(e,t.payload.arrow);case"ADD_ARROW":return dt(e,t.payload.id);case"CHANGE_TRANSITION_DETAIL":return ft(e,t.payload.detail);case"DELETE_TRANSITION_DETAIL":return Ot(e,t.payload.id);case"DELETE_ENTITIES":return yt(e,t.payload.transitionDetails);case"FOCUS_TRANSIITON_DETAIL":return mt(e,t.payload.id);case"BLUR_TRANSITION_DETAIL":return bt(e);case"MARK_DUPLICATE_TRANSITIONS":return ht(e,t.payload.ids);default:return e.entities.transitionDetails}},pt=function(e,t){var n=R()(),r={id:n,arrow:t,read:"",write:"",move:"L",isFocused:!1};return M.a.merge({},e.entities.transitionDetails,{byId:Object(p.a)({},n,r),focused:n})},dt=function(e,t){return pt(e,t)},ft=function(e,t){return M.a.merge({},e.entities.transitionDetails,{byId:Object(p.a)({},t.id,t)})},Ot=function(e,t){var n=e.entities.transitionDetails;return ot({},n,{byId:M.a.omit(n.byId,t)})},yt=function(e,t){return ot({},e.entities.transitionDetails,{byId:M.a.omit(e.entities.transitionDetails.byId,t)})},mt=function(e,t){return ot({},e.entities.transitionDetails,{focused:t})},bt=function(e){return ot({},e.entities.transitionDetails,{focused:null})},ht=function(e,t){return ot({},e.entities.transitionDetails,{byId:M.a.mapValues(e.entities.transitionDetails.byId,function(e){return ot({},e,{isDuplicate:t.includes(e.id)})})})};function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Dt=function(e){return e.entities.tape.entries},_t=function(e){return e.entities.tape.center},wt=function(e){var t=e.entities.tape;return t.entries[t.center]},Tt=function(e,t){switch(t.type){case"SET_TAPE_CENTER":return jt(e,t.payload.pos);case"CHANGE_TAPE_CELL":return Nt(e,t.payload.pos,t.payload.value);case"MOVE_TAPE":return St(e,t.payload.direction);case"WRITE_TAPE_SYMBOL":return gt(e,t.payload.symbol);default:return e.entities.tape}},jt=function(e,t){return vt({},e.entities.tape,{center:t})},Nt=function(e,t,n){return vt({},e.entities.tape,{entries:M.a.update(M.a.clone(e.entities.tape.entries),t,function(e){return n})})},St=function(e,t){return vt({},e.entities.tape,{center:e.entities.tape.center+("L"===t?1:-1)})},gt=function(e,t){var n=e.entities.tape;return vt({},n,{entries:M.a.set(M.a.clone(n.entries),n.center,t)})},At=n(29);function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Mt=function(e,t){if(!W(e))return e.undoRedo;switch(t.type){case"MOUSE_UP_NODE":return Ct(e);case"MOUSE_UP_CONTROL_POINT":return Rt(e);case"ADD_NODE":return Ut(e,"add node");case"BLUR_MNEMONIC":return kt(e);case"MAKE_SELECTED_START_NODE":return Ut(e,"change initial state");case"TOGGLE_SELECTED_FINAL_NODES":return Ut(e,'toggle "final" status for selected states');case"ADD_ARROW":case"ADD_TRANSITION_DETAIL":return Ut(e,"add new transition");case"DELETE_ENTITIES":return Ut(e,"delete entities");case"CHANGE_TRANSITION_DETAIL":return Ut(e,"change transition");case"CHANGE_TAPE_CELL":return Ut(e,"change tape cell");default:return e.undoRedo}},Ct=function(e){return ee(e)?Ut(e,"move node"):e.undoRedo},Rt=function(e){return ee(e)?Ut(e,"move control point"):e.undoRedo},kt=function(e){return function(e){return e.ui.wasMnemonicChanged}(e)?Ut(e,"change mnemonic"):e.undoRedo},Lt=function(e){if(0===e.undoRedo.actions.length)return e;var t=Object(At.a)(e.undoRedo.actions),n=t[0],r=t.slice(1),o=Pt({},n,{value:Ft(e)});return Pt({},Gt(e,n.value),{undoRedo:Pt({},e.undoRedo,{actions:r,redoable:[o].concat(Object(L.a)(e.undoRedo.redoable))})})},xt=function(e){if(0===e.undoRedo.redoable.length)return e;var t=Object(At.a)(e.undoRedo.redoable),n=t[0],r=t.slice(1),o=Pt({},n,{value:Ft(e)});return Pt({},Gt(e,n.value),{undoRedo:Pt({},e.undoRedo,{actions:[o].concat(Object(L.a)(e.undoRedo.actions)),redoable:r})})},Ut=function(e,t){return{actions:[{description:t,value:Ft(e)}].concat(Object(L.a)(e.undoRedo.actions.slice(0,32))),redoable:[]}},Ft=function(e){return M.a.get(e,"entities")},Gt=function(e,t){return Pt({},e,{entities:M.a.mapValues(t,function(e){return M.a.mapValues(e,function(e,t){return"wip"===t?null:e})})})};function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Wt=function(e){return e.message.show},Kt=function(e){return e.message.title},Ht=function(e){return e.message.content},Yt=function(e,t){switch(t.type){case"DISPLAY_MESSAGE":return zt(e,t.payload.title,t.payload.content);case"DISMISS_MESSAGE":return Qt(e);default:return e.message}},zt=function(e,t,n){return Bt({},e.message,{show:!0,title:t,content:void 0!==n?n:null})},Qt=function(e){return Bt({},e.message,{show:!1,title:null,content:null})};function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Xt=function(e){return e.sim.currentState||function(e){var t=k(e.entities.nodes).startNode;if(null===t)throw new Error("No start node has been distinguished.");return t}(e)},Zt=function(e,t){return e.sim.activeNode===t},$t=function(e,t){return e.sim.activeArrow===t},en=function(e,t){return e.sim.activeControlPoint===t},tn=function(e){return e.sim.activeTransitionDetail},nn=function(e,t){switch(t.type){case"SET_CURRENT_STATE":return rn(e,t.payload.id);case"SET_ACTIVE_NODE":return on(e,t.payload.id);case"SET_ACTIVE_TRANSITION_DETAIL":return an(e,t.payload.id);case"SET_ACTIVE_ARROW":return cn(e,t.payload.id);case"SET_ACTIVE_CONTROL_POINT":return sn(e,t.payload.id);case v:return un(e);default:return e.sim}},rn=function(e,t){return Jt({},e.sim,{currentState:t})},on=function(e,t){return Jt({},e.sim,{activeNode:t})},an=function(e,t){return Jt({},e.sim,{activeTransitionDetail:t})},cn=function(e,t){return Jt({},e.sim,{activeArrow:t})},sn=function(e,t){return Jt({},e.sim,{activeControlPoint:t})},un=function(e){return Jt({},e.sim,{currentState:null,activeNode:null,activeArrow:null,activeTransitionDetail:null,activeControlPoint:null})},ln={entities:{nodes:{wip:null,committed:{byId:{},selected:[],offsets:{},startNode:null}},arrows:{byId:{}},controlPoints:{wip:null,committed:{byId:{},selected:null,selectedOffset:null,fullOffsets:{},halfOffsets:{}}},transitionDetails:{byId:{},focused:null},tape:{entries:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],center:15}},ui:Q,undoRedo:{actions:[],redoable:[]},message:{show:!1,title:null,content:null},mode:B,sim:{currentState:null,activeNode:null,activeArrow:null,activeTransitionDetail:null,activeControlPoint:null}};function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UNDO":return Lt(e);case"REDO":return xt(e);default:return dn({},e,{entities:dn({},e.entities,{nodes:we(e,t),arrows:Ue(e,t),controlPoints:He(e,t),transitionDetails:lt(e,t),tape:Tt(e,t)}),ui:te(e,t),undoRedo:Mt(e,t),message:Yt(e,t),mode:K(e,t),sim:nn(e,t)})}},On={Backspace:function(e){return De(e).length>0?{type:"DELETE_SELECTED_NODES"}:null},n:function(e,t){return t.ctrlKey?(t.preventDefault(),{type:"START_ADDING_NODE"}):null},t:function(e,t){return De(e).length>0&&t.ctrlKey?(t.preventDefault(),{type:"ADD_TRANSITION_BETWEEN_SELECTED"}):null},z:function(e,t){return t.ctrlKey||t.metaKey?{type:"UNDO"}:null},y:function(e,t){return t.ctrlKey||t.metaKey?(t.preventDefault(),{type:"REDO"}):null}},yn=n(11),mn=n(9),bn=n(10),hn=(n(47),function(e){function t(){return Object(x.a)(this,t),Object(yn.a)(this,Object(mn.a)(t).apply(this,arguments))}return Object(bn.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"error-report"},o.a.createElement("div",{className:"error-report__section"},o.a.createElement("span",{className:"error-report__title"},"What's wrong:\u2002"),o.a.createElement("span",{className:"error-report__content"},this.props.whatsWrong)),o.a.createElement("div",{className:"error-report__section"},o.a.createElement("span",{className:"error-report__title"},"How to fix it:\u2002"),o.a.createElement("span",{className:"error-report__content"},this.props.howToFix)))}}]),t}(o.a.Component)),En=o.a.createElement(hn,{whatsWrong:"In order for the machine to start, a state must be distinguished as the initial or start state. You have not yet identified any state as such.",howToFix:'Select one of your machine states and click the "Make Start State" button to distinguish it as the initial state.'}),vn=o.a.createElement(hn,{whatsWrong:"At the moment, you have 2 or more transitions from the same state with the same read symbol. Such nondeterministic behavior is not supported.",howToFix:"Find all transitions whose read symbols are marked red, and modify or remove the associated transitions so that all transitions for each state have distinct read symbols"}),Dn=(n(48),function(e){function t(){return Object(x.a)(this,t),Object(yn.a)(this,Object(mn.a)(t).apply(this,arguments))}return Object(bn.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props.accepted;return o.a.createElement("div",{className:"halt-report"},o.a.createElement("div",{className:"halt-report__title"},"The machine has\xa0",o.a.createElement("span",{className:"halt-report__result halt-report__result--".concat(e?"accepted":"rejected")},e?"accepted":"rejected"),"\xa0the input string."))}}]),t}(o.a.Component)),_n=o.a.createElement(Dn,{accepted:!0}),wn=o.a.createElement(Dn,{accepted:!1}),Tn=n(17),jn=n.n(Tn),Nn=n(8),Sn=jn.a.mark(Pn),gn=jn.a.mark(Mn),An=jn.a.mark(Cn),In=jn.a.mark(kn);function Pn(e){var t;return jn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Nn.c)(Mn,e);case 2:return t=n.sent,n.next=5,Object(Nn.f)([E,v,N,g]);case 5:return n.next=7,Object(Nn.a)(t);case 7:case"end":return n.stop()}},Sn)}function Mn(e){return jn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Nn.d)(I(V.SIM));case 3:if(!e){t.next=8;break}return t.next=6,Cn();case 6:t.next=13;break;case 8:return t.next=11,Cn();case 11:t.next=8;break;case 13:return t.prev=13,t.next=16,Object(Nn.d)(I(V.EDIT));case 16:return t.finish(13);case 17:case"end":return t.stop()}},gn,null,[[0,,13,17]])}function Cn(){var e,t,n,r,o,i,a,c,s,u,l;return jn.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Object(Nn.e)(Xt);case 2:return e=p.sent,p.next=5,Object(Nn.e)(wt);case 5:return t=p.sent,p.next=8,Object(Nn.e)(function(n){return Rn(n,e,t)});case 8:return n=p.sent,r=1e3,p.next=12,Object(Nn.d)(_(e));case 12:return p.next=14,Object(Nn.b)(r/4);case 14:if(null!==n){p.next=25;break}return p.next=17,Object(Nn.e)(function(t){return ve(t,e)});case 17:if(!p.sent){p.next=23;break}return p.next=21,Object(Nn.d)(S());case 21:p.next=25;break;case 23:return p.next=25,Object(Nn.d)(A());case 25:return i=(o=n).endId,a=o.arrowId,c=o.controlPointId,s=o.transitionDetailId,u=o.writeSymbol,l=o.tapeDirection,p.next=28,Object(Nn.d)(j(a));case 28:return p.next=30,Object(Nn.d)(T(c));case 30:return p.next=32,Object(Nn.d)(w(s));case 32:return p.next=34,Object(Nn.d)(O(u));case 34:return p.next=36,Object(Nn.d)(f(l));case 36:return p.next=38,Object(Nn.b)(r/4);case 38:return p.next=40,Object(Nn.d)(_(i));case 40:return p.next=42,Object(Nn.d)(D(i));case 42:return p.next=44,Object(Nn.b)(r/4);case 44:return p.next=46,Object(Nn.d)(j(null));case 46:return p.next=48,Object(Nn.d)(T(null));case 48:return p.next=50,Object(Nn.d)(w(null));case 50:return p.next=52,Object(Nn.b)(r/4);case 52:case"end":return p.stop()}},An)}var Rn=function(e,t,n){var r=function(e,t){return Le(e).filter(function(e){return e.start===t})}(e,t),o=M.a.flatten(r.map(function(t){return ct(e,t.id)})).find(function(e){return e.read===n});if(!o)return null;var i=r.find(function(e){return e.id===o.arrow});if(!i)throw new Error('Inconsistency in state: transition detail references nonexistent arrow "'.concat(o.arrow,'"'));var a=Ke(e,i.id);return{endId:i.end,arrowId:i.id,controlPointId:a.id,transitionDetailId:o.id,writeSymbol:o.write,tapeDirection:o.move}};function kn(){return jn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Nn.g)(b,Pn,!0);case 2:return e.next=4,Object(Nn.g)(h,Pn,!1);case 4:case"end":return e.stop()}},In)}var Ln=Object(u.a)(),xn=Object(s.createStore)(fn,Object(l.composeWithDevTools)(Object(s.applyMiddleware)(function(e){return function(t){return function(n){if("KEY_DOWN"!==n.type)return t(n);var r=e.getState(),o=n.payload,i=o.key,a=o.event,c=On[i];if(!c)return t(n);var s=c(r,a);return s?(t(n),t(s)):t(n)}}},function(e){return function(t){return function(n){if("ADD_TRANSITION_BETWEEN_SELECTED"!==n.type)return t(n);var r=e.getState(),o=De(r),i=o[0],a=o[1]||o[0],c=function(e,t,n){return Le(e).find(function(e){return e.start===t&&e.end===n})||null}(r,i,a);if(c)return t(d(c.id));var s=R()();return t(function(e,t,n){return{type:"ADD_ARROW",payload:{start:e,end:t,id:n}}}(i,a,s))}}},function(e){return function(t){return function(n){if("DELETE_TRANSITION_DETAIL"!==n.type)return t(n);var r=n.payload,o=r.id,i=r.arrow,a=e.getState();if(ct(a,i).filter(function(e){return e.id!==o}).length>0)return t(n);var c=Ke(a,i).id;return t(y([],[i],[c],[o]))}}},function(e){return function(t){return function(n){if("DELETE_SELECTED_NODES"!==n.type)return t(n);var r=e.getState(),o=De(r),i=M.a.flatten(o.map(function(e){return function(e,t){return Le(e).filter(function(e){return e.start===t||e.end===t})}(r,e)})),a=M.a.uniq(M.a.flatten(i.map(function(e){return e.id}))),c=a.map(function(e){return Ke(r,e)}).map(function(e){return e.id}),s=M.a.flatten(a.map(function(e){return ct(r,e)})).map(function(e){return e.id});return t(y(o,a,c,s))}}},function(e){return function(t){return function(n){if(!["ADD_TRANSITION_DETAIL","CHANGE_TRANSITION_DETAIL","DELETE_TRANSITION_DETAIL","ADD_ARROW"].includes(n.type))return t(n);t(n);var r=st(e.getState());return t({type:"MARK_DUPLICATE_TRANSITIONS",payload:{ids:r}})}}},function(e){return function(t){return function(n){if(![b,h].includes(n.type))return t(n);var r=e.getState();return function(e){return null!==k(e.entities.nodes).startNode}(r)?st(r).length>0?t(m("Nondeterministic transitions",vn)):t(n):t(m("Missing start state",En))}}},Ln,function(e){return function(e){return function(t){return[N,g].includes(t.type)?t.type===N?e(m("Machine Halted",_n)):t.type===g?e(m("Machine Halted",wn)):void 0:e(t)}}})));Ln.run(kn);var Un=xn,Fn=n(13),Gn=n.n(Fn),Vn=(n(50),function(e){function t(){return Object(x.a)(this,t),Object(yn.a)(this,Object(mn.a)(t).apply(this,arguments))}return Object(bn.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=Gn()("arrow",{"arrow--editable":this.props.isEditable,"arrow--active":this.props.isActive}),t=this.props.isSelfLoop?this.computeCubicPathString():this.computeQuadraticPathString();return o.a.createElement("path",{className:e,d:t})}},{key:"computeQuadraticPathString",value:function(){var e=this.props,t=e.start,n=e.end,r=e.control,o=t.plus(n.minus(t).scale(.5)),i=o.plus(r.minus(o).scale(2));return"M ".concat(t.x," ").concat(t.y," Q ").concat(i.x," ").concat(i.y," ").concat(n.x," ").concat(n.y)}},{key:"computeCubicPathString",value:function(){var e=this.props,t=e.start,n=e.control.minus(t).scale(4/3),r=n.perp().normalize().scale(80),o=t.plus(n).plus(r),i=t.plus(n).minus(r);return"M ".concat(t.x," ").concat(t.y," C ").concat(o.x," ").concat(o.y," ").concat(i.x," ").concat(i.y," ").concat(t.x," ").concat(t.y)}}]),t}(o.a.Component)),Bn=Object(c.b)(function(e,t){var n=he(e,t.details.start),r=he(e,t.details.end),o=Ke(e,t.details.id);return{start:n.pos,end:r.pos,control:o.pos,isSelfLoop:n.id===r.id,isEditable:W(e),isActive:$t(e,t.details.id)}})(Vn),Wn=(n(51),function(e){function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(yn.a)(this,(e=Object(mn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown()},n.handleMouseUp=function(e){n.props.mouseUp()},n.handleInputChange=function(e){n.props.changeMnemonic(e.target.value)},n.handleInputBlur=function(){n.props.blurMnemonic()},n}return Object(bn.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props.details,t=e.pos,n=e.mnemonic,r=Gn()("node",{"node--selected":this.props.isSelected,"node--final":this.props.details.isFinal,"node--start":this.props.isStart,"node--editable":this.props.isEditable,"node--active":!this.props.isEditable&&this.props.isActive}),i=Gn()("node__mnemonic-input",{"node__mnemonic-input--editable":this.props.isEditable}),a=t.plus(new F(-19,24));return o.a.createElement("div",{className:"node__container"},o.a.createElement("div",{className:r,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,style:{position:"absolute",left:t.x-21,top:t.y-21}}),o.a.createElement("input",{className:i,disabled:!this.props.isEditable,value:n,onChange:this.handleInputChange,onBlur:this.handleInputBlur,type:"text",maxLength:4,style:{position:"absolute",left:a.x,top:a.y}}))}}]),t}(o.a.Component)),Kn=Object(c.b)(function(e,t){return{isSelected:Ee(e,t.details.id),isStart:_e(e,t.details.id),isEditable:W(e),isActive:Zt(e,t.details.id)}},function(e,t){return{changeMnemonic:function(n){return e(function(e,t){return{type:"CHANGE_MNEMONIC",payload:{id:e,value:t}}}(t.details.id,n))},blurMnemonic:function(){return e({type:"BLUR_MNEMONIC"})},mouseDown:function(){return e({type:"MOUSE_DOWN_NODE",payload:{id:t.details.id}})},mouseUp:function(){return e({type:"MOUSE_UP_NODE"})}}})(Wn),Hn=(n(52),function(e){function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(yn.a)(this,(e=Object(mn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown()},n.handleMouseUp=function(e){n.props.mouseUp()},n}return Object(bn.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=Gn()("control-point",{"control-point--editable":this.props.isEditable,"control-point--active":this.props.isActive}),t=this.props.isSelfLoop?this.computeCubicString():this.computeQuadraticPathString();return o.a.createElement("path",{className:e,d:t,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp})}},{key:"computeQuadraticPathString",value:function(){var e=this.props,t=e.start,n=e.end,r=this.props.details.pos,o=n.minus(t).normalize().scale(18),i=o.perp().scale(1/3),a=r.minus(o).plus(i),c=r.minus(o).minus(i);return"M ".concat(a.x," ").concat(a.y," L ").concat(r.x," ").concat(r.y," L ").concat(c.x," ").concat(c.y)}},{key:"computeCubicString",value:function(){var e=this.props.start,t=this.props.details.pos,n=t.minus(e).normalize(),r=n.perp().scale(18),o=t.plus(r.scale(.5)),i=o.minus(r).plus(n.scale(6)),a=o.minus(r).minus(n.scale(6));return"M ".concat(i.x," ").concat(i.y," L ").concat(o.x," ").concat(o.y," L ").concat(a.x," ").concat(a.y)}}]),t}(o.a.Component)),Yn=Object(c.b)(function(e,t){var n=xe(e,t.details.arrow),r=he(e,n.start),o=he(e,n.end);return{start:r.pos,end:o.pos,isSelfLoop:r.id===o.id,isEditable:W(e),isActive:en(e,t.details.id)}},function(e,t){return{mouseDown:function(){return e({type:"MOUSE_DOWN_CONTROL_POINT",payload:{id:t.details.id}})},mouseUp:function(){return e({type:"MOUSE_UP_CONTROL_POINT"})}}})(Hn);n(53);function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var qn=function(e){function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(yn.a)(this,(e=Object(mn.a)(t)).call.apply(e,[this].concat(i)))).readRef=o.a.createRef(),n.handleSelectChange=function(e){n.props.onChange&&n.props.onChange(Qn({},n.props.detail,{move:e.target.value}))},n.handleFocus=function(){n.props.onFocus&&n.props.onFocus()},n.handleBlur=function(){n.props.onBlur&&n.props.onBlur()},n.handleDeleteClick=function(){n.props.onDelete&&n.props.onDelete()},n}return Object(bn.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props.detail,t=e.read,n=e.write,r=e.move,i=Gn()("transition-detail",{"transition-detail--active":this.props.isActive}),a=Gn()("transition-detail__input",{"transition-detail__input--focus":this.props.isFocused,"transition-detail__input--editable":this.props.isEditable}),c=Gn()(a,{"transition-detail__input--error":this.props.detail.isDuplicate}),s=Gn()("transition-detail__selector",{"transition-detail__selector--focus":this.props.isFocused,"transition-detail__selector--editable":this.props.isEditable});return o.a.createElement("div",{className:i},o.a.createElement("input",{className:c,ref:this.readRef,disabled:!this.props.isEditable,value:t,onChange:this.handleInputChange("read"),onFocus:this.handleFocus,onBlur:this.handleBlur,type:"text",maxLength:1}),o.a.createElement("span",{className:"transition-detail__separator"},"/"),o.a.createElement("input",{className:a,disabled:!this.props.isEditable,value:n,onChange:this.handleInputChange("write"),onFocus:this.handleFocus,onBlur:this.handleBlur,type:"text",maxLength:1}),o.a.createElement("span",{className:"transition-detail__separator"},","),o.a.createElement("select",{className:s,disabled:!this.props.isEditable,value:r,onChange:this.handleSelectChange},o.a.createElement("option",{value:"L"},"\u2190"),o.a.createElement("option",{value:"R"},"\u2192")),this.props.isEditable&&o.a.createElement("button",{className:"transition-detail__button",onClick:this.handleDeleteClick}))}},{key:"componentDidMount",value:function(){this.props.isFocused&&this.focus()}},{key:"focus",value:function(){this.readRef.current&&this.readRef.current.focus()}},{key:"handleInputChange",value:function(e){var t=this;return function(n){t.props.onChange&&t.props.onChange(Qn({},t.props.detail,Object(p.a)({},e,n.target.value)))}}}]),t}(o.a.Component),Jn=(n(54),function(e){function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(yn.a)(this,(e=Object(mn.a)(t)).call.apply(e,[this].concat(o)))).handleDetailChange=function(e){n.props.changeDetail(e)},n}return Object(bn.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.details,r=t.control,i=this.computeStance(),a=Gn()("transition-details","transition-details--".concat(i));return o.a.createElement("div",{className:a,style:{position:"absolute",left:r.x,top:r.y}},this.props.isEditable&&!this.isTopStance(i)&&this.renderAddDetailButton(),n.map(function(t){return o.a.createElement(qn,{key:t.id,detail:t,isFocused:e.props.focusedDetail===t.id,isEditable:e.props.isEditable,isActive:!e.props.isEditable&&e.props.activeDetail===t.id,onChange:e.handleDetailChange,onDelete:e.handleDetailDelete(t.id,t.arrow),onFocus:e.handleDetailFocus(t.id),onBlur:e.handleDetailBlur(t.id)})}),this.props.isEditable&&this.isTopStance(i)&&this.renderAddDetailButton())}},{key:"handleDetailDelete",value:function(e,t){var n=this;return function(){return n.props.deleteDetail(e,t)}}},{key:"handleDetailFocus",value:function(e){var t=this;return function(){return t.props.focusDetail(e)}}},{key:"handleDetailBlur",value:function(e){var t=this;return function(){return t.props.blurDetail(e)}}},{key:"handleAddDetailButton",value:function(e){var t=this;return function(){return t.props.addDetail(e)}}},{key:"computeStance",value:function(){return this.props.isSelfLoop?this.computeSelfLoopStance():this.computeStandardStance()}},{key:"computeSelfLoopStance",value:function(){var e=this.props,t=e.start,n=e.control.minus(t).angle();return this.computeClassNameFromAngle(n)}},{key:"computeStandardStance",value:function(){var e=this.props,t=e.start,n=e.end,r=e.control.minus(t),o=r.project(n.minus(t)),i=r.minus(o).angle();return this.computeClassNameFromAngle(i)}},{key:"computeClassNameFromAngle",value:function(e){return 0<e&&e<=Math.PI/2?"top-left":Math.PI/2<e&&e<=Math.PI?"top-right":-Math.PI/2>e&&e>=-Math.PI?"bottom-right":"bottom-left"}},{key:"isTopStance",value:function(e){return/^top/.test(e)}},{key:"renderAddDetailButton",value:function(){return o.a.createElement("button",{className:"transition-details__add-button",onClick:this.handleAddDetailButton(this.props.arrowId)},"add new")}}]),t}(o.a.Component)),Xn=Object(c.b)(function(e,t){var n=xe(e,t.arrowId),r=he(e,n.start),o=he(e,n.end),i=Ke(e,n.id);return{start:r.pos,end:o.pos,control:i.pos,isSelfLoop:r.id===o.id,focusedDetail:ut(e),isEditable:W(e),activeDetail:tn(e)}},function(e){return{changeDetail:function(t){return e(function(e){return{type:"CHANGE_TRANSITION_DETAIL",payload:{detail:e}}}(t))},deleteDetail:function(t,n){return e(function(e,t){return{type:"DELETE_TRANSITION_DETAIL",payload:{id:e,arrow:t}}}(t,n))},addDetail:function(t){return e(d(t))},focusDetail:function(t){return e(function(e){return{type:"FOCUS_TRANSIITON_DETAIL",payload:{id:e}}}(t))},blurDetail:function(t){return e(function(e){return{type:"BLUR_TRANSITION_DETAIL",payload:{id:e}}}(t))}}})(Jn),Zn=(n(55),function(e){function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(yn.a)(this,(e=Object(mn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseUp=function(e){n.props.add(n.props.pos)},n}return Object(bn.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.pos;return t&&o.a.createElement("div",{className:"shadow-node",onMouseUp:this.handleMouseUp,style:{position:"absolute",left:n.x-21,top:n.y-21-2}})}}]),t}(o.a.Component)),$n=Object(c.b)(function(e){return{isVisible:$(e),pos:q(e)}},function(e){return{add:function(t){return e(function(e){return{type:"ADD_NODE",payload:{pos:e}}}(t))}}})(Zn),er=(n(56),function(e){function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(yn.a)(this,(e=Object(mn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown(n.computeMousePos(e))},n.handleMouseUp=function(){n.props.mouseUp()},n.handleMouseMove=function(e){e.preventDefault(),n.props.mouseMove(n.computeMousePos(e))},n}return Object(bn.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props,t=e.arrows,n=e.nodes,r=e.controlPoints,i=e.transitionDetails;return o.a.createElement("div",{className:"canvas",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseMove:this.handleMouseMove},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},t.map(function(e){return o.a.createElement(Bn,{key:e.id,details:e})}),r.map(function(e){return o.a.createElement(Yn,{key:e.id,details:e})})),n.map(function(e){return o.a.createElement(Kn,{key:e.id,details:e})}),Object.keys(i).map(function(e){return o.a.createElement(Xn,{key:e,arrowId:e,details:i[e]})}),o.a.createElement($n,null))}},{key:"computeMousePos",value:function(e){var t=e.currentTarget.getBoundingClientRect(),n=t.left,r=t.top,o=e.clientX,i=e.clientY;return new F(o-n,i-r)}}]),t}(o.a.Component)),tr=Object(c.b)(function(e){return{arrows:Le(e),nodes:be(e),controlPoints:We(e),transitionDetails:at(e)}},function(e){return{mouseDown:function(t){return e(function(e){return{type:"MOUSE_DOWN_CANVAS",payload:{pos:e}}}(t))},mouseUp:function(){return e({type:"MOUSE_UP_CANVAS"})},mouseMove:function(t){return e(function(e){return{type:"MOUSE_MOVE_CANVAS",payload:{pos:e}}}(t))}}})(er),nr=function(e){switch(De(e).length){case 0:return[rr.ADD_STATE];case 1:return[rr.ADD_STATE,rr.REMOVE_STATE,rr.ADD_SELF_TRANSITION,rr.MAKE_START,rr.TOGGLE_ACCEPTING];case 2:return[rr.ADD_STATE,rr.REMOVE_STATES,rr.ADD_TRANSITION,rr.TOGGLE_ACCEPTING];default:return[rr.ADD_STATE,rr.REMOVE_STATES,rr.TOGGLE_ACCEPTING]}},rr={ADD_STATE:"ADD_STATE",REMOVE_STATE:"REMOVE_STATE",REMOVE_STATES:"REMOVE_STATES",ADD_SELF_TRANSITION:"ADD_SELF_TRANSITION",ADD_TRANSITION:"ADD_TRANSITION",MAKE_START:"MAKE_START",UNMAKE_START:"UNMAKE_START",TOGGLE_ACCEPTING:"TOGGLE_ACCEPTING"},or=(n(57),function(e){function t(){var e,n,r;Object(x.a)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(r=Object(yn.a)(this,(e=Object(mn.a)(t)).call.apply(e,[this].concat(i)))).actions=(n={},Object(p.a)(n,rr.ADD_STATE,function(){return r.props.addState()}),Object(p.a)(n,rr.REMOVE_STATE,function(){return r.props.removeStates()}),Object(p.a)(n,rr.REMOVE_STATES,function(){return r.props.removeStates()}),Object(p.a)(n,rr.ADD_SELF_TRANSITION,function(){return r.props.addTransition()}),Object(p.a)(n,rr.ADD_TRANSITION,function(){return r.props.addTransition()}),Object(p.a)(n,rr.MAKE_START,function(){return r.props.makeStart()}),Object(p.a)(n,rr.TOGGLE_ACCEPTING,function(){return r.props.toggleFinal()}),n),r}return Object(bn.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"edit-controls"},this.props.inEditMode&&this.props.buttonTypes.map(function(t){return o.a.createElement("button",{className:"edit-controls__button edit-controls__button-".concat(t),key:t,onClick:e.actions[t]})}))}}]),t}(o.a.Component)),ir=Object(c.b)(function(e){return{inEditMode:W(e),buttonTypes:nr(e)}},function(e){return{addState:function(){return e({type:"START_ADDING_NODE"})},removeStates:function(){return e({type:"DELETE_SELECTED_NODES"})},addTransition:function(){return e({type:"ADD_TRANSITION_BETWEEN_SELECTED"})},makeStart:function(){return e({type:"MAKE_SELECTED_START_NODE"})},toggleFinal:function(){return e({type:"TOGGLE_SELECTED_FINAL_NODES"})}}})(or),ar=(n(58),function(e){function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(yn.a)(this,(e=Object(mn.a)(t)).call.apply(e,[this].concat(i)))).tapeRef=o.a.createRef(),n}return Object(bn.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this,t=this.props.isEditable,n=Gn()("tape__cell",{"tape__cell--editable":t});return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"tape-reader".concat(t?"":" tape-reader--active"),style:{position:"absolute",left:"calc(50% - ".concat(18,"px)")}}),o.a.createElement("div",{className:"tape",ref:this.tapeRef,style:{width:"".concat(576,"px")}},o.a.createElement("div",{className:"tape__cells"},o.a.createElement("div",{className:"tape__padding-left",style:{width:"".concat(18,"px")}}),this.props.entries.map(function(t,r){return o.a.createElement("input",{key:r,disabled:!e.props.isEditable,className:n,onFocus:e.handleCellFocus(r),value:t,onChange:e.handleCellChange(r),style:{width:"".concat(36,"px")},type:"text",maxLength:1})}),o.a.createElement("div",{className:"tape__padding-right",style:{width:"".concat(18,"px")}}))),o.a.createElement("div",{className:"tape-feed tape-feed__left",style:{position:"absolute",left:"calc(50% - ".concat(292,"px)")}}),o.a.createElement("div",{className:"tape-feed tape-feed__right",style:{position:"absolute",left:"calc(50% + ".concat(284,"px)")}}))}},{key:"componentDidMount",value:function(){this.recenter(!1)}},{key:"componentDidUpdate",value:function(e){this.props.center!==e.center&&this.recenter()}},{key:"handleCellFocus",value:function(e){var t=this;return function(){return t.props.setCenter(e)}}},{key:"handleCellChange",value:function(e){var t=this;return function(n){t.props.changeCell(e,n.target.value)}}},{key:"recenter",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=36*(this.props.center+1-8);this.tapeRef.current&&this.tapeRef.current.scrollTo({left:t,top:0,behavior:e?"smooth":void 0})}}]),t}(o.a.Component)),cr=Object(c.b)(function(e){return{entries:Dt(e),center:_t(e),isEditable:W(e)}},function(e){return{setCenter:function(t){return e(function(e){return{type:"SET_TAPE_CENTER",payload:{pos:e}}}(t))},changeCell:function(t,n){return e(function(e,t){return{type:"CHANGE_TAPE_CELL",payload:{pos:e,value:t}}}(t,n))}}})(ar),sr=(n(59),function(e){function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(yn.a)(this,(e=Object(mn.a)(t)).call.apply(e,[this].concat(o)))).reset=function(){n.props.reset()},n.togglePlayPause=function(){n.props.isInEditMode?n.props.play():n.props.pause()},n.step=function(){n.props.step()},n}return Object(bn.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props.isInEditMode;return o.a.createElement("div",{className:"sim-controls"},o.a.createElement("button",{onClick:this.reset},"Reset"),o.a.createElement("button",{onClick:this.togglePlayPause},e?"Play":"Pause"),o.a.createElement("button",{disabled:!e,onClick:this.step},"Step"))}}]),t}(o.a.Component)),ur=Object(c.b)(function(e){return{isInEditMode:W(e)}},function(e){return{reset:function(){return e({type:v})},pause:function(){return e({type:E})},step:function(){return e({type:b})},play:function(){return e({type:h})}}})(sr),lr=(n(60),function(e){function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(yn.a)(this,(e=Object(mn.a)(t)).call.apply(e,[this].concat(o)))).handleMessageClick=function(e){e.stopPropagation()},n.dismiss=function(){n.props.dismiss()},n}return Object(bn.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return this.props.show&&o.a.createElement("div",{className:"message__container",onClick:this.dismiss},o.a.createElement("div",{className:"message",onClick:this.handleMessageClick},o.a.createElement("h1",{className:"message__title"},this.props.title),o.a.createElement("div",{className:"message__content"},this.props.content),o.a.createElement("button",{className:"message__dismiss-button",onClick:this.dismiss},"Dismiss")))}}]),t}(o.a.Component)),pr=Object(c.b)(function(e){return{show:Wt(e),title:Kt(e),content:Ht(e)}},function(e){return{dismiss:function(){return e({type:"DISMISS_MESSAGE"})}}})(lr),dr=(n(61),function(e){function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(yn.a)(this,(e=Object(mn.a)(t)).call.apply(e,[this].concat(o)))).handleKeyDown=function(e){n.props.keyDown(e.key,e)},n.handleKeyUp=function(e){n.props.keyUp(e.key)},n}return Object(bn.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement(tr,null),o.a.createElement(cr,null),o.a.createElement(ir,null),o.a.createElement(ur,null),o.a.createElement(pr,null))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}}]),t}(o.a.Component)),fr=Object(c.b)(null,function(e){return{keyDown:function(t,n){return e(function(e,t){return{type:"KEY_DOWN",payload:{key:e,event:t}}}(t,n))},keyUp:function(t){return e(function(e){return{type:"KEY_UP",payload:{key:e}}}(t))}}})(dr);n(62);a.a.render(o.a.createElement(c.a,{store:Un},o.a.createElement(fr,null)),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.14c57208.chunk.js.map