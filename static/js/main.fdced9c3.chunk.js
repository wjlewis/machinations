(window.webpackJsonpmachinations=window.webpackJsonpmachinations||[]).push([[0],{35:function(e,t,n){e.exports=n(64)},47:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(22),a=n.n(i),s=n(12),c=n(19),u=n(34),l=n(33),p=n(3),d=function(e){return{type:"ADD_TRANSITION_DETAIL",payload:{arrow:e}}},f=function(e){return{type:"MOVE_TAPE",payload:{direction:e}}},O=function(e){return{type:"WRITE_TAPE_SYMBOL",payload:{symbol:e}}},m=function(e,t,n,r){return{type:"DELETE_ENTITIES",payload:{nodes:e,arrows:t,controlPoints:n,transitionDetails:r}}},y=function(e,t){return{type:"DISPLAY_MESSAGE",payload:{title:e,content:t}}},h="STEP_SIM",E="PLAY_SIM",b="PAUSE_SIM",_="RESET_SIM",v=function(e){return{type:"SET_CURRENT_STATE",payload:{id:e}}},D=function(e){return{type:"SET_ACTIVE_NODE",payload:{id:e}}},w=function(e){return{type:"SET_ACTIVE_TRANSITION_DETAIL",payload:{id:e}}},T=function(e){return{type:"SET_ACTIVE_CONTROL_POINT",payload:{id:e}}},g=function(e){return{type:"SET_ACTIVE_ARROW",payload:{id:e}}},N="HALT_ACCEPT",j=function(){return{type:N}},S="HALT_REJECT",A=function(){return{type:S}},I=function(e){return{type:"SWITCH_MODE",payload:{mode:e}}},P=n(4),C=n.n(P),M=n(20),R=n.n(M),k=function(e){return e.wip||e.committed},L=n(15),x=function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},U=n(6),G=n(7),F=function(){function e(t,n){Object(U.a)(this,e),this.x=t,this.y=n}return Object(G.a)(e,[{key:"magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalize",value:function(){var t=this.magnitude();if(0===t)throw new Error("Cannot normalize 0 vector");return new e(this.x/t,this.y/t)}},{key:"perp",value:function(){return new e(-this.y,this.x)}},{key:"plus",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"minus",value:function(e){return this.plus(e.scale(-1))}},{key:"scale",value:function(t){return new e(t*this.x,t*this.y)}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"project",value:function(e){return e.scale(this.dot(e)/e.dot(e))}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}}]),e}();function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var B={EDIT:"EDIT",SIM:"SIM"},V={mode:B.EDIT},K=function(e){return e.mode.mode===B.EDIT},Y=function(e,t){switch(t.type){case"SWITCH_MODE":return H(e,t.payload.mode);default:return e.mode}},H=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.mode,{mode:t})};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Q={mousePos:new F(0,0),keysDown:[],isMouseDownNode:!1,isMouseDownControlPoint:!1,isAddingNode:!1,wasMouseReleasedOverNode:!1,wasMouseDragged:!1,wasMnemonicChanged:!1},q=function(e){return e.ui.mousePos},X=function(e){return e.ui.keysDown.includes("Shift")},Z=function(e){return e.ui.isMouseDownNode},$=function(e){return e.ui.isMouseDownControlPoint},ee=function(e){return e.ui.isAddingNode},te=function(e){return e.ui.wasMouseDragged},ne=function(e,t){if(!K(e))return e.ui;switch(t.type){case"KEY_DOWN":return re(e,t.payload.key);case"KEY_UP":return oe(e,t.payload.key);case"MOUSE_DOWN_NODE":return ie(e);case"MOUSE_UP_NODE":return ae(e);case"MOUSE_DOWN_CONTROL_POINT":return se(e);case"MOUSE_UP_CONTROL_POINT":return ce(e);case"MOUSE_DOWN_CANVAS":return ue(e);case"MOUSE_UP_CANVAS":return le(e);case"START_ADDING_NODE":return pe(e);case"ADD_NODE":return de(e);case"MOUSE_MOVE_CANVAS":return fe(e,t.payload.pos);case"CHANGE_MNEMONIC":return Oe(e);case"BLUR_MNEMONIC":return me(e);default:return e.ui}},re=function(e,t){return J({},e.ui,{keysDown:C.a.uniq([].concat(Object(L.a)(e.ui.keysDown),[t]))})},oe=function(e,t){return J({},e.ui,{keysDown:e.ui.keysDown.filter(function(e){return e!==t})})},ie=function(e){return J({},e.ui,{isMouseDownNode:!0})},ae=function(e){return J({},e.ui,{isMouseDownNode:!1,wasMouseReleasedOverNode:!0})},se=function(e){return J({},e.ui,{isMouseDownControlPoint:!0})},ce=function(e){return J({},e.ui,{isMouseDownControlPoint:!1})},ue=function(e){return J({},e.ui,{wasMouseDragged:!1})},le=function(e){return J({},e.ui,{isMouseDownNode:!1,isMouseDownControlPoint:!1,wasMouseReleasedOverNode:!1})},pe=function(e){return J({},e.ui,{isAddingNode:!0})},de=function(e){return J({},e.ui,{isAddingNode:!1,wasMouseReleasedOverNode:!0})},fe=function(e,t){return J({},e.ui,{mousePos:t,wasMouseDragged:!0})},Oe=function(e){return J({},e.ui,{wasMnemonicChanged:!0})},me=function(e){return J({},e.ui,{wasMnemonicChanged:!1})};function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ee=function(e){return Object.values(k(e.entities.nodes).byId)},be=function(e,t){var n=Ee(e).find(function(e){return e.id===t});if(!n)throw new Error('No Node with ID "'.concat(t,'"'));return n},_e=function(e,t){return k(e.entities.nodes).selected.includes(t)},ve=function(e,t){return k(e.entities.nodes).byId[t].isFinal},De=function(e){return k(e.entities.nodes).selected},we=function(e,t){var n=k(e.entities.nodes).startNode;return null!==n&&n===t},Te=function(e,t){if(!K(e))return e.entities.nodes;switch(t.type){case"ADD_NODE":return ge(e,t.payload.pos);case"ADD_ARROW":return Ne(e,t.payload.start,t.payload.end);case"DELETE_ENTITIES":return je(e,t.payload.nodes);case"MAKE_SELECTED_START_NODE":return Se(e);case"TOGGLE_SELECTED_FINAL_NODES":return Ae(e);case"CHANGE_MNEMONIC":return Ie(e,t.payload.id,t.payload.value);case"BLUR_MNEMONIC":return Pe(e);case"MOUSE_DOWN_NODE":return Ce(e,t.payload.id);case"MOUSE_UP_NODE":return Me(e);case"MOUSE_DOWN_CANVAS":return Re(e,t.payload.pos);case"MOUSE_UP_CANVAS":return ke(e);case"MOUSE_MOVE_CANVAS":return Le(e,t.payload.pos);default:return e.entities.nodes}},ge=function(e,t){var n=R()(),r={id:n,pos:t,mnemonic:"",isFinal:!1};return{wip:null,committed:C.a.mergeWith({},e.entities.nodes.committed,{byId:Object(p.a)({},n,r)},function(e,t,r){return"selected"===r?[n]:void 0})}},Ne=function(e,t,n){return{wip:null,committed:he({},e.entities.nodes.committed,{selected:t!==n?[]:e.entities.nodes.committed.selected})}},je=function(e,t){var n=e.entities.nodes.committed;return{wip:null,committed:he({},n,{byId:C.a.omit(n.byId,t),selected:[],startNode:n.startNode&&t.includes(n.startNode)?null:n.startNode})}},Se=function(e){return{wip:null,committed:C.a.merge({},e.entities.nodes.committed,{startNode:e.entities.nodes.committed.selected[0]})}},Ae=function(e){var t=De(e).map(function(t){return be(e,t)}),n=t.some(function(e){return e.isFinal}),r=t.reduce(function(e,t){return he({},e,Object(p.a)({},t.id,he({},t,{isFinal:!n})))},{});return{wip:null,committed:C.a.merge({},e.entities.nodes.committed,{byId:he({},r)})}},Ie=function(e,t,n){return he({},e.entities.nodes,{wip:C.a.merge({},k(e.entities.nodes),{byId:Object(p.a)({},t,{mnemonic:n})})})},Pe=function(e){return{wip:null,committed:k(e.entities.nodes)}},Ce=function(e,t){var n,r,o=e.entities.nodes,i=o.committed.selected;return{wip:null,committed:he({},o.committed,{selected:X(e)?(n=t,r=i,r.includes(n)?r.filter(function(e){return e!==n}):[].concat(Object(L.a)(r),[n])):i.includes(t)?i:[t]})}},Me=function(e){return{wip:null,committed:he({},k(e.entities.nodes),{offsets:{}})}},Re=function(e,t){if(!Z(e))return e.entities.nodes;var n=e.entities.nodes,r=n.committed.selected.reduce(function(e,r){var o=n.committed.byId[r];return he({},e,Object(p.a)({},r,o.pos.minus(t)))},{});return he({},n,{wip:he({},n.committed,{offsets:r})})},ke=function(e){return function(e){return e.ui.wasMouseReleasedOverNode}(e)?e.entities.nodes:{wip:null,committed:he({},e.entities.nodes.committed,{selected:[]})}},Le=function(e,t){var n=e.entities.nodes;if(!Z(e)||!n.wip)return n;var r=Object.keys(n.wip.offsets).reduce(function(e,r){var o=n.wip.byId[r],i=t.plus(n.wip.offsets[r]);return he({},e,Object(p.a)({},r,he({},o,{pos:i})))},{});return C.a.merge({},n,{wip:{byId:he({},r)}})};function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Ue=function(e){return Object.values(e.entities.arrows.byId)},Ge=function(e,t){var n=e.entities.arrows.byId[t];if(!n)throw new Error('No Arrow with ID "'.concat(t,'"'));return n},Fe=function(e,t){if(!K(e))return e.entities.arrows;switch(t.type){case"ADD_ARROW":return We(e,t.payload.start,t.payload.end,t.payload.id);case"DELETE_ENTITIES":return Be(e,t.payload.arrows);default:return e.entities.arrows}},We=function(e,t,n,r){return C.a.merge({},e.entities.arrows,{byId:Object(p.a)({},r,{start:t,end:n,id:r})})},Be=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.entities.arrows,{byId:C.a.omit(e.entities.arrows.byId,t)})};function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ye=function(e){return Object.values(k(e.entities.controlPoints).byId)},He=function(e,t){var n=Ye(e).find(function(e){return e.arrow===t});if(!n)throw new Error('No ControlPoint associated with Arrow having ID "'.concat(t,'"'));return n},ze=function(e,t){if(!K(e))return e.entities.controlPoints;switch(t.type){case"ADD_ARROW":return Je(e,t.payload.start,t.payload.end,t.payload.id);case"DELETE_ENTITIES":return Qe(e,t.payload.controlPoints);case"MOUSE_DOWN_CONTROL_POINT":return qe(e,t.payload.id);case"MOUSE_UP_CONTROL_POINT":return Xe(e);case"MOUSE_DOWN_CANVAS":return Ze(e,t.payload.pos);case"MOUSE_MOVE_CANVAS":return tt(e,t.payload.pos);case"MOUSE_UP_CANVAS":case"MOUSE_UP_NODE":return ot(e);default:return e.entities.controlPoints}},Je=function(e,t,n,r){var o=R()(),i=be(e,t).pos,a=t===n?i:be(e,n).pos,s=t===n?i.minus(new F(0,90)):function(e,t){var n=t.minus(e),r=0!==n.magnitude()?n.perp().normalize().scale(1):new F(0,-1);return n.scale(.5).plus(r).plus(e)}(i,a);return{wip:null,committed:C.a.merge({},e.entities.controlPoints.committed,{byId:Object(p.a)({},o,{id:o,arrow:r,pos:s})})}},Qe=function(e,t){return{wip:null,committed:Ke({},e.entities.controlPoints.committed,{byId:C.a.omit(e.entities.controlPoints.committed.byId,t)})}},qe=function(e,t){return Ke({},e.entities.controlPoints,{wip:null,committed:Ke({},e.entities.controlPoints.committed,{selected:t})})},Xe=function(e){return{wip:null,committed:Ke({},k(e.entities.controlPoints),{selected:null,selectedOffset:null})}},Ze=function(e,t){return $(e)?$e(e,t):Z(e)?et(e,t):e.entities.controlPoints},$e=function(e,t){var n=e.entities.controlPoints.committed;if(!n.selected)return e.entities.controlPoints;var r=n.byId[n.selected].pos.minus(t);return Ke({},e.entities.controlPoints,{wip:C.a.merge({},n,{selectedOffset:r})})},et=function(e,t){var n=e.entities.controlPoints.committed,r=De(e),o=Object.values(n.byId).filter(function(t){var n=Ge(e,t.arrow);return r.includes(n.start)&&r.includes(n.end)}).reduce(function(e,n){return Ke({},e,Object(p.a)({},n.id,new F(n.pos.x-t.x,n.pos.y-t.y)))},{}),i=Object.values(n.byId).reduce(function(n,o){var i,a,s=Ge(e,o.arrow),c=r.includes(s.start),u=r.includes(s.end);if(a=u,!(i=c)&&!a||i&&a)return n;var l=be(e,u?s.start:s.end).pos,d=be(e,c?s.start:s.end).pos,f=d.minus(t),O=l.minus(d),m=o.pos.minus(d),y=m.project(O),h=y.magnitude()/O.magnitude(),E=m.minus(y),b=(E.dot(y.perp())>0?1:-1)*E.magnitude();return Ke({},n,Object(p.a)({},o.id,{fixedPos:l,movingOffset:f,fractionAlong:h,perpLength:b}))},{});return Ke({},e.entities.controlPoints,{wip:Ke({},n,{fullOffsets:o,halfOffsets:i})})},tt=function(e,t){return $(e)?nt(e,t):Z(e)?rt(e,t):e.entities.controlPoints},nt=function(e,t){var n=e.entities.controlPoints;if(!n.wip||!n.wip.selected||!n.wip.selectedOffset)return n;var r=n.wip.byId[n.wip.selected],o=t.plus(n.wip.selectedOffset);return Ke({},n,{wip:C.a.merge({},n.wip,{byId:Object(p.a)({},r.id,Ke({},r,{pos:o}))})})},rt=function(e,t){var n=e.entities.controlPoints;if(!n.wip)return n;var r=Object.keys(n.wip.fullOffsets).reduce(function(e,r){var o=n.wip.byId[r],i=t.plus(n.wip.fullOffsets[r]);return Ke({},e,Object(p.a)({},r,Ke({},o,{pos:i})))},{}),o=Object.keys(n.wip.halfOffsets).reduce(function(e,r){var o=n.wip.byId[r],i=n.wip.halfOffsets[r],a=i.fixedPos,s=i.movingOffset,c=i.fractionAlong,u=i.perpLength,l=t.plus(s),d=a.minus(l),f=d.scale(c).plus(l),O=0!==d.magnitude()?d.perp().normalize().scale(u).plus(f):new F(0,-80).plus(f);return Ke({},e,Object(p.a)({},r,Ke({},o,{pos:O})))},{});return Ke({},n,{wip:C.a.merge({},n.wip,{byId:Ke({},r,{},o)})})},ot=function(e){return Ke({},e.entities.controlPoints,{wip:null,committed:Ke({},k(e.entities.controlPoints),{selected:null,selectedOffset:null,fullOffsets:{},halfOffsets:{}})})};function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var st={entries:x("",20),scrollLeft:0,active:0,focused:null},ct={L:"L",R:"R"},ut=function(e){return e.entities.tape.entries},lt=function(e){return e.entities.tape.focused},pt=function(e){var t=e.entities.tape;return t.entries[t.active]},dt=function(e,t){switch(t.type){case"CHANGE_TAPE_CELL":return ft(e,t.payload.pos,t.payload.value);case"UPDATE_SCROLL_LEFT":return yt(e,t.payload.scrollLeft);case"FOCUS_TAPE_CELL":return Ot(e,t.payload.pos);case"CLEAR_TAPE":return mt(e);case"MOVE_TAPE":return Et(e,t.payload.direction);case"WRITE_TAPE_SYMBOL":return bt(e,t.payload.symbol);default:return e.entities.tape}},ft=function(e,t,n){return at({},e.entities.tape,{entries:C.a.update(C.a.clone(e.entities.tape.entries),t,function(e){return n}),focused:n.length>0&&null!==e.entities.tape.focused?e.entities.tape.focused+1:e.entities.tape.focused})},Ot=function(e,t){return at({},e.entities.tape,{focused:t})},mt=function(e){return st},yt=function(e,t){return at({},e.entities.tape,{entries:ht(e.entities.tape.entries,t),scrollLeft:t})},ht=function(e,t){var n=e.length-Math.floor(t/36);return n<20?[].concat(Object(L.a)(e),Object(L.a)(x("",20))):n>40&&e.slice(-20).every(function(e){return 0===e.length})?e.slice(0,-20):e},Et=function(e,t){return at({},e.entities.tape,{active:e.entities.tape.active+("L"===t?1:-1)})},bt=function(e,t){var n=e.entities.tape;return at({},n,{entries:C.a.set(C.a.clone(n.entries),n.active,t)})};function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Dt=function(e){return Object.values(e.entities.transitionDetails.byId)},wt=function(e){return C.a.groupBy(Dt(e),function(e){return e.arrow})},Tt=function(e,t){return wt(e)[t]},gt=function(e){var t=Object.values(function(e){return C.a.groupBy(Dt(e),function(t){return Ge(e,t.arrow).start})}(e)).map(function(e){return Object.values(C.a.groupBy(e,function(e){return e.read}))}).map(function(e){return e.filter(function(e){return e.length>1})});return C.a.flattenDeep(t).map(function(e){return e.id})},Nt=function(e){return e.entities.transitionDetails.focused},jt=function(e,t){if(!K(e))return e.entities.transitionDetails;switch(t.type){case"ADD_TRANSITION_DETAIL":return St(e,t.payload.arrow);case"ADD_ARROW":return At(e,t.payload.id);case"CHANGE_TRANSITION_DETAIL":return It(e,t.payload.detail);case"DELETE_TRANSITION_DETAIL":return Pt(e,t.payload.id);case"DELETE_ENTITIES":return Ct(e,t.payload.transitionDetails);case"FOCUS_TRANSIITON_DETAIL":return Mt(e,t.payload.id);case"BLUR_TRANSITION_DETAIL":return Rt(e);case"MARK_DUPLICATE_TRANSITIONS":return kt(e,t.payload.ids);default:return e.entities.transitionDetails}},St=function(e,t){var n=R()(),r={id:n,arrow:t,read:"",write:"",move:ct.L,isFocused:!1};return C.a.merge({},e.entities.transitionDetails,{byId:Object(p.a)({},n,r),focused:n})},At=function(e,t){return St(e,t)},It=function(e,t){return C.a.merge({},e.entities.transitionDetails,{byId:Object(p.a)({},t.id,t)})},Pt=function(e,t){var n=e.entities.transitionDetails;return vt({},n,{byId:C.a.omit(n.byId,t)})},Ct=function(e,t){return vt({},e.entities.transitionDetails,{byId:C.a.omit(e.entities.transitionDetails.byId,t)})},Mt=function(e,t){return vt({},e.entities.transitionDetails,{focused:t})},Rt=function(e){return vt({},e.entities.transitionDetails,{focused:null})},kt=function(e,t){return vt({},e.entities.transitionDetails,{byId:C.a.mapValues(e.entities.transitionDetails.byId,function(e){return vt({},e,{isDuplicate:t.includes(e.id)})})})},Lt=n(29);function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Gt=function(e,t){if(!K(e))return e.undoRedo;switch(t.type){case"MOUSE_UP_NODE":return Ft(e);case"MOUSE_UP_CONTROL_POINT":return Wt(e);case"ADD_NODE":return Yt(e,"add node");case"BLUR_MNEMONIC":return Bt(e);case"MAKE_SELECTED_START_NODE":return Yt(e,"change initial state");case"TOGGLE_SELECTED_FINAL_NODES":return Yt(e,'toggle "final" status for selected states');case"ADD_ARROW":case"ADD_TRANSITION_DETAIL":return Yt(e,"add new transition");case"DELETE_ENTITIES":return Yt(e,"delete entities");case"CHANGE_TRANSITION_DETAIL":return Yt(e,"change transition");case"CHANGE_TAPE_CELL":return Yt(e,"change tape cell");case"CLEAR_TAPE":return Yt(e,"clear tape");default:return e.undoRedo}},Ft=function(e){return te(e)?Yt(e,"move node"):e.undoRedo},Wt=function(e){return te(e)?Yt(e,"move control point"):e.undoRedo},Bt=function(e){return function(e){return e.ui.wasMnemonicChanged}(e)?Yt(e,"change mnemonic"):e.undoRedo},Vt=function(e){if(0===e.undoRedo.actions.length)return e;var t=Object(Lt.a)(e.undoRedo.actions),n=t[0],r=t.slice(1),o=Ut({},n,{value:Ht(e)});return Ut({},zt(e,n.value),{undoRedo:Ut({},e.undoRedo,{actions:r,redoable:[o].concat(Object(L.a)(e.undoRedo.redoable))})})},Kt=function(e){if(0===e.undoRedo.redoable.length)return e;var t=Object(Lt.a)(e.undoRedo.redoable),n=t[0],r=t.slice(1),o=Ut({},n,{value:Ht(e)});return Ut({},zt(e,n.value),{undoRedo:Ut({},e.undoRedo,{actions:[o].concat(Object(L.a)(e.undoRedo.actions)),redoable:r})})},Yt=function(e,t){return{actions:[{description:t,value:Ht(e)}].concat(Object(L.a)(e.undoRedo.actions.slice(0,32))),redoable:[]}},Ht=function(e){return C.a.get(e,"entities")},zt=function(e,t){return Ut({},e,{entities:C.a.mapValues(t,function(e){return C.a.mapValues(e,function(e,t){return"wip"===t?null:e})})})};function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var qt=function(e){return e.message.show},Xt=function(e){return e.message.title},Zt=function(e){return e.message.content},$t=function(e,t){switch(t.type){case"DISPLAY_MESSAGE":return en(e,t.payload.title,t.payload.content);case"DISMISS_MESSAGE":return tn(e);default:return e.message}},en=function(e,t,n){return Qt({},e.message,{show:!0,title:t,content:void 0!==n?n:null})},tn=function(e){return Qt({},e.message,{show:!1,title:null,content:null})};function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var on=function(e){return e.sim.currentState||function(e){var t=k(e.entities.nodes).startNode;if(null===t)throw new Error("No start node has been distinguished.");return t}(e)},an=function(e,t){return e.sim.activeNode===t},sn=function(e,t){return e.sim.activeArrow===t},cn=function(e,t){return e.sim.activeControlPoint===t},un=function(e){return e.sim.activeTransitionDetail},ln=function(e,t){switch(t.type){case"SET_CURRENT_STATE":return pn(e,t.payload.id);case"SET_ACTIVE_NODE":return dn(e,t.payload.id);case"SET_ACTIVE_TRANSITION_DETAIL":return fn(e,t.payload.id);case"SET_ACTIVE_ARROW":return On(e,t.payload.id);case"SET_ACTIVE_CONTROL_POINT":return mn(e,t.payload.id);case _:return yn(e);default:return e.sim}},pn=function(e,t){return rn({},e.sim,{currentState:t})},dn=function(e,t){return rn({},e.sim,{activeNode:t})},fn=function(e,t){return rn({},e.sim,{activeTransitionDetail:t})},On=function(e,t){return rn({},e.sim,{activeArrow:t})},mn=function(e,t){return rn({},e.sim,{activeControlPoint:t})},yn=function(e){return rn({},e.sim,{currentState:null,activeNode:null,activeArrow:null,activeTransitionDetail:null,activeControlPoint:null})},hn={entities:{nodes:{wip:null,committed:{byId:{},selected:[],offsets:{},startNode:null}},arrows:{byId:{}},controlPoints:{wip:null,committed:{byId:{},selected:null,selectedOffset:null,fullOffsets:{},halfOffsets:{}}},transitionDetails:{byId:{},focused:null},tape:st},ui:Q,undoRedo:{actions:[],redoable:[]},message:{show:!1,title:null,content:null},mode:V,sim:{currentState:null,activeNode:null,activeArrow:null,activeTransitionDetail:null,activeControlPoint:null}};function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UNDO":return Vt(e);case"REDO":return Kt(e);default:return bn({},e,{entities:bn({},e.entities,{nodes:Te(e,t),arrows:Fe(e,t),controlPoints:ze(e,t),transitionDetails:jt(e,t),tape:dt(e,t)}),ui:ne(e,t),undoRedo:Gt(e,t),message:$t(e,t),mode:Y(e,t),sim:ln(e,t)})}},vn={Backspace:function(e){return De(e).length>0?{type:"DELETE_SELECTED_NODES"}:null},n:function(e,t){return t.ctrlKey?(t.preventDefault(),{type:"START_ADDING_NODE"}):null},t:function(e,t){return De(e).length>0&&t.ctrlKey?(t.preventDefault(),{type:"ADD_TRANSITION_BETWEEN_SELECTED"}):null},z:function(e,t){return t.ctrlKey||t.metaKey?{type:"UNDO"}:null},y:function(e,t){return t.ctrlKey||t.metaKey?(t.preventDefault(),{type:"REDO"}):null}},Dn=n(10),wn=n(8),Tn=n(9),gn=(n(47),function(e){function t(){return Object(U.a)(this,t),Object(Dn.a)(this,Object(wn.a)(t).apply(this,arguments))}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"error-report"},o.a.createElement("div",{className:"error-report__section"},o.a.createElement("span",{className:"error-report__title"},"What's wrong:\u2002"),o.a.createElement("span",{className:"error-report__content"},this.props.whatsWrong)),o.a.createElement("div",{className:"error-report__section"},o.a.createElement("span",{className:"error-report__title"},"How to fix it:\u2002"),o.a.createElement("span",{className:"error-report__content"},this.props.howToFix)))}}]),t}(o.a.Component)),Nn=o.a.createElement(gn,{whatsWrong:"In order for the machine to start, a state must be distinguished as the initial or start state. You have not yet identified any state as such.",howToFix:'Select one of your machine states and click the "Make Start State" button to distinguish it as the initial state.'}),jn=o.a.createElement(gn,{whatsWrong:"At the moment, you have 2 or more transitions from the same state with the same read symbol. Such nondeterministic behavior is not supported.",howToFix:"Find all transitions whose read symbols are marked red, and modify or remove the associated transitions so that all transitions for each state have distinct read symbols"}),Sn=(n(48),function(e){function t(){return Object(U.a)(this,t),Object(Dn.a)(this,Object(wn.a)(t).apply(this,arguments))}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.accepted;return o.a.createElement("div",{className:"halt-report"},o.a.createElement("div",{className:"halt-report__title"},"The machine has\xa0",o.a.createElement("span",{className:"halt-report__result halt-report__result--".concat(e?"accepted":"rejected")},e?"accepted":"rejected"),"\xa0the input string."))}}]),t}(o.a.Component)),An=o.a.createElement(Sn,{accepted:!0}),In=o.a.createElement(Sn,{accepted:!1}),Pn=n(18),Cn=n.n(Pn),Mn=n(11),Rn=Cn.a.mark(Un),kn=Cn.a.mark(Gn),Ln=Cn.a.mark(Fn),xn=Cn.a.mark(Bn);function Un(e){var t;return Cn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Mn.c)(Gn,e);case 2:return t=n.sent,n.next=5,Object(Mn.f)([b,_,N,S]);case 5:return n.next=7,Object(Mn.a)(t);case 7:case"end":return n.stop()}},Rn)}function Gn(e){return Cn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Mn.d)(I(B.SIM));case 3:if(!e){t.next=8;break}return t.next=6,Fn();case 6:t.next=13;break;case 8:return t.next=11,Fn();case 11:t.next=8;break;case 13:return t.prev=13,t.next=16,Object(Mn.d)(I(B.EDIT));case 16:return t.finish(13);case 17:case"end":return t.stop()}},kn,null,[[0,,13,17]])}function Fn(){var e,t,n,r,o,i,a,s,c,u,l;return Cn.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Object(Mn.e)(on);case 2:return e=p.sent,p.next=5,Object(Mn.e)(pt);case 5:return t=p.sent,p.next=8,Object(Mn.e)(function(n){return Wn(n,e,t)});case 8:return n=p.sent,r=1e3,p.next=12,Object(Mn.d)(D(e));case 12:return p.next=14,Object(Mn.b)(r/4);case 14:if(null!==n){p.next=25;break}return p.next=17,Object(Mn.e)(function(t){return ve(t,e)});case 17:if(!p.sent){p.next=23;break}return p.next=21,Object(Mn.d)(j());case 21:p.next=25;break;case 23:return p.next=25,Object(Mn.d)(A());case 25:return i=(o=n).endId,a=o.arrowId,s=o.controlPointId,c=o.transitionDetailId,u=o.writeSymbol,l=o.tapeDirection,p.next=28,Object(Mn.d)(g(a));case 28:return p.next=30,Object(Mn.d)(T(s));case 30:return p.next=32,Object(Mn.d)(w(c));case 32:return p.next=34,Object(Mn.d)(O(u));case 34:return p.next=36,Object(Mn.d)(f(l));case 36:return p.next=38,Object(Mn.b)(r/4);case 38:return p.next=40,Object(Mn.d)(D(i));case 40:return p.next=42,Object(Mn.d)(v(i));case 42:return p.next=44,Object(Mn.b)(r/4);case 44:return p.next=46,Object(Mn.d)(g(null));case 46:return p.next=48,Object(Mn.d)(T(null));case 48:return p.next=50,Object(Mn.d)(w(null));case 50:return p.next=52,Object(Mn.b)(r/4);case 52:case"end":return p.stop()}},Ln)}var Wn=function(e,t,n){var r=function(e,t){return Ue(e).filter(function(e){return e.start===t})}(e,t),o=C.a.flatten(r.map(function(t){return Tt(e,t.id)})).find(function(e){return e.read===n});if(!o)return null;var i=r.find(function(e){return e.id===o.arrow});if(!i)throw new Error('Inconsistency in state: transition detail references nonexistent arrow "'.concat(o.arrow,'"'));var a=He(e,i.id);return{endId:i.end,arrowId:i.id,controlPointId:a.id,transitionDetailId:o.id,writeSymbol:o.write,tapeDirection:o.move}};function Bn(){return Cn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Mn.g)(h,Un,!0);case 2:return e.next=4,Object(Mn.g)(E,Un,!1);case 4:case"end":return e.stop()}},xn)}var Vn=Object(u.a)(),Kn=Object(c.createStore)(_n,Object(l.composeWithDevTools)(Object(c.applyMiddleware)(function(e){return function(t){return function(n){if("KEY_DOWN"!==n.type)return t(n);var r=e.getState(),o=n.payload,i=o.key,a=o.event,s=vn[i];if(!s)return t(n);var c=s(r,a);return c?(t(n),t(c)):t(n)}}},function(e){return function(t){return function(n){if("ADD_TRANSITION_BETWEEN_SELECTED"!==n.type)return t(n);var r=e.getState(),o=De(r),i=o[0],a=o[1]||o[0],s=function(e,t,n){return Ue(e).find(function(e){return e.start===t&&e.end===n})||null}(r,i,a);if(s)return t(d(s.id));var c=R()();return t(function(e,t,n){return{type:"ADD_ARROW",payload:{start:e,end:t,id:n}}}(i,a,c))}}},function(e){return function(t){return function(n){if("DELETE_TRANSITION_DETAIL"!==n.type)return t(n);var r=n.payload,o=r.id,i=r.arrow,a=e.getState();if(Tt(a,i).filter(function(e){return e.id!==o}).length>0)return t(n);var s=He(a,i).id;return t(m([],[i],[s],[o]))}}},function(e){return function(t){return function(n){if("DELETE_SELECTED_NODES"!==n.type)return t(n);var r=e.getState(),o=De(r),i=C.a.flatten(o.map(function(e){return function(e,t){return Ue(e).filter(function(e){return e.start===t||e.end===t})}(r,e)})),a=C.a.uniq(C.a.flatten(i.map(function(e){return e.id}))),s=a.map(function(e){return He(r,e)}).map(function(e){return e.id}),c=C.a.flatten(a.map(function(e){return Tt(r,e)})).map(function(e){return e.id});return t(m(o,a,s,c))}}},function(e){return function(t){return function(n){if(!["ADD_TRANSITION_DETAIL","CHANGE_TRANSITION_DETAIL","DELETE_TRANSITION_DETAIL","ADD_ARROW"].includes(n.type))return t(n);t(n);var r=gt(e.getState());return t({type:"MARK_DUPLICATE_TRANSITIONS",payload:{ids:r}})}}},function(e){return function(t){return function(n){if(![h,E].includes(n.type))return t(n);var r=e.getState();return function(e){return null!==k(e.entities.nodes).startNode}(r)?gt(r).length>0?t(y("Nondeterministic transitions",jn)):t(n):t(y("Missing start state",Nn))}}},Vn,function(e){return function(e){return function(t){return[N,S].includes(t.type)?t.type===N?e(y("Machine Halted",An)):t.type===S?e(y("Machine Halted",In)):void 0:e(t)}}})));Vn.run(Bn);var Yn=Kn,Hn=n(13),zn=n.n(Hn),Jn=(n(50),function(e){function t(){return Object(U.a)(this,t),Object(Dn.a)(this,Object(wn.a)(t).apply(this,arguments))}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=zn()("arrow",{"arrow--editable":this.props.isEditable,"arrow--active":this.props.isActive}),t=this.props.isSelfLoop?this.computeCubicPathString():this.computeQuadraticPathString();return o.a.createElement("path",{className:e,d:t})}},{key:"computeQuadraticPathString",value:function(){var e=this.props,t=e.start,n=e.end,r=e.control,o=t.plus(n.minus(t).scale(.5)),i=o.plus(r.minus(o).scale(2));return"M ".concat(t.x," ").concat(t.y," Q ").concat(i.x," ").concat(i.y," ").concat(n.x," ").concat(n.y)}},{key:"computeCubicPathString",value:function(){var e=this.props,t=e.start,n=e.control.minus(t).scale(4/3),r=0!==n.magnitude()?n.perp().normalize().scale(80):new F(80,0),o=t.plus(n).plus(r),i=t.plus(n).minus(r);return"M ".concat(t.x," ").concat(t.y," C ").concat(o.x," ").concat(o.y," ").concat(i.x," ").concat(i.y," ").concat(t.x," ").concat(t.y)}}]),t}(o.a.Component)),Qn=Object(s.b)(function(e,t){var n=be(e,t.details.start),r=be(e,t.details.end),o=He(e,t.details.id);return{start:n.pos,end:r.pos,control:o.pos,isSelfLoop:n.id===r.id,isEditable:K(e),isActive:sn(e,t.details.id)}})(Jn),qn=(n(51),function(e){function t(){var e,n;Object(U.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(Dn.a)(this,(e=Object(wn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown()},n.handleMouseUp=function(e){n.props.mouseUp()},n.handleInputChange=function(e){n.props.changeMnemonic(e.target.value)},n.handleInputBlur=function(){n.props.blurMnemonic()},n}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.details,t=e.pos,n=e.mnemonic,r=zn()("node",{"node--selected":this.props.isSelected,"node--final":this.props.details.isFinal,"node--start":this.props.isStart,"node--editable":this.props.isEditable,"node--active":!this.props.isEditable&&this.props.isActive}),i=zn()("node__mnemonic-input",{"node__mnemonic-input--editable":this.props.isEditable}),a=t.plus(new F(-19,24));return o.a.createElement("div",{className:"node__container"},o.a.createElement("div",{className:r,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,style:{position:"absolute",left:t.x-21,top:t.y-21}}),o.a.createElement("input",{className:i,disabled:!this.props.isEditable,value:n,onChange:this.handleInputChange,onBlur:this.handleInputBlur,type:"text",maxLength:4,style:{position:"absolute",left:a.x,top:a.y}}))}}]),t}(o.a.Component)),Xn=Object(s.b)(function(e,t){return{isSelected:_e(e,t.details.id),isStart:we(e,t.details.id),isEditable:K(e),isActive:an(e,t.details.id)}},function(e,t){return{changeMnemonic:function(n){return e(function(e,t){return{type:"CHANGE_MNEMONIC",payload:{id:e,value:t}}}(t.details.id,n))},blurMnemonic:function(){return e({type:"BLUR_MNEMONIC"})},mouseDown:function(){return e({type:"MOUSE_DOWN_NODE",payload:{id:t.details.id}})},mouseUp:function(){return e({type:"MOUSE_UP_NODE"})}}})(qn),Zn=(n(52),function(e){function t(){var e,n;Object(U.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(Dn.a)(this,(e=Object(wn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown()},n.handleMouseUp=function(e){n.props.mouseUp()},n}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=zn()("control-point",{"control-point--editable":this.props.isEditable,"control-point--active":this.props.isActive}),t=this.props.isSelfLoop?this.computeCubicString():this.computeQuadraticPathString();return o.a.createElement("path",{className:e,d:t,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp})}},{key:"computeQuadraticPathString",value:function(){var e=this.props,t=e.start,n=e.end,r=this.props.details.pos,o=n.minus(t),i=0!==o.magnitude()?o.normalize().scale(18):new F(18,0),a=i.perp().scale(1/3),s=r.minus(i).plus(a),c=r.minus(i).minus(a);return"M ".concat(s.x," ").concat(s.y," L ").concat(r.x," ").concat(r.y," L ").concat(c.x," ").concat(c.y)}},{key:"computeCubicString",value:function(){var e=this.props.start,t=this.props.details.pos,n=t.minus(e),r=0!==n.magnitude()?n.normalize():new F(0,1),o=r.perp().scale(18),i=t.plus(o.scale(.5)),a=i.minus(o).plus(r.scale(6)),s=i.minus(o).minus(r.scale(6));return"M ".concat(a.x," ").concat(a.y," L ").concat(i.x," ").concat(i.y," L ").concat(s.x," ").concat(s.y)}}]),t}(o.a.Component)),$n=Object(s.b)(function(e,t){var n=Ge(e,t.details.arrow),r=be(e,n.start),o=be(e,n.end);return{start:r.pos,end:o.pos,isSelfLoop:r.id===o.id,isEditable:K(e),isActive:cn(e,t.details.id)}},function(e,t){return{mouseDown:function(){return e({type:"MOUSE_DOWN_CONTROL_POINT",payload:{id:t.details.id}})},mouseUp:function(){return e({type:"MOUSE_UP_CONTROL_POINT"})}}})(Zn);n(53);function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nr=function(e){function t(){var e,n;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(Dn.a)(this,(e=Object(wn.a)(t)).call.apply(e,[this].concat(i)))).readRef=o.a.createRef(),n.handleSelectChange=function(e){n.props.onChange&&n.changeDirection(e.target.value)},n.selectLeft=function(){n.changeDirection(ct.L)},n.selectRight=function(){n.changeDirection(ct.R)},n.handleFocus=function(){n.props.onFocus&&n.props.onFocus()},n.handleBlur=function(){n.props.onBlur&&n.props.onBlur()},n.handleDeleteClick=function(){n.props.onDelete&&n.props.onDelete()},n}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.detail,t=e.read,n=e.write,r=e.move,i=zn()("transition-detail",{"transition-detail--active":this.props.isActive}),a=zn()("transition-detail__input",{"transition-detail__input--focus":this.props.isFocused,"transition-detail__input--editable":this.props.isEditable}),s=zn()(a,{"transition-detail__input--error":this.props.detail.isDuplicate}),c=zn()("transition-detail__selector",{"transition-detail__selector--focus":this.props.isFocused,"transition-detail__selector--editable":this.props.isEditable});return o.a.createElement("div",{className:i},o.a.createElement("input",{className:s,ref:this.readRef,disabled:!this.props.isEditable,value:t,placeholder:"\u2205",onChange:this.handleInputChange("read"),onFocus:this.handleFocus,onBlur:this.handleBlur,type:"text",maxLength:1}),o.a.createElement("span",{className:"transition-detail__separator"},"/"),o.a.createElement("input",{className:a,disabled:!this.props.isEditable,value:n,placeholder:"\u2205",onChange:this.handleInputChange("write"),onFocus:this.handleFocus,onBlur:this.handleBlur,type:"text",maxLength:1}),o.a.createElement("select",{className:c,disabled:!this.props.isEditable,value:r,onChange:this.handleSelectChange},o.a.createElement("option",{value:ct.L,onMouseDown:this.selectLeft},"\u2190"),o.a.createElement("option",{value:ct.R,onMouseDown:this.selectRight},"\u2192")),this.props.isEditable&&o.a.createElement("button",{className:"transition-detail__button",onClick:this.handleDeleteClick}))}},{key:"componentDidMount",value:function(){this.props.isFocused&&this.focus()}},{key:"focus",value:function(){this.readRef.current&&this.readRef.current.focus()}},{key:"handleInputChange",value:function(e){var t=this;return function(n){t.props.onChange&&" "!==n.target.value&&t.props.onChange(tr({},t.props.detail,Object(p.a)({},e,n.target.value)))}}},{key:"changeDirection",value:function(e){this.props.onChange&&this.props.onChange(tr({},this.props.detail,{move:e}))}}]),t}(o.a.Component),rr=(n(54),function(e){function t(){var e,n;Object(U.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(Dn.a)(this,(e=Object(wn.a)(t)).call.apply(e,[this].concat(o)))).handleDetailChange=function(e){n.props.changeDetail(e)},n}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.details,r=t.control,i=this.computeStance(),a=zn()("transition-details","transition-details--".concat(i));return o.a.createElement("div",{className:a,style:{position:"absolute",left:r.x,top:r.y}},this.props.isEditable&&!this.isTopStance(i)&&this.renderAddDetailButton(),n.map(function(t){return o.a.createElement(nr,{key:t.id,detail:t,isFocused:e.props.focusedDetail===t.id,isEditable:e.props.isEditable,isActive:!e.props.isEditable&&e.props.activeDetail===t.id,onChange:e.handleDetailChange,onDelete:e.handleDetailDelete(t.id,t.arrow),onFocus:e.handleDetailFocus(t.id),onBlur:e.handleDetailBlur(t.id)})}),this.props.isEditable&&this.isTopStance(i)&&this.renderAddDetailButton())}},{key:"handleDetailDelete",value:function(e,t){var n=this;return function(){return n.props.deleteDetail(e,t)}}},{key:"handleDetailFocus",value:function(e){var t=this;return function(){return t.props.focusDetail(e)}}},{key:"handleDetailBlur",value:function(e){var t=this;return function(){return t.props.blurDetail(e)}}},{key:"handleAddDetailButton",value:function(e){var t=this;return function(){return t.props.addDetail(e)}}},{key:"computeStance",value:function(){return this.props.isSelfLoop?this.computeSelfLoopStance():this.computeStandardStance()}},{key:"computeSelfLoopStance",value:function(){var e=this.props,t=e.start,n=e.control.minus(t).angle();return this.computeClassNameFromAngle(n)}},{key:"computeStandardStance",value:function(){var e=this.props,t=e.start,n=e.end,r=e.control.minus(t),o=r.project(n.minus(t)),i=r.minus(o).angle();return this.computeClassNameFromAngle(i)}},{key:"computeClassNameFromAngle",value:function(e){return 0<e&&e<=Math.PI/2?"top-left":Math.PI/2<e&&e<=Math.PI?"top-right":-Math.PI/2>e&&e>=-Math.PI?"bottom-right":"bottom-left"}},{key:"isTopStance",value:function(e){return/^top/.test(e)}},{key:"renderAddDetailButton",value:function(){return o.a.createElement("button",{className:"transition-details__add-button",onClick:this.handleAddDetailButton(this.props.arrowId)},"add new")}}]),t}(o.a.Component)),or=Object(s.b)(function(e,t){var n=Ge(e,t.arrowId),r=be(e,n.start),o=be(e,n.end),i=He(e,n.id);return{start:r.pos,end:o.pos,control:i.pos,isSelfLoop:r.id===o.id,focusedDetail:Nt(e),isEditable:K(e),activeDetail:un(e)}},function(e){return{changeDetail:function(t){return e(function(e){return{type:"CHANGE_TRANSITION_DETAIL",payload:{detail:e}}}(t))},deleteDetail:function(t,n){return e(function(e,t){return{type:"DELETE_TRANSITION_DETAIL",payload:{id:e,arrow:t}}}(t,n))},addDetail:function(t){return e(d(t))},focusDetail:function(t){return e(function(e){return{type:"FOCUS_TRANSIITON_DETAIL",payload:{id:e}}}(t))},blurDetail:function(t){return e(function(e){return{type:"BLUR_TRANSITION_DETAIL",payload:{id:e}}}(t))}}})(rr),ir=(n(55),function(e){function t(){var e,n;Object(U.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(Dn.a)(this,(e=Object(wn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseUp=function(e){n.props.add(n.props.pos)},n}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.pos;return t&&o.a.createElement("div",{className:"shadow-node",onMouseUp:this.handleMouseUp,style:{position:"absolute",left:n.x-21,top:n.y-21-2}})}}]),t}(o.a.Component)),ar=Object(s.b)(function(e){return{isVisible:ee(e),pos:q(e)}},function(e){return{add:function(t){return e(function(e){return{type:"ADD_NODE",payload:{pos:e}}}(t))}}})(ir),sr=(n(56),function(e){function t(){var e,n;Object(U.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(Dn.a)(this,(e=Object(wn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown(n.computeMousePos(e))},n.handleMouseUp=function(){n.props.mouseUp()},n.handleMouseMove=function(e){e.preventDefault(),n.props.mouseMove(n.computeMousePos(e))},n}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.arrows,n=e.nodes,r=e.controlPoints,i=e.transitionDetails;return o.a.createElement("div",{className:"canvas",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseMove:this.handleMouseMove},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},t.map(function(e){return o.a.createElement(Qn,{key:e.id,details:e})}),r.map(function(e){return o.a.createElement($n,{key:e.id,details:e})})),n.map(function(e){return o.a.createElement(Xn,{key:e.id,details:e})}),Object.keys(i).map(function(e){return o.a.createElement(or,{key:e,arrowId:e,details:i[e]})}),o.a.createElement(ar,null))}},{key:"computeMousePos",value:function(e){var t=e.currentTarget.getBoundingClientRect(),n=t.left,r=t.top,o=e.clientX,i=e.clientY;return new F(o-n,i-r)}}]),t}(o.a.Component)),cr=Object(s.b)(function(e){return{arrows:Ue(e),nodes:Ee(e),controlPoints:Ye(e),transitionDetails:wt(e)}},function(e){return{mouseDown:function(t){return e(function(e){return{type:"MOUSE_DOWN_CANVAS",payload:{pos:e}}}(t))},mouseUp:function(){return e({type:"MOUSE_UP_CANVAS"})},mouseMove:function(t){return e(function(e){return{type:"MOUSE_MOVE_CANVAS",payload:{pos:e}}}(t))}}})(sr),ur=function(e){switch(De(e).length){case 0:return[lr.ADD_STATE];case 1:return[lr.ADD_STATE,lr.REMOVE_STATE,lr.ADD_SELF_TRANSITION,lr.MAKE_START,lr.TOGGLE_ACCEPTING];case 2:return[lr.ADD_STATE,lr.REMOVE_TWO_STATES,lr.ADD_TRANSITION,lr.TOGGLE_TWO_ACCEPTING];default:return[lr.ADD_STATE,lr.REMOVE_MANY_STATES,lr.TOGGLE_MANY_ACCEPTING]}},lr={ADD_STATE:"ADD_STATE",REMOVE_STATE:"REMOVE_STATE",REMOVE_TWO_STATES:"REMOVE_TWO_STATES",REMOVE_MANY_STATES:"REMOVE_MANY_STATES",ADD_SELF_TRANSITION:"ADD_SELF_TRANSITION",ADD_TRANSITION:"ADD_TRANSITION",MAKE_START:"MAKE_START",UNMAKE_START:"UNMAKE_START",TOGGLE_ACCEPTING:"TOGGLE_ACCEPTING",TOGGLE_TWO_ACCEPTING:"TOGGLE_TWO_ACCEPTING",TOGGLE_MANY_ACCEPTING:"TOGGLE_MANY_ACCEPTING"},pr=(n(57),function(e){function t(){var e,n,r;Object(U.a)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(r=Object(Dn.a)(this,(e=Object(wn.a)(t)).call.apply(e,[this].concat(i)))).handleUndoButtonClick=function(){r.props.undo()},r.handleRedoButtonClick=function(){r.props.redo()},r.buttonConfig=(n={},Object(p.a)(n,lr.ADD_STATE,{action:function(){return r.props.addState()},className:"add-state",title:"add new state"}),Object(p.a)(n,lr.REMOVE_STATE,{action:function(){return r.props.removeStates()},className:"remove-state",title:"remove state"}),Object(p.a)(n,lr.REMOVE_TWO_STATES,{action:function(){return r.props.removeStates()},className:"remove-two-states",title:"remove states"}),Object(p.a)(n,lr.REMOVE_MANY_STATES,{action:function(){return r.props.removeStates()},className:"remove-many-states",title:"remove states"}),Object(p.a)(n,lr.ADD_SELF_TRANSITION,{action:function(){return r.props.addTransition()},className:"add-self-transition",title:"add self transition"}),Object(p.a)(n,lr.ADD_TRANSITION,{action:function(){return r.props.addTransition()},className:"add-transition",title:"add transition"}),Object(p.a)(n,lr.MAKE_START,{action:function(){return r.props.makeStart()},className:"make-start",title:"distinguish as initial state"}),Object(p.a)(n,lr.TOGGLE_ACCEPTING,{action:function(){return r.props.toggleFinal()},className:"toggle-accepting",title:"toggle state's status as final"}),Object(p.a)(n,lr.TOGGLE_TWO_ACCEPTING,{action:function(){return r.props.toggleFinal()},className:"toggle-two-accepting",title:"toggle states' statuses as final"}),Object(p.a)(n,lr.TOGGLE_MANY_ACCEPTING,{action:function(){return r.props.toggleFinal()},className:"toggle-many-accepting",title:"toggle states' statuses as final"}),n),r}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"edit-controls"},o.a.createElement("div",{className:"edit-controls__undo-redo-buttons"},o.a.createElement("button",{className:"edit-controls__button edit-controls__undo-button",title:"undo",onClick:this.handleUndoButtonClick}),o.a.createElement("button",{className:"edit-controls__button edit-controls__redo-button",title:"redo",onClick:this.handleRedoButtonClick})),this.props.inEditMode&&this.props.buttonTypes.map(function(t){var n=e.buttonConfig[t];return n&&o.a.createElement("button",{className:"edit-controls__button edit-controls__".concat(n.className,"-button"),title:n.title,key:t,onClick:n.action})}))}}]),t}(o.a.Component)),dr=Object(s.b)(function(e){return{inEditMode:K(e),buttonTypes:ur(e)}},function(e){return{undo:function(){return e({type:"UNDO"})},redo:function(){return e({type:"REDO"})},addState:function(){return e({type:"START_ADDING_NODE"})},removeStates:function(){return e({type:"DELETE_SELECTED_NODES"})},addTransition:function(){return e({type:"ADD_TRANSITION_BETWEEN_SELECTED"})},makeStart:function(){return e({type:"MAKE_SELECTED_START_NODE"})},toggleFinal:function(){return e({type:"TOGGLE_SELECTED_FINAL_NODES"})}}})(pr),fr=(n(58),function(e){function t(){return Object(U.a)(this,t),Object(Dn.a)(this,Object(wn.a)(t).apply(this,arguments))}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"app-controls"},o.a.createElement("div",{className:"app-controls__buttons"},o.a.createElement("button",{className:"app-controls__button app-controls__download-button",title:"download machine (JSON)"}),o.a.createElement("button",{className:"app-controls__button app-controls__upload-button",title:"upload machine (JSON)"})),o.a.createElement("a",{className:"app-controls__link",href:"#examples"},"Examples"),o.a.createElement("a",{className:"app-controls__link",href:"#tutorial"},"Tutorial"),o.a.createElement("a",{className:"app-controls__link",href:"#guide"},"Guide"),o.a.createElement("a",{className:"app-controls__link",href:"#about"},"About"),o.a.createElement("a",{className:"app-controls__link app-controls__source-link",href:"https://github.com/wjlewis/tm",target:"_blank",rel:"noopener noreferrer"},"<Source/>"))}}]),t}(o.a.Component)),Or=(n(59),function(e){function t(){var e,n;Object(U.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(Dn.a)(this,(e=Object(wn.a)(t)).call.apply(e,[this].concat(i)))).tapeRef=o.a.createRef(),n.handleScroll=function(e){n.props.updateScrollLeft(e.target.scrollLeft)},n.handleClearButtonClick=function(){n.props.clear()},n}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this,t=this.props.isEditable,n=zn()("tape__cell",{"tape__cell--editable":t});return o.a.createElement(o.a.Fragment,null,this.renderReadHead(),o.a.createElement("div",{className:"tape",ref:this.tapeRef,onScroll:this.handleScroll,style:{width:"".concat(720,"px")}},o.a.createElement("div",{className:"tape__cells"},o.a.createElement("div",{className:"tape__padding-left",style:{width:360}},"\u21d0\u2002this half intentionally left blank"),this.props.entries.map(function(t,r){return o.a.createElement("input",{key:r,disabled:!e.props.isEditable,className:n,value:t,placeholder:"\u2205",onChange:e.handleCellChange(r),onFocus:e.handleCellFocus(r),style:{width:"".concat(36,"px")},type:"text",maxLength:1})}),o.a.createElement("div",{className:"tape__padding-right",style:{width:"".concat(18,"px")}}))),this.renderFeeders(),this.renderClearButton())}},{key:"componentDidMount",value:function(){this.tapeRef.current&&this.tapeRef.current.scrollTo(18,0)}},{key:"componentDidUpdate",value:function(e){e.focusedCell!==this.props.focusedCell&&null!==this.props.focusedCell&&this.updateFocus()}},{key:"updateFocus",value:function(){if(this.tapeRef.current){var e=this.tapeRef.current.childNodes[0].childNodes[this.props.focusedCell+1];e&&e.focus()}}},{key:"handleCellChange",value:function(e){var t=this;return function(n){" "!==n.target.value&&t.props.changeCell(e,n.target.value)}}},{key:"handleCellFocus",value:function(e){var t=this;return function(){t.props.focusCell(e)}}},{key:"renderReadHead",value:function(){var e=zn()("tape-reader",{"tape-reader--active":!this.props.isEditable});return o.a.createElement("div",{className:e,style:{position:"absolute",left:"calc(50% - ".concat(18,"px)")}})}},{key:"renderClearButton",value:function(){return o.a.createElement("button",{className:"tape__clear-button",title:"clear tape contents",onClick:this.handleClearButtonClick,style:{position:"absolute",right:"calc(50% - ".concat(430,"px)")}})}},{key:"renderFeeders",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"tape-feed tape-feed__left",style:{position:"absolute",left:"calc(50% - ".concat(366,"px)")}}),o.a.createElement("div",{className:"tape-feed tape-feed__right",style:{position:"absolute",right:"calc(50% - ".concat(366,"px)")}}))}}]),t}(o.a.Component)),mr=Object(s.b)(function(e){return{entries:ut(e),isEditable:K(e),focusedCell:lt(e)}},function(e){return{changeCell:function(t,n){return e(function(e,t){return{type:"CHANGE_TAPE_CELL",payload:{pos:e,value:t}}}(t,n))},updateScrollLeft:function(t){return e(function(e){return{type:"UPDATE_SCROLL_LEFT",payload:{scrollLeft:e}}}(t))},focusCell:function(t){return e(function(e){return{type:"FOCUS_TAPE_CELL",payload:{pos:e}}}(t))},clear:function(){return e({type:"CLEAR_TAPE"})}}})(Or),yr=(n(60),function(e){function t(){var e,n;Object(U.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(Dn.a)(this,(e=Object(wn.a)(t)).call.apply(e,[this].concat(o)))).reset=function(){n.props.reset()},n.togglePlayPause=function(){n.props.isInEditMode?n.props.play():n.props.pause()},n.step=function(){n.props.step()},n}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.isInEditMode;return o.a.createElement("div",{className:"sim-controls"},o.a.createElement("button",{onClick:this.reset},"Reset"),o.a.createElement("button",{onClick:this.togglePlayPause},e?"Play":"Pause"),o.a.createElement("button",{disabled:!e,onClick:this.step},"Step"))}}]),t}(o.a.Component)),hr=Object(s.b)(function(e){return{isInEditMode:K(e)}},function(e){return{reset:function(){return e({type:_})},pause:function(){return e({type:b})},step:function(){return e({type:h})},play:function(){return e({type:E})}}})(yr),Er=(n(61),function(e){function t(){var e,n;Object(U.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(Dn.a)(this,(e=Object(wn.a)(t)).call.apply(e,[this].concat(o)))).handleMessageClick=function(e){e.stopPropagation()},n.dismiss=function(){n.props.dismiss()},n}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return this.props.show&&o.a.createElement("div",{className:"message__container",onClick:this.dismiss},o.a.createElement("div",{className:"message",onClick:this.handleMessageClick},o.a.createElement("h1",{className:"message__title"},this.props.title),o.a.createElement("div",{className:"message__content"},this.props.content),o.a.createElement("button",{className:"message__dismiss-button",onClick:this.dismiss},"Dismiss")))}}]),t}(o.a.Component)),br=Object(s.b)(function(e){return{show:qt(e),title:Xt(e),content:Zt(e)}},function(e){return{dismiss:function(){return e({type:"DISMISS_MESSAGE"})}}})(Er),_r=(n(62),function(e){function t(){var e,n;Object(U.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(Dn.a)(this,(e=Object(wn.a)(t)).call.apply(e,[this].concat(o)))).handleKeyDown=function(e){n.props.keyDown(e.key,e)},n.handleKeyUp=function(e){n.props.keyUp(e.key)},n}return Object(Tn.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement(cr,null),o.a.createElement(mr,null),o.a.createElement(dr,null),o.a.createElement(fr,null),o.a.createElement(hr,null),o.a.createElement(br,null))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}}]),t}(o.a.Component)),vr=Object(s.b)(null,function(e){return{keyDown:function(t,n){return e(function(e,t){return{type:"KEY_DOWN",payload:{key:e,event:t}}}(t,n))},keyUp:function(t){return e(function(e){return{type:"KEY_UP",payload:{key:e}}}(t))}}})(_r);n(63);a.a.render(o.a.createElement(s.a,{store:Yn},o.a.createElement(vr,null)),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.fdced9c3.chunk.js.map