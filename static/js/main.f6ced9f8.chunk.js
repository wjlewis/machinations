(window.webpackJsonpmachinations=window.webpackJsonpmachinations||[]).push([[0],{36:function(e,t,n){e.exports=n(66)},48:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(22),i=n.n(a),s=n(12),c=n(19),u=n(35),l=n(33),p=n(3),d=function(e){return{type:"ADD_TRANSITION_DETAIL",payload:{arrow:e}}},f=function(e){return{type:"MOVE_TAPE",payload:{direction:e}}},m=function(e){return{type:"WRITE_TAPE_SYMBOL",payload:{symbol:e}}},O=function(e,t,n,r){return{type:"DELETE_ENTITIES",payload:{nodes:e,arrows:t,controlPoints:n,transitionDetails:r}}},h=function(e,t){return{type:"DISPLAY_MESSAGE",payload:{title:e,content:t}}},y="STEP_SIM",b="PLAY_SIM",E="PAUSE_SIM",_="RESET_SIM",v=function(e){return{type:"SET_CURRENT_NODE",payload:{node:e}}},g=function(e){return{type:"SET_TAPE_WRITING_STATUS",payload:{isWriting:e}}},w=function(e){return{type:"SET_GLOWING_NODE",payload:{node:e}}},D=function(e){return{type:"SET_FADE_IN_NODE",payload:{node:e}}},N=function(e){return{type:"SET_FADE_OUT_NODE",payload:{node:e}}},T=function(e){return{type:"SET_GLOWING_ARROW",payload:{arrow:e}}},j=function(e){return{type:"SET_GLOWING_CONTROL_POINT",payload:{controlPoint:e}}},S=function(e){return{type:"SET_GLOWING_TRANSITION_DETAIL",payload:{transitionDetail:e}}},A="HALT_ACCEPT",I=function(){return{type:A}},P="HALT_REJECT",C=function(){return{type:P}},M=function(e){return{type:"SWITCH_MODE",payload:{mode:e}}},k=function(){return{type:"SAVE_SNAPSHOT"}},L=function(e){return{type:"INSTALL_SNAPSHOT",payload:{snapshot:e}}},R=n(5),x=n.n(R),U=n(20),G=n.n(U);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var F=function(e){return e.wip||e.committed},B=function(e){return x.a.get(e,"entities")},V=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{entities:x.a.mapValues(t,function(e){return x.a.mapValues(e,function(e,t){return"wip"===t?null:e})})})},H=n(7),K=n(8),Y=function(){function e(t,n){Object(H.a)(this,e),this.x=t,this.y=n}return Object(K.a)(e,[{key:"magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalize",value:function(){var t=this.magnitude();if(0===t)throw new Error("Cannot normalize 0 vector");return new e(this.x/t,this.y/t)}},{key:"perp",value:function(){return new e(-this.y,this.x)}},{key:"plus",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"minus",value:function(e){return this.plus(e.scale(-1))}},{key:"scale",value:function(t){return new e(t*this.x,t*this.y)}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"project",value:function(e){return e.scale(this.dot(e)/e.dot(e))}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}}],[{key:"from",value:function(t){return new e(t.x,t.y)}}]),e}(),J=n(16),z=function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n};function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var q={EDIT:"EDIT",SIM:"SIM"},X={mode:q.EDIT},Z=function(e){return e.mode.mode===q.EDIT},$=function(e,t){switch(t.type){case"SWITCH_MODE":return ee(e,t.payload.mode);default:return e.mode}},ee=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.mode,{mode:t})};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var re={mousePos:new Y(0,0),keysDown:[],isMouseDownNode:!1,isMouseDownControlPoint:!1,isAddingNode:!1,wasMouseReleasedOverNode:!1,wasMouseDragged:!1,wasMnemonicChanged:!1},oe=function(e){return e.ui.mousePos},ae=function(e){return e.ui.keysDown.includes("Shift")},ie=function(e){return e.ui.isMouseDownNode},se=function(e){return e.ui.isMouseDownControlPoint},ce=function(e){return e.ui.isAddingNode},ue=function(e){return e.ui.wasMouseDragged},le=function(e,t){if(!Z(e))return e.ui;switch(t.type){case"KEY_DOWN":return pe(e,t.payload.key);case"KEY_UP":return de(e,t.payload.key);case"MOUSE_DOWN_NODE":return fe(e);case"MOUSE_UP_NODE":return me(e);case"MOUSE_DOWN_CONTROL_POINT":return Oe(e);case"MOUSE_UP_CONTROL_POINT":return he(e);case"MOUSE_DOWN_CANVAS":return ye(e);case"MOUSE_UP_CANVAS":return be(e);case"START_ADDING_NODE":return Ee(e);case"ADD_NODE":return _e(e);case"MOUSE_MOVE_CANVAS":return ve(e,t.payload.pos);case"CHANGE_MNEMONIC":return ge(e);case"BLUR_MNEMONIC":return we(e);default:return e.ui}},pe=function(e,t){return ne({},e.ui,{keysDown:x.a.uniq([].concat(Object(J.a)(e.ui.keysDown),[t]))})},de=function(e,t){return ne({},e.ui,{keysDown:e.ui.keysDown.filter(function(e){return e!==t})})},fe=function(e){return ne({},e.ui,{isMouseDownNode:!0})},me=function(e){return ne({},e.ui,{isMouseDownNode:!1,wasMouseReleasedOverNode:!0})},Oe=function(e){return ne({},e.ui,{isMouseDownControlPoint:!0})},he=function(e){return ne({},e.ui,{isMouseDownControlPoint:!1})},ye=function(e){return ne({},e.ui,{wasMouseDragged:!1})},be=function(e){return ne({},e.ui,{isMouseDownNode:!1,isMouseDownControlPoint:!1,wasMouseReleasedOverNode:!1})},Ee=function(e){return ne({},e.ui,{isAddingNode:!0})},_e=function(e){return ne({},e.ui,{isAddingNode:!1,wasMouseReleasedOverNode:!0})},ve=function(e,t){return ne({},e.ui,{mousePos:t,wasMouseDragged:!0})},ge=function(e){return ne({},e.ui,{wasMnemonicChanged:!0})},we=function(e){return ne({},e.ui,{wasMnemonicChanged:!1})};function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Te=function(e){return Object.values(F(e.entities.nodes).byId)},je=function(e,t){var n=Te(e).find(function(e){return e.id===t});if(!n)throw new Error('No Node with ID "'.concat(t,'"'));return n},Se=function(e,t){return F(e.entities.nodes).selected.includes(t)},Ae=function(e,t){return F(e.entities.nodes).byId[t].isFinal},Ie=function(e){return F(e.entities.nodes).selected},Pe=function(e,t){var n=F(e.entities.nodes).startNode;return null!==n&&n===t},Ce=function(e,t){if(!Z(e))return e.entities.nodes;switch(t.type){case"ADD_NODE":return Me(e,t.payload.pos);case"ADD_ARROW":return ke(e,t.payload.start,t.payload.end);case"DELETE_ENTITIES":return Le(e,t.payload.nodes);case"MAKE_SELECTED_START_NODE":return Re(e);case"TOGGLE_SELECTED_FINAL_NODES":return xe(e);case"CHANGE_MNEMONIC":return Ue(e,t.payload.id,t.payload.value);case"BLUR_MNEMONIC":return Ge(e);case"SELECT_ALL_NODES":return We(e);case"MOUSE_DOWN_NODE":return Fe(e,t.payload.id);case"MOUSE_UP_NODE":return Be(e);case"MOUSE_DOWN_CANVAS":return Ve(e,t.payload.pos);case"MOUSE_UP_CANVAS":return He(e);case"MOUSE_MOVE_CANVAS":return Ke(e,t.payload.pos);default:return e.entities.nodes}},Me=function(e,t){var n=G()(),r={id:n,pos:t,mnemonic:"",isFinal:!1};return{wip:null,committed:x.a.mergeWith({},e.entities.nodes.committed,{byId:Object(p.a)({},n,r)},function(e,t,r){return"selected"===r?[n]:void 0})}},ke=function(e,t,n){return{wip:null,committed:Ne({},e.entities.nodes.committed,{selected:t!==n?[]:e.entities.nodes.committed.selected})}},Le=function(e,t){var n=e.entities.nodes.committed;return{wip:null,committed:Ne({},n,{byId:x.a.omit(n.byId,t),selected:[],startNode:n.startNode&&t.includes(n.startNode)?null:n.startNode})}},Re=function(e){return{wip:null,committed:x.a.merge({},e.entities.nodes.committed,{startNode:e.entities.nodes.committed.selected[0]})}},xe=function(e){var t=Ie(e).map(function(t){return je(e,t)}),n=t.some(function(e){return e.isFinal}),r=t.reduce(function(e,t){return Ne({},e,Object(p.a)({},t.id,Ne({},t,{isFinal:!n})))},{});return{wip:null,committed:x.a.merge({},e.entities.nodes.committed,{byId:Ne({},r)})}},Ue=function(e,t,n){return Ne({},e.entities.nodes,{wip:x.a.merge({},F(e.entities.nodes),{byId:Object(p.a)({},t,{mnemonic:n})})})},Ge=function(e){return{wip:null,committed:F(e.entities.nodes)}},We=function(e){return{wip:null,committed:Ne({},e.entities.nodes.committed,{selected:Object.keys(e.entities.nodes.committed.byId)})}},Fe=function(e,t){var n,r,o=e.entities.nodes,a=o.committed.selected;return{wip:null,committed:Ne({},o.committed,{selected:ae(e)?(n=t,r=a,r.includes(n)?r.filter(function(e){return e!==n}):[].concat(Object(J.a)(r),[n])):a.includes(t)?a:[t]})}},Be=function(e){return{wip:null,committed:Ne({},F(e.entities.nodes),{offsets:{}})}},Ve=function(e,t){if(!ie(e))return e.entities.nodes;var n=e.entities.nodes,r=n.committed.selected.reduce(function(e,r){var o=n.committed.byId[r];return Ne({},e,Object(p.a)({},r,Y.from(o.pos).minus(t)))},{});return Ne({},n,{wip:Ne({},n.committed,{offsets:r})})},He=function(e){return function(e){return e.ui.wasMouseReleasedOverNode}(e)?e.entities.nodes:{wip:null,committed:Ne({},e.entities.nodes.committed,{selected:ae(e)?e.entities.nodes.committed.selected:[]})}},Ke=function(e,t){var n=e.entities.nodes;if(!ie(e)||!n.wip)return n;var r=Object.keys(n.wip.offsets).reduce(function(e,r){var o=n.wip.byId[r],a=t.plus(n.wip.offsets[r]);return Ne({},e,Object(p.a)({},r,Ne({},o,{pos:a})))},{});return x.a.merge({},n,{wip:{byId:Ne({},r)}})};function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Je=function(e){return Object.values(e.entities.arrows.byId)},ze=function(e,t){var n=e.entities.arrows.byId[t];if(!n)throw new Error('No Arrow with ID "'.concat(t,'"'));return n},Qe=function(e,t){if(!Z(e))return e.entities.arrows;switch(t.type){case"ADD_ARROW":return qe(e,t.payload.start,t.payload.end,t.payload.id);case"DELETE_ENTITIES":return Xe(e,t.payload.arrows);default:return e.entities.arrows}},qe=function(e,t,n,r){return x.a.merge({},e.entities.arrows,{byId:Object(p.a)({},r,{start:t,end:n,id:r})})},Xe=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.entities.arrows,{byId:x.a.omit(e.entities.arrows.byId,t)})};function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var et=function(e){return Object.values(F(e.entities.controlPoints).byId)},tt=function(e,t){var n=et(e).find(function(e){return e.arrow===t});if(!n)throw new Error('No ControlPoint associated with Arrow having ID "'.concat(t,'"'));return n},nt=function(e,t){if(!Z(e))return e.entities.controlPoints;switch(t.type){case"ADD_ARROW":return rt(e,t.payload.start,t.payload.end,t.payload.id);case"DELETE_ENTITIES":return ot(e,t.payload.controlPoints);case"MOUSE_DOWN_CONTROL_POINT":return at(e,t.payload.id);case"MOUSE_UP_CONTROL_POINT":return it(e);case"MOUSE_DOWN_CANVAS":return st(e,t.payload.pos);case"MOUSE_MOVE_CANVAS":return lt(e,t.payload.pos);case"MOUSE_UP_CANVAS":case"MOUSE_UP_NODE":return ft(e);default:return e.entities.controlPoints}},rt=function(e,t,n,r){var o=G()(),a=Y.from(je(e,t).pos),i=t===n?a:Y.from(je(e,n).pos),s=t===n?a.minus(new Y(0,90)):function(e,t){var n=t.minus(e),r=0!==n.magnitude()?n.perp().normalize().scale(-1):new Y(0,-1);return n.scale(.5).plus(r).plus(e)}(a,i);return{wip:null,committed:x.a.merge({},e.entities.controlPoints.committed,{byId:Object(p.a)({},o,{id:o,arrow:r,pos:s})})}},ot=function(e,t){return{wip:null,committed:$e({},e.entities.controlPoints.committed,{byId:x.a.omit(e.entities.controlPoints.committed.byId,t)})}},at=function(e,t){return $e({},e.entities.controlPoints,{wip:null,committed:$e({},e.entities.controlPoints.committed,{selected:t})})},it=function(e){return{wip:null,committed:$e({},F(e.entities.controlPoints),{selected:null,selectedOffset:null})}},st=function(e,t){return se(e)?ct(e,t):ie(e)?ut(e,t):e.entities.controlPoints},ct=function(e,t){var n=e.entities.controlPoints.committed;if(!n.selected)return e.entities.controlPoints;var r=n.byId[n.selected],o=Y.from(r.pos).minus(t);return $e({},e.entities.controlPoints,{wip:x.a.merge({},n,{selectedOffset:o})})},ut=function(e,t){var n=e.entities.controlPoints.committed,r=Ie(e),o=Object.values(n.byId).filter(function(t){var n=ze(e,t.arrow);return r.includes(n.start)&&r.includes(n.end)}).reduce(function(e,n){return $e({},e,Object(p.a)({},n.id,new Y(n.pos.x-t.x,n.pos.y-t.y)))},{}),a=Object.values(n.byId).reduce(function(n,o){var a,i,s=ze(e,o.arrow),c=r.includes(s.start),u=r.includes(s.end);if(i=u,!(a=c)&&!i||a&&i)return n;var l=Y.from(je(e,u?s.start:s.end).pos),d=Y.from(je(e,c?s.start:s.end).pos),f=d.minus(t),m=l.minus(d),O=Y.from(o.pos).minus(d),h=O.project(m),y=h.magnitude()/m.magnitude(),b=O.minus(h),E=(b.dot(h.perp())>0?1:-1)*b.magnitude();return $e({},n,Object(p.a)({},o.id,{fixedPos:l,movingOffset:f,fractionAlong:y,perpLength:E}))},{});return $e({},e.entities.controlPoints,{wip:$e({},n,{fullOffsets:o,halfOffsets:a})})},lt=function(e,t){return se(e)?pt(e,t):ie(e)?dt(e,t):e.entities.controlPoints},pt=function(e,t){var n=e.entities.controlPoints;if(!n.wip||!n.wip.selected||!n.wip.selectedOffset)return n;var r=n.wip.byId[n.wip.selected],o=t.plus(Y.from(n.wip.selectedOffset));return $e({},n,{wip:x.a.merge({},n.wip,{byId:Object(p.a)({},r.id,$e({},r,{pos:o}))})})},dt=function(e,t){var n=e.entities.controlPoints;if(!n.wip)return n;var r=Object.keys(n.wip.fullOffsets).reduce(function(e,r){var o=n.wip.byId[r],a=t.plus(Y.from(n.wip.fullOffsets[r]));return $e({},e,Object(p.a)({},r,$e({},o,{pos:a})))},{}),o=Object.keys(n.wip.halfOffsets).reduce(function(e,r){var o=n.wip.byId[r],a=n.wip.halfOffsets[r],i=a.fixedPos,s=a.movingOffset,c=a.fractionAlong,u=a.perpLength,l=t.plus(s),d=i.minus(l),f=d.scale(c).plus(l),m=0!==d.magnitude()?d.perp().normalize().scale(u).plus(f):new Y(0,-80).plus(f);return $e({},e,Object(p.a)({},r,$e({},o,{pos:m})))},{});return $e({},n,{wip:x.a.merge({},n.wip,{byId:$e({},r,{},o)})})},ft=function(e){return $e({},e.entities.controlPoints,{wip:null,committed:$e({},F(e.entities.controlPoints),{selected:null,selectedOffset:null,fullOffsets:{},halfOffsets:{}})})};function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ht=function(e){return e.sim.isTapeWriting},yt=function(e){return e.sim.currentNode?e.sim.currentNode:function(e){var t=F(e.entities.nodes).startNode;if(null===t)throw new Error("No start node has been distinguished.");return t}(e)},bt=function(e,t){return e.sim.currentNode?e.sim.currentNode===t:Pe(e,t)},Et=function(e){return e.sim.activeTapeCell},_t=function(e,t){return e.sim.glowingNode===t},vt=function(e,t){return e.sim.fadeInNode===t},gt=function(e,t){return e.sim.fadeOutNode===t},wt=function(e,t){return e.sim.glowingArrow===t},Dt=function(e,t){return e.sim.glowingControlPoint===t},Nt=function(e){return e.sim.glowingTransitionDetail},Tt=function(e){return Math.floor(4e3/e.sim.intervalDivisor)},jt=function(e){return e.sim.intervalDivisor},St=function(e,t){switch(t.type){case y:return At(e);case b:return It(e);case _:return Pt(e);case"SET_SIM_INTERVAL_DIVISOR":return Ct(e,t.payload.divisor);case"SET_CURRENT_NODE":return Mt(e,t.payload.node);case"SET_TAPE_WRITING_STATUS":return kt(e,t.payload.isWriting);case"MOVE_TAPE":return Lt(e,t.payload.direction);case"SET_GLOWING_NODE":return Rt(e,t.payload.node);case"SET_FADE_IN_NODE":return xt(e,t.payload.node);case"SET_FADE_OUT_NODE":return Ut(e,t.payload.node);case"SET_GLOWING_ARROW":return Gt(e,t.payload.arrow);case"SET_GLOWING_CONTROL_POINT":return Wt(e,t.payload.controlPoint);case"SET_GLOWING_TRANSITION_DETAIL":return Ft(e,t.payload.transitionDetail);default:return e.sim}},At=function(e){return Ot({},e.sim,{hasStarted:!0,initialTapeEntries:e.sim.hasStarted?e.sim.initialTapeEntries:Yt(e)})},It=function(e){return Ot({},e.sim,{hasStarted:!0,initialTapeEntries:e.sim.hasStarted?e.sim.initialTapeEntries:Yt(e)})},Pt=function(e){return Ot({},e.sim,{hasStarted:!1,initialTapeEntries:null,currentNode:null,activeTapeCell:0,isTapeWriting:!1,glowingNode:null,fadeInNode:null,fadeOutNode:null,glowingArrow:null,glowingControlPoint:null,glowingTransitionDetail:null})},Ct=function(e,t){return Ot({},e.sim,{intervalDivisor:t})},Mt=function(e,t){return Ot({},e.sim,{currentNode:t})},kt=function(e,t){return Ot({},e.sim,{isTapeWriting:t})},Lt=function(e,t){return Ot({},e.sim,{activeTapeCell:t===Kt.R?Math.max(0,e.sim.activeTapeCell-1):e.sim.activeTapeCell+1})},Rt=function(e,t){return Ot({},e.sim,{glowingNode:t})},xt=function(e,t){return Ot({},e.sim,{fadeInNode:t})},Ut=function(e,t){return Ot({},e.sim,{fadeOutNode:t})},Gt=function(e,t){return Ot({},e.sim,{glowingArrow:t})},Wt=function(e,t){return Ot({},e.sim,{glowingControlPoint:t})},Ft=function(e,t){return Ot({},e.sim,{glowingTransitionDetail:t})};function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ht={entries:z("",20),scrollLeft:0,focused:null},Kt={L:"L",R:"R"},Yt=function(e){return e.entities.tape.entries},Jt=function(e){return e.entities.tape.focused},zt=function(e){var t=Et(e);return e.entities.tape.entries[t]},Qt=function(e,t){switch(t.type){case"CHANGE_TAPE_CELL":return qt(e,t.payload.pos,t.payload.value);case"UPDATE_SCROLL_LEFT":return $t(e,t.payload.scrollLeft);case"FOCUS_TAPE_CELL":return Xt(e,t.payload.pos);case"CLEAR_TAPE":return Zt(e);case"WRITE_TAPE_SYMBOL":return tn(e,t.payload.symbol);case _:return nn(e);default:return e.entities.tape}},qt=function(e,t,n){return Vt({},e.entities.tape,{entries:x.a.update(x.a.clone(e.entities.tape.entries),t,function(e){return n}),focused:n.length>0&&null!==e.entities.tape.focused?e.entities.tape.focused+1:e.entities.tape.focused})},Xt=function(e,t){return Vt({},e.entities.tape,{focused:t})},Zt=function(e){return Ht},$t=function(e,t){return Vt({},e.entities.tape,{entries:en(e.entities.tape.entries,t),scrollLeft:t})},en=function(e,t){var n=e.length-Math.floor(t/36);return n<20?[].concat(Object(J.a)(e),Object(J.a)(z("",20))):n>40&&e.slice(-20).every(function(e){return 0===e.length})?e.slice(0,-20):e},tn=function(e,t){var n=e.entities.tape,r=Et(e);return Vt({},n,{entries:x.a.set(x.a.clone(n.entries),r,t)})},nn=function(e){var t=function(e){return e.sim.initialTapeEntries}(e);return Vt({},e.entities.tape,{entries:t||e.entities.tape.entries})};function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var an=function(e){return Object.values(e.entities.transitionDetails.byId)},sn=function(e){return x.a.groupBy(an(e),function(e){return e.arrow})},cn=function(e,t){return sn(e)[t]},un=function(e){var t=Object.values(function(e){return x.a.groupBy(an(e),function(t){return ze(e,t.arrow).start})}(e)).map(function(e){return Object.values(x.a.groupBy(e,function(e){return e.read}))}).map(function(e){return e.filter(function(e){return e.length>1})});return x.a.flattenDeep(t).map(function(e){return e.id})},ln=function(e){return e.entities.transitionDetails.focused},pn=function(e,t){if(!Z(e))return e.entities.transitionDetails;switch(t.type){case"ADD_TRANSITION_DETAIL":return dn(e,t.payload.arrow);case"ADD_ARROW":return fn(e,t.payload.id);case"CHANGE_TRANSITION_DETAIL":return mn(e,t.payload.detail);case"DELETE_TRANSITION_DETAIL":return On(e,t.payload.id);case"DELETE_ENTITIES":return hn(e,t.payload.transitionDetails);case"FOCUS_TRANSIITON_DETAIL":return yn(e,t.payload.id);case"BLUR_TRANSITION_DETAIL":return bn(e);case"MARK_DUPLICATE_TRANSITIONS":return En(e,t.payload.ids);default:return e.entities.transitionDetails}},dn=function(e,t){var n=G()(),r={id:n,arrow:t,read:"",write:"",move:Kt.L,isFocused:!1};return x.a.merge({},e.entities.transitionDetails,{byId:Object(p.a)({},n,r),focused:n})},fn=function(e,t){return dn(e,t)},mn=function(e,t){return x.a.merge({},e.entities.transitionDetails,{byId:Object(p.a)({},t.id,t)})},On=function(e,t){var n=e.entities.transitionDetails;return on({},n,{byId:x.a.omit(n.byId,t)})},hn=function(e,t){return on({},e.entities.transitionDetails,{byId:x.a.omit(e.entities.transitionDetails.byId,t)})},yn=function(e,t){return on({},e.entities.transitionDetails,{focused:t})},bn=function(e){return on({},e.entities.transitionDetails,{focused:null})},En=function(e,t){return on({},e.entities.transitionDetails,{byId:x.a.mapValues(e.entities.transitionDetails.byId,function(e){return on({},e,{isDuplicate:t.includes(e.id)})})})},_n=n(29);function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var wn=function(e,t){if(!Z(e))return e.undoRedo;switch(t.type){case"MOUSE_UP_NODE":return Dn(e);case"MOUSE_UP_CONTROL_POINT":return Nn(e);case"ADD_NODE":return An(e,"add node");case"BLUR_MNEMONIC":return Tn(e);case"MAKE_SELECTED_START_NODE":return An(e,"change initial state");case"TOGGLE_SELECTED_FINAL_NODES":return An(e,'toggle "final" status for selected states');case"ADD_ARROW":case"ADD_TRANSITION_DETAIL":return An(e,"add new transition");case"DELETE_ENTITIES":return An(e,"delete entities");case"CHANGE_TRANSITION_DETAIL":return An(e,"change transition");case"CHANGE_TAPE_CELL":return An(e,"change tape cell");case"CLEAR_TAPE":return An(e,"clear tape");default:return e.undoRedo}},Dn=function(e){return ue(e)?An(e,"move node"):e.undoRedo},Nn=function(e){return ue(e)?An(e,"move control point"):e.undoRedo},Tn=function(e){return function(e){return e.ui.wasMnemonicChanged}(e)?An(e,"change mnemonic"):e.undoRedo},jn=function(e){if(0===e.undoRedo.actions.length)return e;var t=Object(_n.a)(e.undoRedo.actions),n=t[0],r=t.slice(1),o=gn({},n,{value:B(e)});return gn({},V(e,n.value),{undoRedo:gn({},e.undoRedo,{actions:r,redoable:[o].concat(Object(J.a)(e.undoRedo.redoable))})})},Sn=function(e){if(0===e.undoRedo.redoable.length)return e;var t=Object(_n.a)(e.undoRedo.redoable),n=t[0],r=t.slice(1),o=gn({},n,{value:B(e)});return gn({},V(e,n.value),{undoRedo:gn({},e.undoRedo,{actions:[o].concat(Object(J.a)(e.undoRedo.actions)),redoable:r})})},An=function(e,t){return{actions:[{description:t,value:B(e)}].concat(Object(J.a)(e.undoRedo.actions.slice(0,32))),redoable:[]}};function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Cn=function(e){return e.message.show},Mn=function(e){return e.message.title},kn=function(e){return e.message.content},Ln=function(e,t){switch(t.type){case"DISPLAY_MESSAGE":return Rn(e,t.payload.title,t.payload.content);case"DISMISS_MESSAGE":return xn(e);default:return e.message}},Rn=function(e,t,n){return Pn({},e.message,{show:!0,title:t,content:void 0!==n?n:null})},xn=function(e){return Pn({},e.message,{show:!1,title:null,content:null})};function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Gn=function(e){return e.entities.metaData.name},Wn=function(e,t){switch(t.type){case"CHANGE_MACHINE_NAME":return Fn(e,t.payload.name);default:return e.entities.metaData}},Fn=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.entities.metaData,{name:t})},Bn={entities:{nodes:{wip:null,committed:{byId:{},selected:[],offsets:{},startNode:null}},arrows:{byId:{}},controlPoints:{wip:null,committed:{byId:{},selected:null,selectedOffset:null,fullOffsets:{},halfOffsets:{}}},transitionDetails:{byId:{},focused:null},tape:Ht,metaData:{name:"Untitled"}},ui:re,undoRedo:{actions:[],redoable:[]},message:{show:!1,title:null,content:null},mode:X,sim:{hasStarted:!1,initialTapeEntries:null,currentNode:null,activeTapeCell:0,isTapeWriting:!1,glowingNode:null,fadeInNode:null,fadeOutNode:null,glowingArrow:null,glowingControlPoint:null,glowingTransitionDetail:null,intervalDivisor:4}};function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Kn=function(e,t){return Hn({},V(e,t),{undoRedo:An(e,"install entity snapshot")})},Yn=function(e){var t=B(Bn);return Hn({},V(e,t),{undoRedo:An(e,"create new machine")})},Jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UNDO":return jn(e);case"REDO":return Sn(e);case"INSTALL_SNAPSHOT":return Kn(e,t.payload.snapshot);case"NEW_MACHINE":return Yn(e);default:return Hn({},e,{entities:Hn({},e.entities,{nodes:Ce(e,t),arrows:Qe(e,t),controlPoints:nt(e,t),transitionDetails:pn(e,t),tape:Qt(e,t),metaData:Wn(e,t)}),ui:le(e,t),undoRedo:wn(e,t),message:Ln(e,t),mode:$(e,t),sim:St(e,t)})}},zn={a:function(e,t){return t.ctrlKey?{type:"SELECT_ALL_NODES"}:null},k:function(e,t){return t.ctrlKey?{type:"DELETE_SELECTED_NODES"}:null}," ":function(e,t){return t.ctrlKey?(t.preventDefault(),{type:"START_ADDING_NODE"}):null},t:function(e,t){return Ie(e).length>0&&t.ctrlKey?(t.preventDefault(),{type:"ADD_TRANSITION_BETWEEN_SELECTED"}):null},f:function(e,t){return Ie(e).length>0&&t.ctrlKey?{type:"TOGGLE_SELECTED_FINAL_NODES"}:null},i:function(e,t){return 1===Ie(e).length&&t.ctrlKey?{type:"MAKE_SELECTED_START_NODE"}:null},z:function(e,t){return t.ctrlKey||t.metaKey?{type:"UNDO"}:null},y:function(e,t){return t.ctrlKey||t.metaKey?(t.preventDefault(),{type:"REDO"}):null}},Qn=n(11),qn=n(9),Xn=n(10),Zn=(n(48),function(e){function t(){return Object(H.a)(this,t),Object(Qn.a)(this,Object(qn.a)(t).apply(this,arguments))}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"error-report"},o.a.createElement("div",{className:"error-report__section"},o.a.createElement("span",{className:"error-report__title"},"What's wrong:\u2002"),o.a.createElement("span",{className:"error-report__content"},this.props.whatsWrong)),o.a.createElement("div",{className:"error-report__section"},o.a.createElement("span",{className:"error-report__title"},"How to fix it:\u2002"),o.a.createElement("span",{className:"error-report__content"},this.props.howToFix)))}}]),t}(o.a.Component)),$n=o.a.createElement(Zn,{whatsWrong:"In order for the machine to start, a state must be distinguished as the initial or start state. You have not yet identified any state as such.",howToFix:'Select one of your machine states and click the "Make Start State" button to distinguish it as the initial state.'}),er=o.a.createElement(Zn,{whatsWrong:"At the moment, you have 2 or more transitions from the same state with the same read symbol. Such nondeterministic behavior is not supported.",howToFix:"Find all transitions whose read symbols are marked red, and modify or remove the associated transitions so that all transitions for each state have distinct read symbols"}),tr=(n(49),function(e){function t(){return Object(H.a)(this,t),Object(Qn.a)(this,Object(qn.a)(t).apply(this,arguments))}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.accepted;return o.a.createElement("div",{className:"halt-report"},o.a.createElement("div",{className:"halt-report__title"},"The machine has\xa0",o.a.createElement("span",{className:"halt-report__result halt-report__result--".concat(e?"accepted":"rejected")},e?"accepted":"rejected"),"\xa0the input string."))}}]),t}(o.a.Component)),nr=o.a.createElement(tr,{accepted:!0}),rr=o.a.createElement(tr,{accepted:!1}),or=n(13),ar=n.n(or),ir=n(34),sr=n(2),cr=ar.a.mark(ur);function ur(){var e;return ar.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=5e3;case 1:return t.next=4,Object(sr.c)(e);case 4:return t.next=6,Object(sr.e)(k());case 6:t.next=1;break;case 8:case"end":return t.stop()}},cr)}var lr=ar.a.mark(Er),pr=ar.a.mark(_r),dr=ar.a.mark(vr),fr=ar.a.mark(wr),mr=ar.a.mark(Dr),Or=ar.a.mark(Nr),hr=ar.a.mark(Tr),yr=ar.a.mark(jr),br=ar.a.mark(Sr);function Er(e){var t;return ar.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(sr.d)(_r,e);case 2:return t=n.sent,n.next=5,Object(sr.g)([E,_,A,P]);case 5:return n.next=7,Object(sr.b)(t);case 7:case"end":return n.stop()}},lr)}function _r(e){return ar.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(sr.e)(M(q.SIM));case 3:if(!e){t.next=8;break}return t.next=6,vr();case 6:t.next=13;break;case 8:return t.next=11,vr();case 11:t.next=8;break;case 13:return t.prev=13,t.next=16,Object(sr.e)(M(q.EDIT));case 16:return t.finish(13);case 17:case"end":return t.stop()}},pr,null,[[0,,13,17]])}function vr(){var e,t,n,r,o,a,i,s,c,u;return ar.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(sr.f)(yt);case 2:return e=l.sent,l.next=5,Object(sr.f)(zt);case 5:return t=l.sent,l.next=8,Object(sr.f)(gr,e,t);case 8:if(n=l.sent){l.next=21;break}return l.next=12,Object(sr.f)(function(t){return Ae(t,e)});case 12:if(!l.sent){l.next=18;break}return l.next=16,Object(sr.e)(I());case 16:l.next=20;break;case 18:return l.next=20,Object(sr.e)(C());case 20:return l.abrupt("return");case 21:return r=n.nodeId,o=n.controlPointId,a=n.arrowId,i=n.transitionDetailId,s=n.writeSymbol,c=n.tapeDirection,l.next=24,Object(sr.f)(Tt);case 24:return u=l.sent,l.next=27,Object(sr.d)(wr,u,e,r);case 27:return l.next=29,Object(sr.d)(Dr,u,s,c);case 29:return l.next=31,Object(sr.d)(Nr,u,a);case 31:return l.next=33,Object(sr.d)(Tr,u,i);case 33:return l.next=35,Object(sr.d)(jr,u,o);case 35:case"end":return l.stop()}},dr)}var gr=function(e,t,n){var r=function(e,t){return Je(e).filter(function(e){return e.start===t})}(e,t),o=x.a.flatten(r.map(function(t){return cn(e,t.id)})).find(function(e){return e.read===n});if(!o)return console.log("no detail"),null;var a=r.find(function(e){return e.id===o.arrow});if(!a)throw new Error('Inconsistency in state: transition detail references nonexistent arrow "'.concat(o.arrow,'"'));var i=tt(e,a.id);return{nodeId:a.end,arrowId:a.id,controlPointId:i.id,transitionDetailId:o.id,writeSymbol:o.write,tapeDirection:o.move}};function wr(e,t,n){return ar.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(sr.e)(w(t));case 2:return r.next=4,Object(sr.c)(e/8);case 4:return r.next=6,Object(sr.e)(N(t));case 6:return r.next=8,Object(sr.e)(w(null));case 8:return r.next=10,Object(sr.c)(e/4);case 10:return r.next=12,Object(sr.e)(N(null));case 12:return r.next=14,Object(sr.c)(e/4);case 14:return r.next=16,Object(sr.e)(v(n));case 16:return r.next=18,Object(sr.e)(D(n));case 18:return r.next=20,Object(sr.c)(e/4);case 20:return r.next=22,Object(sr.e)(D(null));case 22:return r.next=24,Object(sr.e)(w(n));case 24:return r.next=26,Object(sr.c)(e/8);case 26:case"end":return r.stop()}},fr)}function Dr(e,t,n){return ar.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(sr.c)(e/4);case 2:return r.next=4,Object(sr.e)(g(!0));case 4:return r.next=6,Object(sr.c)(e/4);case 6:return r.next=8,Object(sr.e)(m(t));case 8:return r.next=10,Object(sr.c)(e/4);case 10:return r.next=12,Object(sr.e)(g(!1));case 12:return r.next=14,Object(sr.e)(f(n));case 14:case"end":return r.stop()}},mr)}function Nr(e,t){return ar.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(sr.c)(e/8);case 2:return n.next=4,Object(sr.e)(T(t));case 4:return n.next=6,Object(sr.c)(3*e/4);case 6:return n.next=8,Object(sr.e)(T(null));case 8:case"end":return n.stop()}},Or)}function Tr(e,t){return ar.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(sr.c)(e/4);case 2:return n.next=4,Object(sr.e)(S(t));case 4:return n.next=6,Object(sr.c)(e/2);case 6:return n.next=8,Object(sr.e)(S(null));case 8:case"end":return n.stop()}},hr)}function jr(e,t){return ar.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(sr.c)(e/4);case 2:return n.next=4,Object(sr.e)(j(t));case 4:return n.next=6,Object(sr.c)(e/2);case 6:return n.next=8,Object(sr.e)(j(null));case 8:case"end":return n.stop()}},yr)}function Sr(){return ar.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(sr.h)(y,Er,!0);case 2:return e.next=4,Object(sr.h)(b,Er,!1);case 4:case"end":return e.stop()}},br)}var Ar=ar.a.mark(Ir);function Ir(){return ar.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(sr.a)([ur(),Sr()]);case 2:case"end":return e.stop()}},Ar)}var Pr=Object(u.a)(),Cr=Object(c.createStore)(Jn,Object(l.composeWithDevTools)(Object(c.applyMiddleware)(function(e){return function(t){return function(n){if("KEY_DOWN"!==n.type)return t(n);var r=e.getState(),o=n.payload,a=o.key,i=o.event,s=zn[a];if(!s)return t(n);var c=s(r,i);return c?(t(n),t(c)):t(n)}}},function(e){return function(t){return function(n){if("ADD_TRANSITION_BETWEEN_SELECTED"!==n.type)return t(n);var r=e.getState(),o=Ie(r),a=o[0],i=o[1]||o[0],s=function(e,t,n){return Je(e).find(function(e){return e.start===t&&e.end===n})||null}(r,a,i);if(s)return t(d(s.id));var c=G()();return t(function(e,t,n){return{type:"ADD_ARROW",payload:{start:e,end:t,id:n}}}(a,i,c))}}},function(e){return function(t){return function(n){if("DELETE_TRANSITION_DETAIL"!==n.type)return t(n);var r=n.payload,o=r.id,a=r.arrow,i=e.getState();if(cn(i,a).filter(function(e){return e.id!==o}).length>0)return t(n);var s=tt(i,a).id;return t(O([],[a],[s],[o]))}}},function(e){return function(t){return function(n){if("DELETE_SELECTED_NODES"!==n.type)return t(n);var r=e.getState(),o=Ie(r),a=x.a.flatten(o.map(function(e){return function(e,t){return Je(e).filter(function(e){return e.start===t||e.end===t})}(r,e)})),i=x.a.uniq(x.a.flatten(a.map(function(e){return e.id}))),s=i.map(function(e){return tt(r,e)}).map(function(e){return e.id}),c=x.a.flatten(i.map(function(e){return cn(r,e)})).map(function(e){return e.id});return t(O(o,i,s,c))}}},function(e){return function(t){return function(n){if(!["ADD_TRANSITION_DETAIL","CHANGE_TRANSITION_DETAIL","DELETE_TRANSITION_DETAIL","DELETE_ENTITIES","ADD_ARROW"].includes(n.type))return t(n);t(n);var r=un(e.getState());return t({type:"MARK_DUPLICATE_TRANSITIONS",payload:{ids:r}})}}},function(e){return function(t){return function(n){if(![y,b].includes(n.type))return t(n);var r=e.getState();return function(e){return null!==F(e.entities.nodes).startNode}(r)?un(r).length>0?t(h("Nondeterministic transitions",er)):t(n):t(h("Missing start state",$n))}}},Pr,function(e){return function(e){return function(t){return[A,P].includes(t.type)?t.type===A?e(h("Machine Halted",nr)):t.type===P?e(h("Machine Halted",rr)):void 0:e(t)}}},function(e){return function(t){return function(n){if("LOAD_SNAPSHOT"!==n.type)return t(n);try{var r=localStorage.getItem("machine");if(!r)return;var o=JSON.parse(r);t(L(o))}catch(e){localStorage.clearItem("machine")}}}},function(e){return function(t){return function(n){if("SAVE_SNAPSHOT"!==n.type)return t(n);var r=e.getState(),o=B(r);try{localStorage.setItem("machine",JSON.stringify(o))}catch(a){return}}}},function(e){return function(t){return function(n){if("DOWNLOAD_MACHINE"!==n.type)return t(n);var r=e.getState(),o=B(r),a=JSON.stringify(o,null,"  "),i="data:application/json;charset=utf-8,".concat(encodeURIComponent(a)),s=Gn(r).toLowerCase().split(" ").join("-"),c=s.length>0?s:"untitled-machine",u=document.createElement("a");u.setAttribute("href",i),u.setAttribute("download",c),u.click()}}},function(e){return function(e){return function(t){if("UPLOAD_MACHINE"!==t.type)return e(t);function n(){return r.apply(this,arguments)}function r(){return(r=Object(ir.a)(ar.a.mark(function t(){var r,a;return ar.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o.removeEventListener("change",n),t.prev=1,t.next=4,this.files[0].text();case 4:return r=t.sent,a=JSON.parse(r),t.abrupt("return",e(L(a)));case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",e(h("Upload Error","We were unable to upload your machine. Please verify that you have selected a valid machine file.")));case 12:case"end":return t.stop()}},t,this,[[1,9]])}))).apply(this,arguments)}var o=document.createElement("input");o.type="file",o.accept=".json,.JSON",o.addEventListener("change",n),o.click()}}})));Pr.run(Ir);var Mr=Cr,kr=n(14),Lr=n.n(kr),Rr=(n(51),function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(Qn.a)(this,(e=Object(qn.a)(t)).call.apply(e,[this].concat(a)))).arrowRef=o.a.createRef(),n}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=Lr()("arrow",{"arrow--editable":this.props.isEditable}),t=this.props.isSelfLoop?this.computeCubicPathString():this.computeQuadraticPathString();return o.a.createElement("g",null,o.a.createElement("path",{className:e,d:t,ref:this.arrowRef}),this.renderGlow(t))}},{key:"computeQuadraticPathString",value:function(){var e=this.props,t=e.start,n=e.end,r=e.control,o=t.plus(n.minus(t).scale(.5)),a=o.plus(r.minus(o).scale(2));return"M ".concat(t.x," ").concat(t.y," Q ").concat(a.x," ").concat(a.y," ").concat(n.x," ").concat(n.y)}},{key:"computeCubicPathString",value:function(){var e=this.props,t=e.start,n=e.control.minus(t).scale(4/3),r=0!==n.magnitude()?n.perp().normalize().scale(80):new Y(80,0),o=t.plus(n).minus(r),a=t.plus(n).plus(r);return"M ".concat(t.x," ").concat(t.y," C ").concat(o.x," ").concat(o.y," ").concat(a.x," ").concat(a.y," ").concat(t.x," ").concat(t.y)}},{key:"renderGlow",value:function(e){if(this.props.isEditable||!this.props.isGlowing)return null;var t=this.arrowRef.current?this.arrowRef.current.getTotalLength():500;return o.a.createElement("path",{className:"arrow__glow",d:e,style:{strokeDasharray:t,strokeDashoffset:t,animationDuration:"".concat(3*this.props.simInterval/4,"ms")}})}}]),t}(o.a.Component)),xr=Object(s.b)(function(e,t){var n=je(e,t.details.start),r=je(e,t.details.end),o=tt(e,t.details.id);return{start:Y.from(n.pos),end:Y.from(r.pos),control:Y.from(o.pos),isSelfLoop:n.id===r.id,isEditable:Z(e),isGlowing:wt(e,t.details.id),simInterval:Tt(e)}})(Rr),Ur=(n(52),function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Qn.a)(this,(e=Object(qn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown()},n.handleMouseUp=function(e){n.props.mouseUp()},n.handleInputChange=function(e){n.props.changeMnemonic(e.target.value)},n.handleInputBlur=function(){n.props.blurMnemonic()},n}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.details.mnemonic,t=Lr()("node",{"node--selected":this.props.isSelected,"node--final":this.props.details.isFinal,"node--start":this.props.isStart,"node--editable":this.props.isEditable,"node--glowing":!this.props.isEditable&&this.props.isGlowing,"node--fading-in":!this.props.isEditable&&this.props.isFadingIn,"node--fading-out":!this.props.isEditable&&this.props.isFadingOut}),n=Lr()("node__mnemonic-input",{"node__mnemonic-input--editable":this.props.isEditable}),r=Y.from(this.props.details.pos),a=r.plus(new Y(-19,24));return o.a.createElement("div",{className:"node__container"},this.props.isCurrent&&this.props.isEditable&&o.a.createElement("div",{className:"node__current-marker",style:{position:"absolute",left:r.x-6,top:r.y-21-18-2}}),o.a.createElement("div",{className:t,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,style:{position:"absolute",left:r.x-21,top:r.y-21,animationDuration:"".concat(this.props.simInterval/4,"ms")}}),o.a.createElement("input",{className:n,disabled:!this.props.isEditable,value:e,onChange:this.handleInputChange,onBlur:this.handleInputBlur,type:"text",maxLength:4,style:{position:"absolute",left:a.x,top:a.y}}))}}]),t}(o.a.Component)),Gr=Object(s.b)(function(e,t){return{isSelected:Se(e,t.details.id),isStart:Pe(e,t.details.id),isEditable:Z(e),isCurrent:bt(e,t.details.id),isGlowing:_t(e,t.details.id),isFadingIn:vt(e,t.details.id),isFadingOut:gt(e,t.details.id),simInterval:Tt(e)}},function(e,t){return{changeMnemonic:function(n){return e(function(e,t){return{type:"CHANGE_MNEMONIC",payload:{id:e,value:t}}}(t.details.id,n))},blurMnemonic:function(){return e({type:"BLUR_MNEMONIC"})},mouseDown:function(){return e({type:"MOUSE_DOWN_NODE",payload:{id:t.details.id}})},mouseUp:function(){return e({type:"MOUSE_UP_NODE"})}}})(Ur),Wr=(n(53),function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Qn.a)(this,(e=Object(qn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown()},n.handleMouseUp=function(e){n.props.mouseUp()},n}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=Lr()("control-point",{"control-point--editable":this.props.isEditable,"control-point--glowing":!this.props.isEditable&&this.props.isGlowing}),t=this.props.isSelfLoop?this.computeCubicString():this.computeQuadraticPathString();return o.a.createElement("path",{className:e,d:t,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp})}},{key:"computeQuadraticPathString",value:function(){var e=this.props,t=e.start,n=e.end,r=Y.from(this.props.details.pos),o=n.minus(t),a=0!==o.magnitude()?o.normalize().scale(18):new Y(18,0),i=a.perp().scale(1/3),s=r.minus(a).plus(i),c=r.minus(a).minus(i);return"M ".concat(s.x," ").concat(s.y," L ").concat(r.x," ").concat(r.y," L ").concat(c.x," ").concat(c.y)}},{key:"computeCubicString",value:function(){var e=this.props.start,t=Y.from(this.props.details.pos),n=t.minus(e),r=0!==n.magnitude()?n.normalize():new Y(0,1),o=r.perp().scale(18),a=t.plus(o.scale(1/3)),i=a.minus(o).plus(r.scale(6)),s=a.minus(o).minus(r.scale(6));return"M ".concat(i.x," ").concat(i.y," L ").concat(a.x," ").concat(a.y," L ").concat(s.x," ").concat(s.y)}}]),t}(o.a.Component)),Fr=Object(s.b)(function(e,t){var n=ze(e,t.details.arrow),r=je(e,n.start),o=je(e,n.end);return{start:Y.from(r.pos),end:Y.from(o.pos),isSelfLoop:r.id===o.id,isEditable:Z(e),isGlowing:Dt(e,t.details.id)}},function(e,t){return{mouseDown:function(){return e({type:"MOUSE_DOWN_CONTROL_POINT",payload:{id:t.details.id}})},mouseUp:function(){return e({type:"MOUSE_UP_CONTROL_POINT"})}}})(Wr);n(54);function Br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Br(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Br(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Hr=function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(Qn.a)(this,(e=Object(qn.a)(t)).call.apply(e,[this].concat(a)))).readRef=o.a.createRef(),n.handleSelectChange=function(e){n.props.onChange&&n.changeDirection(e.target.value)},n.selectLeft=function(){n.changeDirection(Kt.L)},n.selectRight=function(){n.changeDirection(Kt.R)},n.handleFocus=function(){n.props.onFocus&&n.props.onFocus()},n.handleBlur=function(){n.props.onBlur&&n.props.onBlur()},n.handleDeleteClick=function(){n.props.onDelete&&n.props.onDelete()},n}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.detail,t=e.read,n=e.write,r=e.move,a=Lr()("transition-detail",{"transition-detail--glowing":!this.props.isEditable&&this.props.isGlowing}),i=Lr()("transition-detail__input",{"transition-detail__input--focus":this.props.isFocused,"transition-detail__input--editable":this.props.isEditable}),s=Lr()(i,{"transition-detail__input--error":this.props.detail.isDuplicate}),c=Lr()("transition-detail__selector",{"transition-detail__selector--focus":this.props.isFocused,"transition-detail__selector--editable":this.props.isEditable}),u=Lr()("transition-detail__delete-button",{"transition-detail__delete-button--hidden":!this.props.isEditable});return o.a.createElement("div",{className:a},o.a.createElement("input",{className:s,ref:this.readRef,disabled:!this.props.isEditable,value:t,placeholder:"\u2205",onChange:this.handleInputChange("read"),onFocus:this.handleFocus,onBlur:this.handleBlur,type:"text",maxLength:1}),o.a.createElement("span",{className:"transition-detail__separator"},"/"),o.a.createElement("input",{className:i,disabled:!this.props.isEditable,value:n,placeholder:"\u2205",onChange:this.handleInputChange("write"),onFocus:this.handleFocus,onBlur:this.handleBlur,type:"text",maxLength:1}),o.a.createElement("select",{className:c,disabled:!this.props.isEditable,value:r,onChange:this.handleSelectChange},o.a.createElement("option",{value:Kt.L,onMouseDown:this.selectLeft},"\u2190"),o.a.createElement("option",{value:Kt.R,onMouseDown:this.selectRight},"\u2192")),o.a.createElement("button",{className:u,onClick:this.handleDeleteClick}))}},{key:"componentDidMount",value:function(){this.props.isFocused&&this.focus()}},{key:"focus",value:function(){this.readRef.current&&this.readRef.current.focus()}},{key:"handleInputChange",value:function(e){var t=this;return function(n){t.props.onChange&&" "!==n.target.value&&t.props.onChange(Vr({},t.props.detail,Object(p.a)({},e,n.target.value)))}}},{key:"changeDirection",value:function(e){this.props.onChange&&this.props.onChange(Vr({},this.props.detail,{move:e}))}}]),t}(o.a.Component),Kr=(n(55),function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Qn.a)(this,(e=Object(qn.a)(t)).call.apply(e,[this].concat(o)))).handleDetailChange=function(e){n.props.changeDetail(e)},n}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.details,r=t.control,a=this.computeStance(),i=Lr()("transition-details","transition-details--".concat(a));return o.a.createElement("div",{className:i,style:{position:"absolute",left:r.x,top:r.y}},this.props.isEditable&&!this.isTopStance(a)&&this.renderAddDetailButton(),n.map(function(t){return o.a.createElement(Hr,{key:t.id,detail:t,isFocused:e.props.focusedDetail===t.id,isEditable:e.props.isEditable,isGlowing:e.props.glowingDetail===t.id,onChange:e.handleDetailChange,onDelete:e.handleDetailDelete(t.id,t.arrow),onFocus:e.handleDetailFocus(t.id),onBlur:e.handleDetailBlur(t.id)})}),this.props.isEditable&&this.isTopStance(a)&&this.renderAddDetailButton())}},{key:"handleDetailDelete",value:function(e,t){var n=this;return function(){return n.props.deleteDetail(e,t)}}},{key:"handleDetailFocus",value:function(e){var t=this;return function(){return t.props.focusDetail(e)}}},{key:"handleDetailBlur",value:function(e){var t=this;return function(){return t.props.blurDetail(e)}}},{key:"handleAddDetailButton",value:function(e){var t=this;return function(){return t.props.addDetail(e)}}},{key:"computeStance",value:function(){return this.props.isSelfLoop?this.computeSelfLoopStance():this.computeStandardStance()}},{key:"computeSelfLoopStance",value:function(){var e=this.props,t=e.start,n=e.control.minus(t).angle();return this.computeClassNameFromAngle(n)}},{key:"computeStandardStance",value:function(){var e=this.props,t=e.start,n=e.end,r=e.control.minus(t),o=r.project(n.minus(t)),a=r.minus(o).angle();return this.computeClassNameFromAngle(a)}},{key:"computeClassNameFromAngle",value:function(e){return 0<e&&e<=Math.PI/2?"top-left":Math.PI/2<e&&e<=Math.PI?"top-right":-Math.PI/2>e&&e>=-Math.PI?"bottom-right":"bottom-left"}},{key:"isTopStance",value:function(e){return/^top/.test(e)}},{key:"renderAddDetailButton",value:function(){return o.a.createElement("button",{className:"transition-details__add-button",onClick:this.handleAddDetailButton(this.props.arrowId)},"add new")}}]),t}(o.a.Component)),Yr=Object(s.b)(function(e,t){var n=ze(e,t.arrowId),r=je(e,n.start),o=je(e,n.end),a=tt(e,n.id);return{start:Y.from(r.pos),end:Y.from(o.pos),control:Y.from(a.pos),isSelfLoop:r.id===o.id,focusedDetail:ln(e),isEditable:Z(e),glowingDetail:Nt(e)}},function(e){return{changeDetail:function(t){return e(function(e){return{type:"CHANGE_TRANSITION_DETAIL",payload:{detail:e}}}(t))},deleteDetail:function(t,n){return e(function(e,t){return{type:"DELETE_TRANSITION_DETAIL",payload:{id:e,arrow:t}}}(t,n))},addDetail:function(t){return e(d(t))},focusDetail:function(t){return e(function(e){return{type:"FOCUS_TRANSIITON_DETAIL",payload:{id:e}}}(t))},blurDetail:function(t){return e(function(e){return{type:"BLUR_TRANSITION_DETAIL",payload:{id:e}}}(t))}}})(Kr),Jr=(n(56),function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Qn.a)(this,(e=Object(qn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseUp=function(e){n.props.add(n.props.pos)},n}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.pos;return t&&o.a.createElement("div",{className:"shadow-node",onMouseUp:this.handleMouseUp,style:{position:"absolute",left:n.x-21,top:n.y-21-2}})}}]),t}(o.a.Component)),zr=Object(s.b)(function(e){return{isVisible:ce(e),pos:oe(e)}},function(e){return{add:function(t){return e(function(e){return{type:"ADD_NODE",payload:{pos:e}}}(t))}}})(Jr),Qr=(n(57),function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Qn.a)(this,(e=Object(qn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown(n.computeMousePos(e))},n.handleMouseUp=function(){n.props.mouseUp()},n.handleMouseMove=function(e){e.preventDefault(),n.props.mouseMove(n.computeMousePos(e))},n}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props,t=e.arrows,n=e.nodes,r=e.controlPoints,a=e.transitionDetails;return o.a.createElement("div",{className:"canvas",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseMove:this.handleMouseMove},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},t.map(function(e){return o.a.createElement(xr,{key:e.id,details:e})}),r.map(function(e){return o.a.createElement(Fr,{key:e.id,details:e})})),n.map(function(e){return o.a.createElement(Gr,{key:e.id,details:e})}),Object.keys(a).map(function(e){return o.a.createElement(Yr,{key:e,arrowId:e,details:a[e]})}),o.a.createElement(zr,null))}},{key:"computeMousePos",value:function(e){var t=e.currentTarget.getBoundingClientRect(),n=t.left,r=t.top,o=e.clientX,a=e.clientY;return new Y(o-n,a-r)}}]),t}(o.a.Component)),qr=Object(s.b)(function(e){return{arrows:Je(e),nodes:Te(e),controlPoints:et(e),transitionDetails:sn(e)}},function(e){return{mouseDown:function(t){return e(function(e){return{type:"MOUSE_DOWN_CANVAS",payload:{pos:e}}}(t))},mouseUp:function(){return e({type:"MOUSE_UP_CANVAS"})},mouseMove:function(t){return e(function(e){return{type:"MOUSE_MOVE_CANVAS",payload:{pos:e}}}(t))}}})(Qr),Xr=function(e){switch(Ie(e).length){case 0:return[Zr.ADD_STATE];case 1:return[Zr.ADD_STATE,Zr.REMOVE_STATE,Zr.ADD_SELF_TRANSITION,Zr.MAKE_START,Zr.TOGGLE_ACCEPTING];case 2:return[Zr.ADD_STATE,Zr.REMOVE_TWO_STATES,Zr.ADD_TRANSITION,Zr.TOGGLE_TWO_ACCEPTING];default:return[Zr.ADD_STATE,Zr.REMOVE_MANY_STATES,Zr.TOGGLE_MANY_ACCEPTING]}},Zr={ADD_STATE:"ADD_STATE",REMOVE_STATE:"REMOVE_STATE",REMOVE_TWO_STATES:"REMOVE_TWO_STATES",REMOVE_MANY_STATES:"REMOVE_MANY_STATES",ADD_SELF_TRANSITION:"ADD_SELF_TRANSITION",ADD_TRANSITION:"ADD_TRANSITION",MAKE_START:"MAKE_START",UNMAKE_START:"UNMAKE_START",TOGGLE_ACCEPTING:"TOGGLE_ACCEPTING",TOGGLE_TWO_ACCEPTING:"TOGGLE_TWO_ACCEPTING",TOGGLE_MANY_ACCEPTING:"TOGGLE_MANY_ACCEPTING"},$r=(n(58),function(e){function t(){var e,n,r;Object(H.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(r=Object(Qn.a)(this,(e=Object(qn.a)(t)).call.apply(e,[this].concat(a)))).handleUndoButtonClick=function(){r.props.undo()},r.handleRedoButtonClick=function(){r.props.redo()},r.buttonConfig=(n={},Object(p.a)(n,Zr.ADD_STATE,{action:function(){return r.props.addState()},className:"add-state",title:"add new state"}),Object(p.a)(n,Zr.REMOVE_STATE,{action:function(){return r.props.removeStates()},className:"remove-state",title:"remove state"}),Object(p.a)(n,Zr.REMOVE_TWO_STATES,{action:function(){return r.props.removeStates()},className:"remove-two-states",title:"remove states"}),Object(p.a)(n,Zr.REMOVE_MANY_STATES,{action:function(){return r.props.removeStates()},className:"remove-many-states",title:"remove states"}),Object(p.a)(n,Zr.ADD_SELF_TRANSITION,{action:function(){return r.props.addTransition()},className:"add-self-transition",title:"add self transition"}),Object(p.a)(n,Zr.ADD_TRANSITION,{action:function(){return r.props.addTransition()},className:"add-transition",title:"add transition"}),Object(p.a)(n,Zr.MAKE_START,{action:function(){return r.props.makeStart()},className:"make-start",title:"distinguish as initial state"}),Object(p.a)(n,Zr.TOGGLE_ACCEPTING,{action:function(){return r.props.toggleFinal()},className:"toggle-accepting",title:"toggle state's status as final"}),Object(p.a)(n,Zr.TOGGLE_TWO_ACCEPTING,{action:function(){return r.props.toggleFinal()},className:"toggle-two-accepting",title:"toggle states' statuses as final"}),Object(p.a)(n,Zr.TOGGLE_MANY_ACCEPTING,{action:function(){return r.props.toggleFinal()},className:"toggle-many-accepting",title:"toggle states' statuses as final"}),n),r}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"edit-controls"},o.a.createElement("div",{className:"edit-controls__undo-redo-buttons"},o.a.createElement("button",{className:"edit-controls__button edit-controls__undo-button",title:"undo",onClick:this.handleUndoButtonClick}),o.a.createElement("button",{className:"edit-controls__button edit-controls__redo-button",title:"redo",onClick:this.handleRedoButtonClick})),this.props.inEditMode&&this.props.buttonTypes.map(function(t){var n=e.buttonConfig[t];return n&&o.a.createElement("button",{className:"edit-controls__button edit-controls__".concat(n.className,"-button"),title:n.title,key:t,onClick:n.action})}))}}]),t}(o.a.Component)),eo=Object(s.b)(function(e){return{inEditMode:Z(e),buttonTypes:Xr(e)}},function(e){return{undo:function(){return e({type:"UNDO"})},redo:function(){return e({type:"REDO"})},addState:function(){return e({type:"START_ADDING_NODE"})},removeStates:function(){return e({type:"DELETE_SELECTED_NODES"})},addTransition:function(){return e({type:"ADD_TRANSITION_BETWEEN_SELECTED"})},makeStart:function(){return e({type:"MAKE_SELECTED_START_NODE"})},toggleFinal:function(){return e({type:"TOGGLE_SELECTED_FINAL_NODES"})}}})($r),to=(n(59),function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Qn.a)(this,(e=Object(qn.a)(t)).call.apply(e,[this].concat(o)))).handleNewClick=function(){n.props.newMachine()},n.handleDownloadClick=function(){n.props.download()},n.handleUploadClick=function(){n.props.upload()},n}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"app-controls"},o.a.createElement("div",{className:"app-controls__buttons"},o.a.createElement("button",{className:"app-controls__button app-controls__new-button",title:"new empty machine",onClick:this.handleNewClick}),o.a.createElement("button",{className:"app-controls__button app-controls__download-button",title:"download machine (JSON)",onClick:this.handleDownloadClick}),o.a.createElement("button",{className:"app-controls__button app-controls__upload-button",title:"upload machine (JSON)",onClick:this.handleUploadClick})),o.a.createElement("a",{className:"app-controls__link",href:"#examples"},"Examples"),o.a.createElement("a",{className:"app-controls__link",href:"".concat("/tm","/tutorial.html"),target:"_blank",rel:"noopener noreferrer"},"Tutorial"),o.a.createElement("a",{className:"app-controls__link",href:"".concat("/tm","/guide.html"),target:"_blank",rel:"noopener noreferrer"},"Guide"),o.a.createElement("a",{className:"app-controls__link",href:"".concat("/tm","/about.html"),target:"_blank",rel:"noopener noreferrer"},"About"),o.a.createElement("a",{className:"app-controls__link app-controls__source-link",href:"https://github.com/wjlewis/tm",target:"_blank",rel:"noopener noreferrer"},"<Source/>"))}}]),t}(o.a.Component)),no=Object(s.b)(null,function(e){return{newMachine:function(){return e({type:"NEW_MACHINE"})},download:function(){return e({type:"DOWNLOAD_MACHINE"})},upload:function(){return e({type:"UPLOAD_MACHINE"})}}})(to),ro=(n(60),function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(Qn.a)(this,(e=Object(qn.a)(t)).call.apply(e,[this].concat(a)))).tapeRef=o.a.createRef(),n.handleScroll=function(e){n.props.updateScrollLeft(e.target.scrollLeft)},n.handleClearButtonClick=function(){n.props.clear()},n}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this,t=this.props.isEditable,n=Lr()("tape__cell",{"tape__cell--editable":t});return o.a.createElement(o.a.Fragment,null,this.renderReadHead(),o.a.createElement("div",{className:"tape",ref:this.tapeRef,onScroll:this.handleScroll,style:{width:"".concat(720,"px")}},o.a.createElement("div",{className:"tape__cells"},o.a.createElement("div",{className:"tape__padding-left",style:{width:360}},"\u21d0\u2002this half intentionally left blank"),this.props.entries.map(function(t,r){return o.a.createElement("input",{key:r,disabled:!e.props.isEditable,className:n,value:t,placeholder:"\u2205",onChange:e.handleCellChange(r),onFocus:e.handleCellFocus(r),style:{width:"".concat(36,"px")},type:"text",maxLength:1})}),o.a.createElement("div",{className:"tape__padding-right",style:{width:"".concat(18,"px")}}))),this.renderFeeders(),this.renderClearButton(),this.renderReadWriteOverlay())}},{key:"componentDidMount",value:function(){this.tapeRef.current&&this.tapeRef.current.scrollTo(18,0)}},{key:"componentDidUpdate",value:function(e){e.focusedCell!==this.props.focusedCell&&null!==this.props.focusedCell&&this.updateFocus(),e.activeCell!==this.props.activeCell&&this.centerActive(!0),e.isEditable===this.props.isEditable||this.props.isEditable||this.centerActive(!1)}},{key:"updateFocus",value:function(){if(this.tapeRef.current){var e=this.tapeRef.current.childNodes[0].childNodes[this.props.focusedCell+1];e&&e.focus()}}},{key:"handleCellChange",value:function(e){var t=this;return function(n){" "!==n.target.value&&t.props.changeCell(e,n.target.value)}}},{key:"handleCellFocus",value:function(e){var t=this;return function(){t.props.focusCell(e)}}},{key:"centerActive",value:function(e){if(this.tapeRef.current){var t=36*this.props.activeCell+18;this.tapeRef.current.scrollTo({left:t,top:0,behavior:e?"smooth":"auto"})}}},{key:"renderReadHead",value:function(){var e=Lr()("tape-reader",{"tape-reader--active":!this.props.isEditable});return o.a.createElement("div",{className:e,style:{position:"absolute",left:"calc(50% - ".concat(18,"px)")}})}},{key:"renderReadWriteOverlay",value:function(){var e=Lr()("tape-read-write-overlay",{"tape-read-write-overlay--writing":this.props.isWriting});return o.a.createElement("div",{className:e,style:{position:"absolute",left:"calc(50% - ".concat(18,"px)"),animationDuration:"".concat(this.props.simInterval/2,"ms")}})}},{key:"renderClearButton",value:function(){return o.a.createElement("button",{className:"tape__clear-button",title:"clear tape contents",onClick:this.handleClearButtonClick,style:{position:"absolute",right:"calc(50% - ".concat(430,"px)")}})}},{key:"renderFeeders",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"tape-feed tape-feed__left",style:{position:"absolute",left:"calc(50% - ".concat(366,"px)")}}),o.a.createElement("div",{className:"tape-feed tape-feed__right",style:{position:"absolute",right:"calc(50% - ".concat(366,"px)")}}))}}]),t}(o.a.Component)),oo=Object(s.b)(function(e){return{entries:Yt(e),isEditable:Z(e),focusedCell:Jt(e),activeCell:Et(e),isWriting:ht(e),simInterval:Tt(e)}},function(e){return{changeCell:function(t,n){return e(function(e,t){return{type:"CHANGE_TAPE_CELL",payload:{pos:e,value:t}}}(t,n))},updateScrollLeft:function(t){return e(function(e){return{type:"UPDATE_SCROLL_LEFT",payload:{scrollLeft:e}}}(t))},focusCell:function(t){return e(function(e){return{type:"FOCUS_TAPE_CELL",payload:{pos:e}}}(t))},clear:function(){return e({type:"CLEAR_TAPE"})}}})(ro),ao=(n(61),function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Qn.a)(this,(e=Object(qn.a)(t)).call.apply(e,[this].concat(o)))).reset=function(){n.props.reset()},n.togglePlayPause=function(){n.props.isInEditMode?n.props.play():n.props.pause()},n.step=function(){n.props.step()},n.handleSpeedChange=function(e){n.props.setIntervalDivisor(Number(e.target.value))},n}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.isInEditMode,t=Lr()("sim-controls__button",e?"sim-controls__play-button":"sim-controls__pause-button");return o.a.createElement("div",{className:"sim-controls"},o.a.createElement("button",{className:"sim-controls__button sim-controls__reset-button",title:"reset simulation",onClick:this.reset}),o.a.createElement("button",{className:t,title:e?"play simulation":"pause simulation",onClick:this.togglePlayPause}),o.a.createElement("button",{className:"sim-controls__button sim-controls__step-button",title:"run a single step of the simulation",disabled:!e,onClick:this.step}),o.a.createElement("div",{className:"sim-controls__speed-control"},o.a.createElement("span",{className:"sim-controls__speed-control-label"},"slow"),o.a.createElement("input",{type:"range",value:this.props.intervalDivisor,min:1,max:15,onChange:this.handleSpeedChange}),o.a.createElement("span",{className:"sim-controls__speed-control-label"},"fast")))}}]),t}(o.a.Component)),io=Object(s.b)(function(e){return{isInEditMode:Z(e),intervalDivisor:jt(e)}},function(e){return{reset:function(){return e({type:_})},pause:function(){return e({type:E})},step:function(){return e({type:y})},play:function(){return e({type:b})},setIntervalDivisor:function(t){return e(function(e){return{type:"SET_SIM_INTERVAL_DIVISOR",payload:{divisor:e}}}(t))}}})(ao),so=(n(62),function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Qn.a)(this,(e=Object(qn.a)(t)).call.apply(e,[this].concat(o)))).handleNameChange=function(e){n.props.changeName(e.target.value)},n}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){return o.a.createElement("input",{className:"name-input",type:"text",value:this.props.name,onChange:this.handleNameChange,placeholder:"Machine name"})}}]),t}(o.a.Component)),co=Object(s.b)(function(e){return{name:Gn(e)}},function(e){return{changeName:function(t){return e(function(e){return{type:"CHANGE_MACHINE_NAME",payload:{name:e}}}(t))}}})(so),uo=(n(63),function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Qn.a)(this,(e=Object(qn.a)(t)).call.apply(e,[this].concat(o)))).handleMessageClick=function(e){e.stopPropagation()},n.dismiss=function(){n.props.dismiss()},n}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){return this.props.show&&o.a.createElement("div",{className:"message__container",onClick:this.dismiss},o.a.createElement("div",{className:"message",onClick:this.handleMessageClick},o.a.createElement("h1",{className:"message__title"},this.props.title),o.a.createElement("div",{className:"message__content"},this.props.content),o.a.createElement("button",{className:"message__dismiss-button",onClick:this.dismiss},"Dismiss")))}}]),t}(o.a.Component)),lo=Object(s.b)(function(e){return{show:Cn(e),title:Mn(e),content:kn(e)}},function(e){return{dismiss:function(){return e({type:"DISMISS_MESSAGE"})}}})(uo),po=(n(64),function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(Qn.a)(this,(e=Object(qn.a)(t)).call.apply(e,[this].concat(o)))).handleKeyDown=function(e){n.props.keyDown(e.key,e)},n.handleKeyUp=function(e){n.props.keyUp(e.key)},n}return Object(Xn.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement(qr,null),o.a.createElement(co,null),o.a.createElement(oo,null),o.a.createElement(eo,null),o.a.createElement(no,null),o.a.createElement(io,null),o.a.createElement(lo,null))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp),this.props.loadSaved()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}}]),t}(o.a.Component)),fo=Object(s.b)(null,function(e){return{keyDown:function(t,n){return e(function(e,t){return{type:"KEY_DOWN",payload:{key:e,event:t}}}(t,n))},keyUp:function(t){return e(function(e){return{type:"KEY_UP",payload:{key:e}}}(t))},loadSaved:function(){return e({type:"LOAD_SNAPSHOT"})}}})(po);n(65);i.a.render(o.a.createElement(s.a,{store:Mr},o.a.createElement(fo,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.f6ced9f8.chunk.js.map