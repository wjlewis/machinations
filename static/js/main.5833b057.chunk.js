(window.webpackJsonpmachinations=window.webpackJsonpmachinations||[]).push([[0],{36:function(e,t,n){e.exports=n(66)},48:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(22),i=n.n(a),s=n(12),c=n(19),u=n(35),l=n(33),p=n(3),d=function(e){return{type:"ADD_TRANSITION_DETAIL",payload:{arrow:e}}},f=function(e){return{type:"MOVE_TAPE",payload:{direction:e}}},m=function(e){return{type:"WRITE_TAPE_SYMBOL",payload:{symbol:e}}},O=function(e,t,n,r){return{type:"DELETE_ENTITIES",payload:{nodes:e,arrows:t,controlPoints:n,transitionDetails:r}}},h=function(e,t){return{type:"DISPLAY_MESSAGE",payload:{title:e,content:t}}},y="STEP_SIM",b="PLAY_SIM",E="PAUSE_SIM",_="RESET_SIM",v=function(){return{type:_}},g=function(e){return{type:"SET_CURRENT_NODE",payload:{node:e}}},w=function(e){return{type:"SET_TAPE_WRITING_STATUS",payload:{isWriting:e}}},D=function(e){return{type:"SET_GLOWING_NODE",payload:{node:e}}},N=function(e){return{type:"SET_FADE_IN_NODE",payload:{node:e}}},T=function(e){return{type:"SET_FADE_OUT_NODE",payload:{node:e}}},j=function(e){return{type:"SET_GLOWING_ARROW",payload:{arrow:e}}},S=function(e){return{type:"SET_GLOWING_CONTROL_POINT",payload:{controlPoint:e}}},A=function(e){return{type:"SET_GLOWING_TRANSITION_DETAIL",payload:{transitionDetail:e}}},I="HALT_ACCEPT",P=function(){return{type:I}},C="HALT_REJECT",M=function(){return{type:C}},k=function(e){return{type:"SWITCH_MODE",payload:{mode:e}}},L=function(){return{type:"SAVE_SNAPSHOT"}},R=function(e){return{type:"INSTALL_SNAPSHOT",payload:{snapshot:e}}},x=n(5),U=n.n(x),G=n(20),W=n.n(G);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var B=function(e){return e.wip||e.committed},V=function(e){return U.a.get(e,"entities")},H=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{entities:U.a.mapValues(t,function(e){return U.a.mapValues(e,function(e,t){return"wip"===t?null:e})})})},K=n(7),Y=n(8),J=function(){function e(t,n){Object(K.a)(this,e),this.x=t,this.y=n}return Object(Y.a)(e,[{key:"magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalize",value:function(){var t=this.magnitude();if(0===t)throw new Error("Cannot normalize 0 vector");return new e(this.x/t,this.y/t)}},{key:"perp",value:function(){return new e(-this.y,this.x)}},{key:"plus",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"minus",value:function(e){return this.plus(e.scale(-1))}},{key:"scale",value:function(t){return new e(t*this.x,t*this.y)}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"project",value:function(e){return e.scale(this.dot(e)/e.dot(e))}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}}],[{key:"from",value:function(t){return new e(t.x,t.y)}}]),e}(),z=n(16),Q=function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var X={EDIT:"EDIT",SIM:"SIM"},Z={mode:X.EDIT},$=function(e){return e.mode.mode===X.EDIT},ee=function(e,t){switch(t.type){case"SWITCH_MODE":return te(e,t.payload.mode);default:return e.mode}},te=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.mode,{mode:t})};function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var oe={mousePos:new J(0,0),keysDown:[],isMouseDownNode:!1,isMouseDownControlPoint:!1,isAddingNode:!1,wasMouseReleasedOverNode:!1,wasMouseDragged:!1,wasMnemonicChanged:!1},ae=function(e){return e.ui.mousePos},ie=function(e){return e.ui.keysDown.includes("Shift")},se=function(e){return e.ui.isMouseDownNode},ce=function(e){return e.ui.isMouseDownControlPoint},ue=function(e){return e.ui.isAddingNode},le=function(e){return e.ui.wasMouseDragged},pe=function(e,t){if(!$(e))return e.ui;switch(t.type){case"KEY_DOWN":return de(e,t.payload.key);case"KEY_UP":return fe(e,t.payload.key);case"MOUSE_DOWN_NODE":return me(e);case"MOUSE_UP_NODE":return Oe(e);case"MOUSE_DOWN_CONTROL_POINT":return he(e);case"MOUSE_UP_CONTROL_POINT":return ye(e);case"MOUSE_DOWN_CANVAS":return be(e);case"MOUSE_UP_CANVAS":return Ee(e);case"START_ADDING_NODE":return _e(e);case"ADD_NODE":return ve(e);case"MOUSE_MOVE_CANVAS":return ge(e,t.payload.pos);case"CHANGE_MNEMONIC":return we(e);case"BLUR_MNEMONIC":return De(e);default:return e.ui}},de=function(e,t){return re({},e.ui,{keysDown:U.a.uniq([].concat(Object(z.a)(e.ui.keysDown),[t]))})},fe=function(e,t){return re({},e.ui,{keysDown:e.ui.keysDown.filter(function(e){return e!==t})})},me=function(e){return re({},e.ui,{isMouseDownNode:!0})},Oe=function(e){return re({},e.ui,{isMouseDownNode:!1,wasMouseReleasedOverNode:!0})},he=function(e){return re({},e.ui,{isMouseDownControlPoint:!0})},ye=function(e){return re({},e.ui,{isMouseDownControlPoint:!1})},be=function(e){return re({},e.ui,{wasMouseDragged:!1})},Ee=function(e){return re({},e.ui,{isMouseDownNode:!1,isMouseDownControlPoint:!1,wasMouseReleasedOverNode:!1})},_e=function(e){return re({},e.ui,{isAddingNode:!0})},ve=function(e){return re({},e.ui,{isAddingNode:!1,wasMouseReleasedOverNode:!0})},ge=function(e,t){return re({},e.ui,{mousePos:t,wasMouseDragged:!0})},we=function(e){return re({},e.ui,{wasMnemonicChanged:!0})},De=function(e){return re({},e.ui,{wasMnemonicChanged:!1})};function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var je=function(e){return Object.values(B(e.entities.nodes).byId)},Se=function(e,t){var n=je(e).find(function(e){return e.id===t});if(!n)throw new Error('No Node with ID "'.concat(t,'"'));return n},Ae=function(e,t){return B(e.entities.nodes).selected.includes(t)},Ie=function(e,t){return B(e.entities.nodes).byId[t].isFinal},Pe=function(e){return B(e.entities.nodes).selected},Ce=function(e,t){var n=B(e.entities.nodes).startNode;return null!==n&&n===t},Me=function(e,t){if(!$(e))return e.entities.nodes;switch(t.type){case"ADD_NODE":return ke(e,t.payload.pos);case"ADD_ARROW":return Le(e,t.payload.start,t.payload.end);case"DELETE_ENTITIES":return Re(e,t.payload.nodes);case"MAKE_SELECTED_START_NODE":return xe(e);case"TOGGLE_SELECTED_FINAL_NODES":return Ue(e);case"CHANGE_MNEMONIC":return Ge(e,t.payload.id,t.payload.value);case"BLUR_MNEMONIC":return We(e);case"SELECT_ALL_NODES":return Fe(e);case"MOUSE_DOWN_NODE":return Be(e,t.payload.id);case"MOUSE_UP_NODE":return Ve(e);case"MOUSE_DOWN_CANVAS":return He(e,t.payload.pos);case"MOUSE_UP_CANVAS":return Ke(e);case"MOUSE_MOVE_CANVAS":return Ye(e,t.payload.pos);default:return e.entities.nodes}},ke=function(e,t){var n=W()(),r={id:n,pos:t,mnemonic:"",isFinal:!1};return{wip:null,committed:U.a.mergeWith({},e.entities.nodes.committed,{byId:Object(p.a)({},n,r)},function(e,t,r){return"selected"===r?[n]:void 0})}},Le=function(e,t,n){return{wip:null,committed:Te({},e.entities.nodes.committed,{selected:t!==n?[]:e.entities.nodes.committed.selected})}},Re=function(e,t){var n=e.entities.nodes.committed;return{wip:null,committed:Te({},n,{byId:U.a.omit(n.byId,t),selected:[],startNode:n.startNode&&t.includes(n.startNode)?null:n.startNode})}},xe=function(e){return{wip:null,committed:U.a.merge({},e.entities.nodes.committed,{startNode:e.entities.nodes.committed.selected[0]})}},Ue=function(e){var t=Pe(e).map(function(t){return Se(e,t)}),n=t.some(function(e){return e.isFinal}),r=t.reduce(function(e,t){return Te({},e,Object(p.a)({},t.id,Te({},t,{isFinal:!n})))},{});return{wip:null,committed:U.a.merge({},e.entities.nodes.committed,{byId:Te({},r)})}},Ge=function(e,t,n){return Te({},e.entities.nodes,{wip:U.a.merge({},B(e.entities.nodes),{byId:Object(p.a)({},t,{mnemonic:n})})})},We=function(e){return{wip:null,committed:B(e.entities.nodes)}},Fe=function(e){return{wip:null,committed:Te({},e.entities.nodes.committed,{selected:Object.keys(e.entities.nodes.committed.byId)})}},Be=function(e,t){var n,r,o=e.entities.nodes,a=o.committed.selected;return{wip:null,committed:Te({},o.committed,{selected:ie(e)?(n=t,r=a,r.includes(n)?r.filter(function(e){return e!==n}):[].concat(Object(z.a)(r),[n])):a.includes(t)?a:[t]})}},Ve=function(e){return{wip:null,committed:Te({},B(e.entities.nodes),{offsets:{}})}},He=function(e,t){if(!se(e))return e.entities.nodes;var n=e.entities.nodes,r=n.committed.selected.reduce(function(e,r){var o=n.committed.byId[r];return Te({},e,Object(p.a)({},r,J.from(o.pos).minus(t)))},{});return Te({},n,{wip:Te({},n.committed,{offsets:r})})},Ke=function(e){return function(e){return e.ui.wasMouseReleasedOverNode}(e)?e.entities.nodes:{wip:null,committed:Te({},e.entities.nodes.committed,{selected:ie(e)?e.entities.nodes.committed.selected:[]})}},Ye=function(e,t){var n=e.entities.nodes;if(!se(e)||!n.wip)return n;var r=Object.keys(n.wip.offsets).reduce(function(e,r){var o=n.wip.byId[r],a=t.plus(n.wip.offsets[r]);return Te({},e,Object(p.a)({},r,Te({},o,{pos:a})))},{});return U.a.merge({},n,{wip:{byId:Te({},r)}})};function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var ze=function(e){return Object.values(e.entities.arrows.byId)},Qe=function(e,t){var n=e.entities.arrows.byId[t];if(!n)throw new Error('No Arrow with ID "'.concat(t,'"'));return n},qe=function(e,t){if(!$(e))return e.entities.arrows;switch(t.type){case"ADD_ARROW":return Xe(e,t.payload.start,t.payload.end,t.payload.id);case"DELETE_ENTITIES":return Ze(e,t.payload.arrows);default:return e.entities.arrows}},Xe=function(e,t,n,r){return U.a.merge({},e.entities.arrows,{byId:Object(p.a)({},r,{start:t,end:n,id:r})})},Ze=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.entities.arrows,{byId:U.a.omit(e.entities.arrows.byId,t)})};function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tt=function(e){return Object.values(B(e.entities.controlPoints).byId)},nt=function(e,t){var n=tt(e).find(function(e){return e.arrow===t});if(!n)throw new Error('No ControlPoint associated with Arrow having ID "'.concat(t,'"'));return n},rt=function(e,t){if(!$(e))return e.entities.controlPoints;switch(t.type){case"ADD_ARROW":return ot(e,t.payload.start,t.payload.end,t.payload.id);case"DELETE_ENTITIES":return at(e,t.payload.controlPoints);case"MOUSE_DOWN_CONTROL_POINT":return it(e,t.payload.id);case"MOUSE_UP_CONTROL_POINT":return st(e);case"MOUSE_DOWN_CANVAS":return ct(e,t.payload.pos);case"MOUSE_MOVE_CANVAS":return pt(e,t.payload.pos);case"MOUSE_UP_CANVAS":case"MOUSE_UP_NODE":return mt(e);default:return e.entities.controlPoints}},ot=function(e,t,n,r){var o=W()(),a=J.from(Se(e,t).pos),i=t===n?a:J.from(Se(e,n).pos),s=t===n?a.minus(new J(0,90)):function(e,t){var n=t.minus(e),r=0!==n.magnitude()?n.perp().normalize().scale(-1):new J(0,-1);return n.scale(.5).plus(r).plus(e)}(a,i);return{wip:null,committed:U.a.merge({},e.entities.controlPoints.committed,{byId:Object(p.a)({},o,{id:o,arrow:r,pos:s})})}},at=function(e,t){return{wip:null,committed:et({},e.entities.controlPoints.committed,{byId:U.a.omit(e.entities.controlPoints.committed.byId,t)})}},it=function(e,t){return et({},e.entities.controlPoints,{wip:null,committed:et({},e.entities.controlPoints.committed,{selected:t})})},st=function(e){return{wip:null,committed:et({},B(e.entities.controlPoints),{selected:null,selectedOffset:null})}},ct=function(e,t){return ce(e)?ut(e,t):se(e)?lt(e,t):e.entities.controlPoints},ut=function(e,t){var n=e.entities.controlPoints.committed;if(!n.selected)return e.entities.controlPoints;var r=n.byId[n.selected],o=J.from(r.pos).minus(t);return et({},e.entities.controlPoints,{wip:U.a.merge({},n,{selectedOffset:o})})},lt=function(e,t){var n=e.entities.controlPoints.committed,r=Pe(e),o=Object.values(n.byId).filter(function(t){var n=Qe(e,t.arrow);return r.includes(n.start)&&r.includes(n.end)}).reduce(function(e,n){return et({},e,Object(p.a)({},n.id,new J(n.pos.x-t.x,n.pos.y-t.y)))},{}),a=Object.values(n.byId).reduce(function(n,o){var a,i,s=Qe(e,o.arrow),c=r.includes(s.start),u=r.includes(s.end);if(i=u,!(a=c)&&!i||a&&i)return n;var l=J.from(Se(e,u?s.start:s.end).pos),d=J.from(Se(e,c?s.start:s.end).pos),f=d.minus(t),m=l.minus(d),O=J.from(o.pos).minus(d),h=O.project(m),y=h.magnitude()/m.magnitude(),b=O.minus(h),E=(b.dot(h.perp())>0?1:-1)*b.magnitude();return et({},n,Object(p.a)({},o.id,{fixedPos:l,movingOffset:f,fractionAlong:y,perpLength:E}))},{});return et({},e.entities.controlPoints,{wip:et({},n,{fullOffsets:o,halfOffsets:a})})},pt=function(e,t){return ce(e)?dt(e,t):se(e)?ft(e,t):e.entities.controlPoints},dt=function(e,t){var n=e.entities.controlPoints;if(!n.wip||!n.wip.selected||!n.wip.selectedOffset)return n;var r=n.wip.byId[n.wip.selected],o=t.plus(J.from(n.wip.selectedOffset));return et({},n,{wip:U.a.merge({},n.wip,{byId:Object(p.a)({},r.id,et({},r,{pos:o}))})})},ft=function(e,t){var n=e.entities.controlPoints;if(!n.wip)return n;var r=Object.keys(n.wip.fullOffsets).reduce(function(e,r){var o=n.wip.byId[r],a=t.plus(J.from(n.wip.fullOffsets[r]));return et({},e,Object(p.a)({},r,et({},o,{pos:a})))},{}),o=Object.keys(n.wip.halfOffsets).reduce(function(e,r){var o=n.wip.byId[r],a=n.wip.halfOffsets[r],i=a.fixedPos,s=a.movingOffset,c=a.fractionAlong,u=a.perpLength,l=t.plus(s),d=i.minus(l),f=d.scale(c).plus(l),m=0!==d.magnitude()?d.perp().normalize().scale(u).plus(f):new J(0,-80).plus(f);return et({},e,Object(p.a)({},r,et({},o,{pos:m})))},{});return et({},n,{wip:U.a.merge({},n.wip,{byId:et({},r,{},o)})})},mt=function(e){return et({},e.entities.controlPoints,{wip:null,committed:et({},B(e.entities.controlPoints),{selected:null,selectedOffset:null,fullOffsets:{},halfOffsets:{}})})};function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var yt=function(e){return e.sim.isTapeWriting},bt=function(e){return e.sim.currentNode?e.sim.currentNode:function(e){var t=B(e.entities.nodes).startNode;if(null===t)throw new Error("No start node has been distinguished.");return t}(e)},Et=function(e,t){return e.sim.currentNode?e.sim.currentNode===t:Ce(e,t)},_t=function(e){return e.sim.activeTapeCell},vt=function(e,t){return e.sim.glowingNode===t},gt=function(e,t){return e.sim.fadeInNode===t},wt=function(e,t){return e.sim.fadeOutNode===t},Dt=function(e,t){return e.sim.glowingArrow===t},Nt=function(e,t){return e.sim.glowingControlPoint===t},Tt=function(e){return e.sim.glowingTransitionDetail},jt=function(e){return Math.floor(4e3/e.sim.intervalDivisor)},St=function(e){return e.sim.intervalDivisor},At=function(e,t){switch(t.type){case y:return It(e);case b:return Pt(e);case _:return Ct(e);case"SET_SIM_INTERVAL_DIVISOR":return Mt(e,t.payload.divisor);case"SET_CURRENT_NODE":return kt(e,t.payload.node);case"SET_TAPE_WRITING_STATUS":return Lt(e,t.payload.isWriting);case"MOVE_TAPE":return Rt(e,t.payload.direction);case"SET_GLOWING_NODE":return xt(e,t.payload.node);case"SET_FADE_IN_NODE":return Ut(e,t.payload.node);case"SET_FADE_OUT_NODE":return Gt(e,t.payload.node);case"SET_GLOWING_ARROW":return Wt(e,t.payload.arrow);case"SET_GLOWING_CONTROL_POINT":return Ft(e,t.payload.controlPoint);case"SET_GLOWING_TRANSITION_DETAIL":return Bt(e,t.payload.transitionDetail);default:return e.sim}},It=function(e){return ht({},e.sim,{hasStarted:!0,initialTapeEntries:e.sim.hasStarted?e.sim.initialTapeEntries:Jt(e)})},Pt=function(e){return ht({},e.sim,{hasStarted:!0,initialTapeEntries:e.sim.hasStarted?e.sim.initialTapeEntries:Jt(e)})},Ct=function(e){return ht({},e.sim,{hasStarted:!1,initialTapeEntries:null,currentNode:null,activeTapeCell:0,isTapeWriting:!1,glowingNode:null,fadeInNode:null,fadeOutNode:null,glowingArrow:null,glowingControlPoint:null,glowingTransitionDetail:null})},Mt=function(e,t){return ht({},e.sim,{intervalDivisor:t})},kt=function(e,t){return ht({},e.sim,{currentNode:t})},Lt=function(e,t){return ht({},e.sim,{isTapeWriting:t})},Rt=function(e,t){return ht({},e.sim,{activeTapeCell:t===Yt.R?Math.max(0,e.sim.activeTapeCell-1):e.sim.activeTapeCell+1})},xt=function(e,t){return ht({},e.sim,{glowingNode:t})},Ut=function(e,t){return ht({},e.sim,{fadeInNode:t})},Gt=function(e,t){return ht({},e.sim,{fadeOutNode:t})},Wt=function(e,t){return ht({},e.sim,{glowingArrow:t})},Ft=function(e,t){return ht({},e.sim,{glowingControlPoint:t})},Bt=function(e,t){return ht({},e.sim,{glowingTransitionDetail:t})};function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Kt={entries:Q("",20),scrollLeft:0,focused:null},Yt={L:"L",R:"R"},Jt=function(e){return e.entities.tape.entries},zt=function(e){return e.entities.tape.focused},Qt=function(e){var t=_t(e);return e.entities.tape.entries[t]},qt=function(e,t){switch(t.type){case"CHANGE_TAPE_CELL":return Xt(e,t.payload.pos,t.payload.value);case"UPDATE_SCROLL_LEFT":return en(e,t.payload.scrollLeft);case"FOCUS_TAPE_CELL":return Zt(e,t.payload.pos);case"CLEAR_TAPE":return $t(e);case"WRITE_TAPE_SYMBOL":return nn(e,t.payload.symbol);case _:return rn(e);default:return e.entities.tape}},Xt=function(e,t,n){return Ht({},e.entities.tape,{entries:U.a.update(U.a.clone(e.entities.tape.entries),t,function(e){return n}),focused:n.length>0&&null!==e.entities.tape.focused?e.entities.tape.focused+1:e.entities.tape.focused})},Zt=function(e,t){return Ht({},e.entities.tape,{focused:t})},$t=function(e){return Kt},en=function(e,t){return Ht({},e.entities.tape,{entries:tn(e.entities.tape.entries,t),scrollLeft:t})},tn=function(e,t){var n=e.length-Math.floor(t/36);return n<20?[].concat(Object(z.a)(e),Object(z.a)(Q("",20))):n>40&&e.slice(-20).every(function(e){return 0===e.length})?e.slice(0,-20):e},nn=function(e,t){var n=e.entities.tape,r=_t(e);return Ht({},n,{entries:U.a.set(U.a.clone(n.entries),r,t)})},rn=function(e){var t=function(e){return e.sim.initialTapeEntries}(e);return Ht({},e.entities.tape,{entries:t||e.entities.tape.entries})};function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var sn=function(e){return Object.values(e.entities.transitionDetails.byId)},cn=function(e){return U.a.groupBy(sn(e),function(e){return e.arrow})},un=function(e,t){return cn(e)[t]},ln=function(e){var t=Object.values(function(e){return U.a.groupBy(sn(e),function(t){return Qe(e,t.arrow).start})}(e)).map(function(e){return Object.values(U.a.groupBy(e,function(e){return e.read}))}).map(function(e){return e.filter(function(e){return e.length>1})});return U.a.flattenDeep(t).map(function(e){return e.id})},pn=function(e){return e.entities.transitionDetails.focused},dn=function(e,t){if(!$(e))return e.entities.transitionDetails;switch(t.type){case"ADD_TRANSITION_DETAIL":return fn(e,t.payload.arrow);case"ADD_ARROW":return mn(e,t.payload.id);case"CHANGE_TRANSITION_DETAIL":return On(e,t.payload.detail);case"DELETE_TRANSITION_DETAIL":return hn(e,t.payload.id);case"DELETE_ENTITIES":return yn(e,t.payload.transitionDetails);case"FOCUS_TRANSIITON_DETAIL":return bn(e,t.payload.id);case"BLUR_TRANSITION_DETAIL":return En(e);case"MARK_DUPLICATE_TRANSITIONS":return _n(e,t.payload.ids);default:return e.entities.transitionDetails}},fn=function(e,t){var n=W()(),r={id:n,arrow:t,read:"",write:"",move:Yt.L,isFocused:!1};return U.a.merge({},e.entities.transitionDetails,{byId:Object(p.a)({},n,r),focused:n})},mn=function(e,t){return fn(e,t)},On=function(e,t){return U.a.merge({},e.entities.transitionDetails,{byId:Object(p.a)({},t.id,t)})},hn=function(e,t){var n=e.entities.transitionDetails;return an({},n,{byId:U.a.omit(n.byId,t)})},yn=function(e,t){return an({},e.entities.transitionDetails,{byId:U.a.omit(e.entities.transitionDetails.byId,t)})},bn=function(e,t){return an({},e.entities.transitionDetails,{focused:t})},En=function(e){return an({},e.entities.transitionDetails,{focused:null})},_n=function(e,t){return an({},e.entities.transitionDetails,{byId:U.a.mapValues(e.entities.transitionDetails.byId,function(e){return an({},e,{isDuplicate:t.includes(e.id)})})})},vn=n(29);function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Dn=function(e,t){if(!$(e))return e.undoRedo;switch(t.type){case"MOUSE_UP_NODE":return Nn(e);case"MOUSE_UP_CONTROL_POINT":return Tn(e);case"ADD_NODE":return In(e,"add node");case"BLUR_MNEMONIC":return jn(e);case"MAKE_SELECTED_START_NODE":return In(e,"change initial state");case"TOGGLE_SELECTED_FINAL_NODES":return In(e,'toggle "final" status for selected states');case"ADD_ARROW":case"ADD_TRANSITION_DETAIL":return In(e,"add new transition");case"DELETE_ENTITIES":return In(e,"delete entities");case"CHANGE_TRANSITION_DETAIL":return In(e,"change transition");case"CHANGE_TAPE_CELL":return In(e,"change tape cell");case"CLEAR_TAPE":return In(e,"clear tape");default:return e.undoRedo}},Nn=function(e){return le(e)?In(e,"move node"):e.undoRedo},Tn=function(e){return le(e)?In(e,"move control point"):e.undoRedo},jn=function(e){return function(e){return e.ui.wasMnemonicChanged}(e)?In(e,"change mnemonic"):e.undoRedo},Sn=function(e){if(0===e.undoRedo.actions.length)return e;var t=Object(vn.a)(e.undoRedo.actions),n=t[0],r=t.slice(1),o=wn({},n,{value:V(e)});return wn({},H(e,n.value),{undoRedo:wn({},e.undoRedo,{actions:r,redoable:[o].concat(Object(z.a)(e.undoRedo.redoable))})})},An=function(e){if(0===e.undoRedo.redoable.length)return e;var t=Object(vn.a)(e.undoRedo.redoable),n=t[0],r=t.slice(1),o=wn({},n,{value:V(e)});return wn({},H(e,n.value),{undoRedo:wn({},e.undoRedo,{actions:[o].concat(Object(z.a)(e.undoRedo.actions)),redoable:r})})},In=function(e,t){return{actions:[{description:t,value:V(e)}].concat(Object(z.a)(e.undoRedo.actions.slice(0,32))),redoable:[]}};function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Mn=function(e){return e.message.show},kn=function(e){return e.message.title},Ln=function(e){return e.message.content},Rn=function(e,t){switch(t.type){case"DISPLAY_MESSAGE":return xn(e,t.payload.title,t.payload.content);case"DISMISS_MESSAGE":return Un(e);default:return e.message}},xn=function(e,t,n){return Cn({},e.message,{show:!0,title:t,content:void 0!==n?n:null})},Un=function(e){return Cn({},e.message,{show:!1,title:null,content:null})};function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Wn=function(e){return e.entities.metaData.name},Fn=function(e,t){switch(t.type){case"CHANGE_MACHINE_NAME":return Bn(e,t.payload.name);default:return e.entities.metaData}},Bn=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.entities.metaData,{name:t})},Vn={entities:{nodes:{wip:null,committed:{byId:{},selected:[],offsets:{},startNode:null}},arrows:{byId:{}},controlPoints:{wip:null,committed:{byId:{},selected:null,selectedOffset:null,fullOffsets:{},halfOffsets:{}}},transitionDetails:{byId:{},focused:null},tape:Kt,metaData:{name:"Untitled"}},ui:oe,undoRedo:{actions:[],redoable:[]},message:{show:!1,title:null,content:null},mode:Z,sim:{hasStarted:!1,initialTapeEntries:null,currentNode:null,activeTapeCell:0,isTapeWriting:!1,glowingNode:null,fadeInNode:null,fadeOutNode:null,glowingArrow:null,glowingControlPoint:null,glowingTransitionDetail:null,intervalDivisor:4}};function Hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hn(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Yn=function(e,t){return Kn({},H(e,t),{undoRedo:In(e,"install entity snapshot")})},Jn=function(e){var t=V(Vn);return Kn({},H(e,t),{undoRedo:In(e,"create new machine")})},zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UNDO":return Sn(e);case"REDO":return An(e);case"INSTALL_SNAPSHOT":return Yn(e,t.payload.snapshot);case"NEW_MACHINE":return Jn(e);default:return Kn({},e,{entities:Kn({},e.entities,{nodes:Me(e,t),arrows:qe(e,t),controlPoints:rt(e,t),transitionDetails:dn(e,t),tape:qt(e,t),metaData:Fn(e,t)}),ui:pe(e,t),undoRedo:Dn(e,t),message:Rn(e,t),mode:ee(e,t),sim:At(e,t)})}},Qn={a:function(e,t){return t.ctrlKey?{type:"SELECT_ALL_NODES"}:null},k:function(e,t){return t.ctrlKey?{type:"DELETE_SELECTED_NODES"}:null}," ":function(e,t){return t.ctrlKey?(t.preventDefault(),{type:"START_ADDING_NODE"}):null},t:function(e,t){return Pe(e).length>0&&t.ctrlKey?(t.preventDefault(),{type:"ADD_TRANSITION_BETWEEN_SELECTED"}):null},f:function(e,t){return Pe(e).length>0&&t.ctrlKey?{type:"TOGGLE_SELECTED_FINAL_NODES"}:null},i:function(e,t){return 1===Pe(e).length&&t.ctrlKey?{type:"MAKE_SELECTED_START_NODE"}:null},z:function(e,t){return t.ctrlKey||t.metaKey?{type:"UNDO"}:null},y:function(e,t){return t.ctrlKey||t.metaKey?(t.preventDefault(),{type:"REDO"}):null}},qn=n(11),Xn=n(9),Zn=n(10),$n=(n(48),function(e){function t(){return Object(K.a)(this,t),Object(qn.a)(this,Object(Xn.a)(t).apply(this,arguments))}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"error-report"},o.a.createElement("div",{className:"error-report__section"},o.a.createElement("span",{className:"error-report__title"},"What's wrong:\u2002"),o.a.createElement("span",{className:"error-report__content"},this.props.whatsWrong)),o.a.createElement("div",{className:"error-report__section"},o.a.createElement("span",{className:"error-report__title"},"How to fix it:\u2002"),o.a.createElement("span",{className:"error-report__content"},this.props.howToFix)))}}]),t}(o.a.Component)),er=o.a.createElement($n,{whatsWrong:"In order for the machine to start, a state must be distinguished as the initial or start state. You have not yet identified any state as such.",howToFix:'Select one of your machine states and click the "Make Start State" button to distinguish it as the initial state.'}),tr=o.a.createElement($n,{whatsWrong:"At the moment, you have 2 or more transitions from the same state with the same read symbol. Such nondeterministic behavior is not supported.",howToFix:"Find all transitions whose read symbols are marked red, and modify or remove the associated transitions so that all transitions for each state have distinct read symbols"}),nr=(n(49),function(e){function t(){return Object(K.a)(this,t),Object(qn.a)(this,Object(Xn.a)(t).apply(this,arguments))}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props.accepted;return o.a.createElement("div",{className:"halt-report"},o.a.createElement("div",{className:"halt-report__title"},"The machine has\xa0",o.a.createElement("span",{className:"halt-report__result halt-report__result--".concat(e?"accepted":"rejected")},e?"accepted":"rejected"),"\xa0the input string."))}}]),t}(o.a.Component)),rr=o.a.createElement(nr,{accepted:!0}),or=o.a.createElement(nr,{accepted:!1}),ar=n(13),ir=n.n(ar),sr=n(34),cr=n(2),ur=ir.a.mark(lr);function lr(){var e;return ir.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=5e3;case 1:return t.next=4,Object(cr.c)(e);case 4:return t.next=6,Object(cr.e)(L());case 6:t.next=1;break;case 8:case"end":return t.stop()}},ur)}var pr=ir.a.mark(_r),dr=ir.a.mark(vr),fr=ir.a.mark(gr),mr=ir.a.mark(Dr),Or=ir.a.mark(Nr),hr=ir.a.mark(Tr),yr=ir.a.mark(jr),br=ir.a.mark(Sr),Er=ir.a.mark(Ar);function _r(e){var t;return ir.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(cr.d)(vr,e);case 2:return t=n.sent,n.next=5,Object(cr.g)([E,_,I,C]);case 5:return n.next=7,Object(cr.b)(t);case 7:case"end":return n.stop()}},pr)}function vr(e){return ir.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(cr.e)(k(X.SIM));case 3:if(!e){t.next=8;break}return t.next=6,gr();case 6:t.next=13;break;case 8:return t.next=11,gr();case 11:t.next=8;break;case 13:return t.prev=13,t.next=16,Object(cr.e)(k(X.EDIT));case 16:return t.finish(13);case 17:case"end":return t.stop()}},dr,null,[[0,,13,17]])}function gr(){var e,t,n,r,o,a,i,s,c,u;return ir.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(cr.f)(bt);case 2:return e=l.sent,l.next=5,Object(cr.f)(Qt);case 5:return t=l.sent,l.next=8,Object(cr.f)(wr,e,t);case 8:if(n=l.sent){l.next=23;break}return l.next=12,Object(cr.f)(function(t){return Ie(t,e)});case 12:if(!l.sent){l.next=18;break}return l.next=16,Object(cr.e)(P());case 16:l.next=20;break;case 18:return l.next=20,Object(cr.e)(M());case 20:return l.next=22,Object(cr.e)(v());case 22:return l.abrupt("return");case 23:return r=n.nodeId,o=n.controlPointId,a=n.arrowId,i=n.transitionDetailId,s=n.writeSymbol,c=n.tapeDirection,l.next=26,Object(cr.f)(jt);case 26:return u=l.sent,l.next=29,Object(cr.d)(Dr,u,e,r);case 29:return l.next=31,Object(cr.d)(Nr,u,s,c);case 31:return l.next=33,Object(cr.d)(Tr,u,a);case 33:return l.next=35,Object(cr.d)(jr,u,i);case 35:return l.next=37,Object(cr.d)(Sr,u,o);case 37:case"end":return l.stop()}},fr)}var wr=function(e,t,n){var r=function(e,t){return ze(e).filter(function(e){return e.start===t})}(e,t),o=U.a.flatten(r.map(function(t){return un(e,t.id)})).find(function(e){return e.read===n});if(!o)return console.log("no detail"),null;var a=r.find(function(e){return e.id===o.arrow});if(!a)throw new Error('Inconsistency in state: transition detail references nonexistent arrow "'.concat(o.arrow,'"'));var i=nt(e,a.id);return{nodeId:a.end,arrowId:a.id,controlPointId:i.id,transitionDetailId:o.id,writeSymbol:o.write,tapeDirection:o.move}};function Dr(e,t,n){return ir.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(cr.e)(D(t));case 2:return r.next=4,Object(cr.c)(e/8);case 4:return r.next=6,Object(cr.e)(T(t));case 6:return r.next=8,Object(cr.e)(D(null));case 8:return r.next=10,Object(cr.c)(e/4);case 10:return r.next=12,Object(cr.e)(T(null));case 12:return r.next=14,Object(cr.c)(e/4);case 14:return r.next=16,Object(cr.e)(g(n));case 16:return r.next=18,Object(cr.e)(N(n));case 18:return r.next=20,Object(cr.c)(e/4);case 20:return r.next=22,Object(cr.e)(N(null));case 22:return r.next=24,Object(cr.e)(D(n));case 24:return r.next=26,Object(cr.c)(e/8);case 26:case"end":return r.stop()}},mr)}function Nr(e,t,n){return ir.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(cr.c)(e/4);case 2:return r.next=4,Object(cr.e)(w(!0));case 4:return r.next=6,Object(cr.c)(e/4);case 6:return r.next=8,Object(cr.e)(m(t));case 8:return r.next=10,Object(cr.c)(e/4);case 10:return r.next=12,Object(cr.e)(w(!1));case 12:return r.next=14,Object(cr.e)(f(n));case 14:case"end":return r.stop()}},Or)}function Tr(e,t){return ir.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(cr.c)(e/8);case 2:return n.next=4,Object(cr.e)(j(t));case 4:return n.next=6,Object(cr.c)(3*e/4);case 6:return n.next=8,Object(cr.e)(j(null));case 8:case"end":return n.stop()}},hr)}function jr(e,t){return ir.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(cr.c)(e/4);case 2:return n.next=4,Object(cr.e)(A(t));case 4:return n.next=6,Object(cr.c)(e/2);case 6:return n.next=8,Object(cr.e)(A(null));case 8:case"end":return n.stop()}},yr)}function Sr(e,t){return ir.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(cr.c)(e/4);case 2:return n.next=4,Object(cr.e)(S(t));case 4:return n.next=6,Object(cr.c)(e/2);case 6:return n.next=8,Object(cr.e)(S(null));case 8:case"end":return n.stop()}},br)}function Ar(){return ir.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(cr.h)(y,_r,!0);case 2:return e.next=4,Object(cr.h)(b,_r,!1);case 4:case"end":return e.stop()}},Er)}var Ir=ir.a.mark(Pr);function Pr(){return ir.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(cr.a)([lr(),Ar()]);case 2:case"end":return e.stop()}},Ir)}var Cr=Object(u.a)(),Mr=Object(c.createStore)(zn,Object(l.composeWithDevTools)(Object(c.applyMiddleware)(function(e){return function(t){return function(n){if("KEY_DOWN"!==n.type)return t(n);var r=e.getState(),o=n.payload,a=o.key,i=o.event,s=Qn[a];if(!s)return t(n);var c=s(r,i);return c?(t(n),t(c)):t(n)}}},function(e){return function(t){return function(n){if("ADD_TRANSITION_BETWEEN_SELECTED"!==n.type)return t(n);var r=e.getState(),o=Pe(r),a=o[0],i=o[1]||o[0],s=function(e,t,n){return ze(e).find(function(e){return e.start===t&&e.end===n})||null}(r,a,i);if(s)return t(d(s.id));var c=W()();return t(function(e,t,n){return{type:"ADD_ARROW",payload:{start:e,end:t,id:n}}}(a,i,c))}}},function(e){return function(t){return function(n){if("DELETE_TRANSITION_DETAIL"!==n.type)return t(n);var r=n.payload,o=r.id,a=r.arrow,i=e.getState();if(un(i,a).filter(function(e){return e.id!==o}).length>0)return t(n);var s=nt(i,a).id;return t(O([],[a],[s],[o]))}}},function(e){return function(t){return function(n){if("DELETE_SELECTED_NODES"!==n.type)return t(n);var r=e.getState(),o=Pe(r),a=U.a.flatten(o.map(function(e){return function(e,t){return ze(e).filter(function(e){return e.start===t||e.end===t})}(r,e)})),i=U.a.uniq(U.a.flatten(a.map(function(e){return e.id}))),s=i.map(function(e){return nt(r,e)}).map(function(e){return e.id}),c=U.a.flatten(i.map(function(e){return un(r,e)})).map(function(e){return e.id});return t(O(o,i,s,c))}}},function(e){return function(t){return function(n){if(!["ADD_TRANSITION_DETAIL","CHANGE_TRANSITION_DETAIL","DELETE_TRANSITION_DETAIL","DELETE_ENTITIES","ADD_ARROW"].includes(n.type))return t(n);t(n);var r=ln(e.getState());return t({type:"MARK_DUPLICATE_TRANSITIONS",payload:{ids:r}})}}},function(e){return function(t){return function(n){if(![y,b].includes(n.type))return t(n);var r=e.getState();return function(e){return null!==B(e.entities.nodes).startNode}(r)?ln(r).length>0?t(h("Nondeterministic transitions",tr)):t(n):t(h("Missing start state",er))}}},Cr,function(e){return function(e){return function(t){return[I,C].includes(t.type)?t.type===I?e(h("Machine Halted",rr)):t.type===C?e(h("Machine Halted",or)):void 0:e(t)}}},function(e){return function(t){return function(n){if("LOAD_SNAPSHOT"!==n.type)return t(n);try{var r=localStorage.getItem("machine");if(!r)return;var o=JSON.parse(r);t(R(o))}catch(e){localStorage.clearItem("machine")}}}},function(e){return function(t){return function(n){if("SAVE_SNAPSHOT"!==n.type)return t(n);var r=e.getState(),o=V(r);try{localStorage.setItem("machine",JSON.stringify(o))}catch(a){return}}}},function(e){return function(t){return function(n){if("DOWNLOAD_MACHINE"!==n.type)return t(n);var r=e.getState(),o=V(r),a=JSON.stringify(o,null,"  "),i="data:application/json;charset=utf-8,".concat(encodeURIComponent(a)),s=Wn(r).toLowerCase().split(" ").join("-"),c=s.length>0?s:"untitled-machine",u=document.createElement("a");u.setAttribute("href",i),u.setAttribute("download",c),u.click()}}},function(e){return function(e){return function(t){if("UPLOAD_MACHINE"!==t.type)return e(t);function n(){return r.apply(this,arguments)}function r(){return(r=Object(sr.a)(ir.a.mark(function t(){var r,a;return ir.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o.removeEventListener("change",n),t.prev=1,t.next=4,this.files[0].text();case 4:return r=t.sent,a=JSON.parse(r),t.abrupt("return",e(R(a)));case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",e(h("Upload Error","We were unable to upload your machine. Please verify that you have selected a valid machine file.")));case 12:case"end":return t.stop()}},t,this,[[1,9]])}))).apply(this,arguments)}var o=document.createElement("input");o.type="file",o.accept=".json,.JSON",o.addEventListener("change",n),o.click()}}})));Cr.run(Pr);var kr=Mr,Lr=n(14),Rr=n.n(Lr),xr=(n(51),function(e){function t(){var e,n;Object(K.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(qn.a)(this,(e=Object(Xn.a)(t)).call.apply(e,[this].concat(a)))).arrowRef=o.a.createRef(),n}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=Rr()("arrow",{"arrow--editable":this.props.isEditable}),t=this.props.isSelfLoop?this.computeCubicPathString():this.computeQuadraticPathString();return o.a.createElement("g",null,o.a.createElement("path",{className:e,d:t,ref:this.arrowRef}),this.renderGlow(t))}},{key:"computeQuadraticPathString",value:function(){var e=this.props,t=e.start,n=e.end,r=e.control,o=t.plus(n.minus(t).scale(.5)),a=o.plus(r.minus(o).scale(2));return"M ".concat(t.x," ").concat(t.y," Q ").concat(a.x," ").concat(a.y," ").concat(n.x," ").concat(n.y)}},{key:"computeCubicPathString",value:function(){var e=this.props,t=e.start,n=e.control.minus(t).scale(4/3),r=0!==n.magnitude()?n.perp().normalize().scale(80):new J(80,0),o=t.plus(n).minus(r),a=t.plus(n).plus(r);return"M ".concat(t.x," ").concat(t.y," C ").concat(o.x," ").concat(o.y," ").concat(a.x," ").concat(a.y," ").concat(t.x," ").concat(t.y)}},{key:"renderGlow",value:function(e){if(this.props.isEditable||!this.props.isGlowing)return null;var t=this.arrowRef.current?this.arrowRef.current.getTotalLength():500;return o.a.createElement("path",{className:"arrow__glow",d:e,style:{strokeDasharray:t,strokeDashoffset:t,animationDuration:"".concat(3*this.props.simInterval/4,"ms")}})}}]),t}(o.a.Component)),Ur=Object(s.b)(function(e,t){var n=Se(e,t.details.start),r=Se(e,t.details.end),o=nt(e,t.details.id);return{start:J.from(n.pos),end:J.from(r.pos),control:J.from(o.pos),isSelfLoop:n.id===r.id,isEditable:$(e),isGlowing:Dt(e,t.details.id),simInterval:jt(e)}})(xr),Gr=(n(52),function(e){function t(){var e,n;Object(K.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(qn.a)(this,(e=Object(Xn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown()},n.handleMouseUp=function(e){n.props.mouseUp()},n.handleInputChange=function(e){n.props.changeMnemonic(e.target.value)},n.handleInputBlur=function(){n.props.blurMnemonic()},n}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props.details.mnemonic,t=Rr()("node",{"node--selected":this.props.isSelected,"node--final":this.props.details.isFinal,"node--start":this.props.isStart,"node--editable":this.props.isEditable,"node--glowing":!this.props.isEditable&&this.props.isGlowing,"node--fading-in":!this.props.isEditable&&this.props.isFadingIn,"node--fading-out":!this.props.isEditable&&this.props.isFadingOut}),n=Rr()("node__mnemonic-input",{"node__mnemonic-input--editable":this.props.isEditable}),r=J.from(this.props.details.pos),a=r.plus(new J(-19,24));return o.a.createElement("div",{className:"node__container"},this.props.isCurrent&&this.props.isEditable&&o.a.createElement("div",{className:"node__current-marker",style:{position:"absolute",left:r.x-6,top:r.y-21-18-2}}),o.a.createElement("div",{className:t,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,style:{position:"absolute",left:r.x-21,top:r.y-21,animationDuration:"".concat(this.props.simInterval/4,"ms")}}),o.a.createElement("input",{className:n,disabled:!this.props.isEditable,value:e,onChange:this.handleInputChange,onBlur:this.handleInputBlur,type:"text",maxLength:4,style:{position:"absolute",left:a.x,top:a.y}}))}}]),t}(o.a.Component)),Wr=Object(s.b)(function(e,t){return{isSelected:Ae(e,t.details.id),isStart:Ce(e,t.details.id),isEditable:$(e),isCurrent:Et(e,t.details.id),isGlowing:vt(e,t.details.id),isFadingIn:gt(e,t.details.id),isFadingOut:wt(e,t.details.id),simInterval:jt(e)}},function(e,t){return{changeMnemonic:function(n){return e(function(e,t){return{type:"CHANGE_MNEMONIC",payload:{id:e,value:t}}}(t.details.id,n))},blurMnemonic:function(){return e({type:"BLUR_MNEMONIC"})},mouseDown:function(){return e({type:"MOUSE_DOWN_NODE",payload:{id:t.details.id}})},mouseUp:function(){return e({type:"MOUSE_UP_NODE"})}}})(Gr),Fr=(n(53),function(e){function t(){var e,n;Object(K.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(qn.a)(this,(e=Object(Xn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown()},n.handleMouseUp=function(e){n.props.mouseUp()},n}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=Rr()("control-point",{"control-point--editable":this.props.isEditable,"control-point--glowing":!this.props.isEditable&&this.props.isGlowing}),t=this.props.isSelfLoop?this.computeCubicString():this.computeQuadraticPathString();return o.a.createElement("path",{className:e,d:t,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp})}},{key:"computeQuadraticPathString",value:function(){var e=this.props,t=e.start,n=e.end,r=J.from(this.props.details.pos),o=n.minus(t),a=0!==o.magnitude()?o.normalize().scale(18):new J(18,0),i=a.perp().scale(1/3),s=r.minus(a).plus(i),c=r.minus(a).minus(i);return"M ".concat(s.x," ").concat(s.y," L ").concat(r.x," ").concat(r.y," L ").concat(c.x," ").concat(c.y)}},{key:"computeCubicString",value:function(){var e=this.props.start,t=J.from(this.props.details.pos),n=t.minus(e),r=0!==n.magnitude()?n.normalize():new J(0,1),o=r.perp().scale(18),a=t.plus(o.scale(1/3)),i=a.minus(o).plus(r.scale(6)),s=a.minus(o).minus(r.scale(6));return"M ".concat(i.x," ").concat(i.y," L ").concat(a.x," ").concat(a.y," L ").concat(s.x," ").concat(s.y)}}]),t}(o.a.Component)),Br=Object(s.b)(function(e,t){var n=Qe(e,t.details.arrow),r=Se(e,n.start),o=Se(e,n.end);return{start:J.from(r.pos),end:J.from(o.pos),isSelfLoop:r.id===o.id,isEditable:$(e),isGlowing:Nt(e,t.details.id)}},function(e,t){return{mouseDown:function(){return e({type:"MOUSE_DOWN_CONTROL_POINT",payload:{id:t.details.id}})},mouseUp:function(){return e({type:"MOUSE_UP_CONTROL_POINT"})}}})(Fr);n(54);function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Kr=function(e){function t(){var e,n;Object(K.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(qn.a)(this,(e=Object(Xn.a)(t)).call.apply(e,[this].concat(a)))).readRef=o.a.createRef(),n.handleSelectChange=function(e){n.props.onChange&&n.changeDirection(e.target.value)},n.selectLeft=function(){n.changeDirection(Yt.L)},n.selectRight=function(){n.changeDirection(Yt.R)},n.handleFocus=function(){n.props.onFocus&&n.props.onFocus()},n.handleBlur=function(){n.props.onBlur&&n.props.onBlur()},n.handleDeleteClick=function(){n.props.onDelete&&n.props.onDelete()},n}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props.detail,t=e.read,n=e.write,r=e.move,a=Rr()("transition-detail",{"transition-detail--glowing":!this.props.isEditable&&this.props.isGlowing}),i=Rr()("transition-detail__input",{"transition-detail__input--focus":this.props.isFocused,"transition-detail__input--editable":this.props.isEditable}),s=Rr()(i,{"transition-detail__input--error":this.props.detail.isDuplicate}),c=Rr()("transition-detail__selector",{"transition-detail__selector--focus":this.props.isFocused,"transition-detail__selector--editable":this.props.isEditable}),u=Rr()("transition-detail__delete-button",{"transition-detail__delete-button--hidden":!this.props.isEditable});return o.a.createElement("div",{className:a},o.a.createElement("input",{className:s,ref:this.readRef,disabled:!this.props.isEditable,value:t,placeholder:"\u2205",onChange:this.handleInputChange("read"),onFocus:this.handleFocus,onBlur:this.handleBlur,type:"text",maxLength:1}),o.a.createElement("span",{className:"transition-detail__separator"},"/"),o.a.createElement("input",{className:i,disabled:!this.props.isEditable,value:n,placeholder:"\u2205",onChange:this.handleInputChange("write"),onFocus:this.handleFocus,onBlur:this.handleBlur,type:"text",maxLength:1}),o.a.createElement("select",{className:c,disabled:!this.props.isEditable,value:r,onChange:this.handleSelectChange},o.a.createElement("option",{value:Yt.L,onMouseDown:this.selectLeft},"\u2190"),o.a.createElement("option",{value:Yt.R,onMouseDown:this.selectRight},"\u2192")),o.a.createElement("button",{className:u,onClick:this.handleDeleteClick}))}},{key:"componentDidMount",value:function(){this.props.isFocused&&this.focus()}},{key:"focus",value:function(){this.readRef.current&&this.readRef.current.focus()}},{key:"handleInputChange",value:function(e){var t=this;return function(n){t.props.onChange&&" "!==n.target.value&&t.props.onChange(Hr({},t.props.detail,Object(p.a)({},e,n.target.value)))}}},{key:"changeDirection",value:function(e){this.props.onChange&&this.props.onChange(Hr({},this.props.detail,{move:e}))}}]),t}(o.a.Component),Yr=(n(55),function(e){function t(){var e,n;Object(K.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(qn.a)(this,(e=Object(Xn.a)(t)).call.apply(e,[this].concat(o)))).handleDetailChange=function(e){n.props.changeDetail(e)},n}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.details,r=t.control,a=this.computeStance(),i=Rr()("transition-details","transition-details--".concat(a));return o.a.createElement("div",{className:i,style:{position:"absolute",left:r.x,top:r.y}},this.props.isEditable&&!this.isTopStance(a)&&this.renderAddDetailButton(),n.map(function(t){return o.a.createElement(Kr,{key:t.id,detail:t,isFocused:e.props.focusedDetail===t.id,isEditable:e.props.isEditable,isGlowing:e.props.glowingDetail===t.id,onChange:e.handleDetailChange,onDelete:e.handleDetailDelete(t.id,t.arrow),onFocus:e.handleDetailFocus(t.id),onBlur:e.handleDetailBlur(t.id)})}),this.props.isEditable&&this.isTopStance(a)&&this.renderAddDetailButton())}},{key:"handleDetailDelete",value:function(e,t){var n=this;return function(){return n.props.deleteDetail(e,t)}}},{key:"handleDetailFocus",value:function(e){var t=this;return function(){return t.props.focusDetail(e)}}},{key:"handleDetailBlur",value:function(e){var t=this;return function(){return t.props.blurDetail(e)}}},{key:"handleAddDetailButton",value:function(e){var t=this;return function(){return t.props.addDetail(e)}}},{key:"computeStance",value:function(){return this.props.isSelfLoop?this.computeSelfLoopStance():this.computeStandardStance()}},{key:"computeSelfLoopStance",value:function(){var e=this.props,t=e.start,n=e.control.minus(t).angle();return this.computeClassNameFromAngle(n)}},{key:"computeStandardStance",value:function(){var e=this.props,t=e.start,n=e.end,r=e.control.minus(t),o=r.project(n.minus(t)),a=r.minus(o).angle();return this.computeClassNameFromAngle(a)}},{key:"computeClassNameFromAngle",value:function(e){return 0<e&&e<=Math.PI/2?"top-left":Math.PI/2<e&&e<=Math.PI?"top-right":-Math.PI/2>e&&e>=-Math.PI?"bottom-right":"bottom-left"}},{key:"isTopStance",value:function(e){return/^top/.test(e)}},{key:"renderAddDetailButton",value:function(){return o.a.createElement("button",{className:"transition-details__add-button",onClick:this.handleAddDetailButton(this.props.arrowId)},"add new")}}]),t}(o.a.Component)),Jr=Object(s.b)(function(e,t){var n=Qe(e,t.arrowId),r=Se(e,n.start),o=Se(e,n.end),a=nt(e,n.id);return{start:J.from(r.pos),end:J.from(o.pos),control:J.from(a.pos),isSelfLoop:r.id===o.id,focusedDetail:pn(e),isEditable:$(e),glowingDetail:Tt(e)}},function(e){return{changeDetail:function(t){return e(function(e){return{type:"CHANGE_TRANSITION_DETAIL",payload:{detail:e}}}(t))},deleteDetail:function(t,n){return e(function(e,t){return{type:"DELETE_TRANSITION_DETAIL",payload:{id:e,arrow:t}}}(t,n))},addDetail:function(t){return e(d(t))},focusDetail:function(t){return e(function(e){return{type:"FOCUS_TRANSIITON_DETAIL",payload:{id:e}}}(t))},blurDetail:function(t){return e(function(e){return{type:"BLUR_TRANSITION_DETAIL",payload:{id:e}}}(t))}}})(Yr),zr=(n(56),function(e){function t(){var e,n;Object(K.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(qn.a)(this,(e=Object(Xn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseUp=function(e){n.props.add(n.props.pos)},n}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.pos;return t&&o.a.createElement("div",{className:"shadow-node",onMouseUp:this.handleMouseUp,style:{position:"absolute",left:n.x-21,top:n.y-21-2}})}}]),t}(o.a.Component)),Qr=Object(s.b)(function(e){return{isVisible:ue(e),pos:ae(e)}},function(e){return{add:function(t){return e(function(e){return{type:"ADD_NODE",payload:{pos:e}}}(t))}}})(zr),qr=(n(57),function(e){function t(){var e,n;Object(K.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(qn.a)(this,(e=Object(Xn.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(e){n.props.mouseDown(n.computeMousePos(e))},n.handleMouseUp=function(){n.props.mouseUp()},n.handleMouseMove=function(e){e.preventDefault(),n.props.mouseMove(n.computeMousePos(e))},n}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.arrows,n=e.nodes,r=e.controlPoints,a=e.transitionDetails;return o.a.createElement("div",{className:"canvas",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseMove:this.handleMouseMove},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},t.map(function(e){return o.a.createElement(Ur,{key:e.id,details:e})}),r.map(function(e){return o.a.createElement(Br,{key:e.id,details:e})})),n.map(function(e){return o.a.createElement(Wr,{key:e.id,details:e})}),Object.keys(a).map(function(e){return o.a.createElement(Jr,{key:e,arrowId:e,details:a[e]})}),o.a.createElement(Qr,null))}},{key:"computeMousePos",value:function(e){var t=e.currentTarget.getBoundingClientRect(),n=t.left,r=t.top,o=e.clientX,a=e.clientY;return new J(o-n,a-r)}}]),t}(o.a.Component)),Xr=Object(s.b)(function(e){return{arrows:ze(e),nodes:je(e),controlPoints:tt(e),transitionDetails:cn(e)}},function(e){return{mouseDown:function(t){return e(function(e){return{type:"MOUSE_DOWN_CANVAS",payload:{pos:e}}}(t))},mouseUp:function(){return e({type:"MOUSE_UP_CANVAS"})},mouseMove:function(t){return e(function(e){return{type:"MOUSE_MOVE_CANVAS",payload:{pos:e}}}(t))}}})(qr),Zr=function(e){switch(Pe(e).length){case 0:return[$r.ADD_STATE];case 1:return[$r.ADD_STATE,$r.REMOVE_STATE,$r.ADD_SELF_TRANSITION,$r.MAKE_START,$r.TOGGLE_ACCEPTING];case 2:return[$r.ADD_STATE,$r.REMOVE_TWO_STATES,$r.ADD_TRANSITION,$r.TOGGLE_TWO_ACCEPTING];default:return[$r.ADD_STATE,$r.REMOVE_MANY_STATES,$r.TOGGLE_MANY_ACCEPTING]}},$r={ADD_STATE:"ADD_STATE",REMOVE_STATE:"REMOVE_STATE",REMOVE_TWO_STATES:"REMOVE_TWO_STATES",REMOVE_MANY_STATES:"REMOVE_MANY_STATES",ADD_SELF_TRANSITION:"ADD_SELF_TRANSITION",ADD_TRANSITION:"ADD_TRANSITION",MAKE_START:"MAKE_START",UNMAKE_START:"UNMAKE_START",TOGGLE_ACCEPTING:"TOGGLE_ACCEPTING",TOGGLE_TWO_ACCEPTING:"TOGGLE_TWO_ACCEPTING",TOGGLE_MANY_ACCEPTING:"TOGGLE_MANY_ACCEPTING"},eo=(n(58),function(e){function t(){var e,n,r;Object(K.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(r=Object(qn.a)(this,(e=Object(Xn.a)(t)).call.apply(e,[this].concat(a)))).handleUndoButtonClick=function(){r.props.undo()},r.handleRedoButtonClick=function(){r.props.redo()},r.buttonConfig=(n={},Object(p.a)(n,$r.ADD_STATE,{action:function(){return r.props.addState()},className:"add-state",title:"add new state"}),Object(p.a)(n,$r.REMOVE_STATE,{action:function(){return r.props.removeStates()},className:"remove-state",title:"remove state"}),Object(p.a)(n,$r.REMOVE_TWO_STATES,{action:function(){return r.props.removeStates()},className:"remove-two-states",title:"remove states"}),Object(p.a)(n,$r.REMOVE_MANY_STATES,{action:function(){return r.props.removeStates()},className:"remove-many-states",title:"remove states"}),Object(p.a)(n,$r.ADD_SELF_TRANSITION,{action:function(){return r.props.addTransition()},className:"add-self-transition",title:"add self transition"}),Object(p.a)(n,$r.ADD_TRANSITION,{action:function(){return r.props.addTransition()},className:"add-transition",title:"add transition"}),Object(p.a)(n,$r.MAKE_START,{action:function(){return r.props.makeStart()},className:"make-start",title:"distinguish as initial state"}),Object(p.a)(n,$r.TOGGLE_ACCEPTING,{action:function(){return r.props.toggleFinal()},className:"toggle-accepting",title:"toggle state's status as final"}),Object(p.a)(n,$r.TOGGLE_TWO_ACCEPTING,{action:function(){return r.props.toggleFinal()},className:"toggle-two-accepting",title:"toggle states' statuses as final"}),Object(p.a)(n,$r.TOGGLE_MANY_ACCEPTING,{action:function(){return r.props.toggleFinal()},className:"toggle-many-accepting",title:"toggle states' statuses as final"}),n),r}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"edit-controls"},o.a.createElement("div",{className:"edit-controls__undo-redo-buttons"},o.a.createElement("button",{className:"edit-controls__button edit-controls__undo-button",title:"undo",onClick:this.handleUndoButtonClick}),o.a.createElement("button",{className:"edit-controls__button edit-controls__redo-button",title:"redo",onClick:this.handleRedoButtonClick})),this.props.inEditMode&&this.props.buttonTypes.map(function(t){var n=e.buttonConfig[t];return n&&o.a.createElement("button",{className:"edit-controls__button edit-controls__".concat(n.className,"-button"),title:n.title,key:t,onClick:n.action})}))}}]),t}(o.a.Component)),to=Object(s.b)(function(e){return{inEditMode:$(e),buttonTypes:Zr(e)}},function(e){return{undo:function(){return e({type:"UNDO"})},redo:function(){return e({type:"REDO"})},addState:function(){return e({type:"START_ADDING_NODE"})},removeStates:function(){return e({type:"DELETE_SELECTED_NODES"})},addTransition:function(){return e({type:"ADD_TRANSITION_BETWEEN_SELECTED"})},makeStart:function(){return e({type:"MAKE_SELECTED_START_NODE"})},toggleFinal:function(){return e({type:"TOGGLE_SELECTED_FINAL_NODES"})}}})(eo),no=(n(59),function(e){function t(){var e,n;Object(K.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(qn.a)(this,(e=Object(Xn.a)(t)).call.apply(e,[this].concat(o)))).handleNewClick=function(){n.props.newMachine()},n.handleDownloadClick=function(){n.props.download()},n.handleUploadClick=function(){n.props.upload()},n}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"app-controls"},o.a.createElement("div",{className:"app-controls__buttons"},o.a.createElement("button",{className:"app-controls__button app-controls__new-button",title:"new empty machine",onClick:this.handleNewClick}),o.a.createElement("button",{className:"app-controls__button app-controls__download-button",title:"download machine (JSON)",onClick:this.handleDownloadClick}),o.a.createElement("button",{className:"app-controls__button app-controls__upload-button",title:"upload machine (JSON)",onClick:this.handleUploadClick})),o.a.createElement("a",{className:"app-controls__link",href:"#examples"},"Examples"),o.a.createElement("a",{className:"app-controls__link",href:"".concat("/tm","/tutorial.html"),target:"_blank",rel:"noopener noreferrer"},"Tutorial"),o.a.createElement("a",{className:"app-controls__link",href:"".concat("/tm","/guide.html"),target:"_blank",rel:"noopener noreferrer"},"Guide"),o.a.createElement("a",{className:"app-controls__link",href:"".concat("/tm","/about.html"),target:"_blank",rel:"noopener noreferrer"},"About"),o.a.createElement("a",{className:"app-controls__link app-controls__source-link",href:"https://github.com/wjlewis/tm",target:"_blank",rel:"noopener noreferrer"},"<Source/>"))}}]),t}(o.a.Component)),ro=Object(s.b)(null,function(e){return{newMachine:function(){return e({type:"NEW_MACHINE"})},download:function(){return e({type:"DOWNLOAD_MACHINE"})},upload:function(){return e({type:"UPLOAD_MACHINE"})}}})(no),oo=(n(60),function(e){function t(){var e,n;Object(K.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(qn.a)(this,(e=Object(Xn.a)(t)).call.apply(e,[this].concat(a)))).tapeRef=o.a.createRef(),n.handleScroll=function(e){n.props.updateScrollLeft(e.target.scrollLeft)},n.handleClearButtonClick=function(){n.props.clear()},n}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this,t=this.props.isEditable,n=Rr()("tape__cell",{"tape__cell--editable":t});return o.a.createElement(o.a.Fragment,null,this.renderReadHead(),o.a.createElement("div",{className:"tape",ref:this.tapeRef,onScroll:this.handleScroll,style:{width:"".concat(720,"px")}},o.a.createElement("div",{className:"tape__cells"},o.a.createElement("div",{className:"tape__padding-left",style:{width:360}},"\u21d0\u2002this half intentionally left blank"),this.props.entries.map(function(t,r){return o.a.createElement("input",{key:r,disabled:!e.props.isEditable,className:n,value:t,placeholder:"\u2205",onChange:e.handleCellChange(r),onFocus:e.handleCellFocus(r),style:{width:"".concat(36,"px")},type:"text",maxLength:1})}),o.a.createElement("div",{className:"tape__padding-right",style:{width:"".concat(18,"px")}}))),this.renderFeeders(),this.renderClearButton(),this.renderReadWriteOverlay())}},{key:"componentDidMount",value:function(){this.tapeRef.current&&this.tapeRef.current.scrollTo(18,0)}},{key:"componentDidUpdate",value:function(e){e.focusedCell!==this.props.focusedCell&&null!==this.props.focusedCell&&this.updateFocus(),e.activeCell!==this.props.activeCell&&this.centerActive(!0),e.isEditable===this.props.isEditable||this.props.isEditable||this.centerActive(!1)}},{key:"updateFocus",value:function(){if(this.tapeRef.current){var e=this.tapeRef.current.childNodes[0].childNodes[this.props.focusedCell+1];e&&e.focus()}}},{key:"handleCellChange",value:function(e){var t=this;return function(n){" "!==n.target.value&&t.props.changeCell(e,n.target.value)}}},{key:"handleCellFocus",value:function(e){var t=this;return function(){t.props.focusCell(e)}}},{key:"centerActive",value:function(e){if(this.tapeRef.current){var t=36*this.props.activeCell+18;this.tapeRef.current.scrollTo({left:t,top:0,behavior:e?"smooth":"auto"})}}},{key:"renderReadHead",value:function(){var e=Rr()("tape-reader",{"tape-reader--active":!this.props.isEditable});return o.a.createElement("div",{className:e,style:{position:"absolute",left:"calc(50% - ".concat(18,"px)")}})}},{key:"renderReadWriteOverlay",value:function(){var e=Rr()("tape-read-write-overlay",{"tape-read-write-overlay--writing":this.props.isWriting});return o.a.createElement("div",{className:e,style:{position:"absolute",left:"calc(50% - ".concat(18,"px)"),animationDuration:"".concat(this.props.simInterval/2,"ms")}})}},{key:"renderClearButton",value:function(){return o.a.createElement("button",{className:"tape__clear-button",title:"clear tape contents",onClick:this.handleClearButtonClick,style:{position:"absolute",right:"calc(50% - ".concat(430,"px)")}})}},{key:"renderFeeders",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"tape-feed tape-feed__left",style:{position:"absolute",left:"calc(50% - ".concat(366,"px)")}}),o.a.createElement("div",{className:"tape-feed tape-feed__right",style:{position:"absolute",right:"calc(50% - ".concat(366,"px)")}}))}}]),t}(o.a.Component)),ao=Object(s.b)(function(e){return{entries:Jt(e),isEditable:$(e),focusedCell:zt(e),activeCell:_t(e),isWriting:yt(e),simInterval:jt(e)}},function(e){return{changeCell:function(t,n){return e(function(e,t){return{type:"CHANGE_TAPE_CELL",payload:{pos:e,value:t}}}(t,n))},updateScrollLeft:function(t){return e(function(e){return{type:"UPDATE_SCROLL_LEFT",payload:{scrollLeft:e}}}(t))},focusCell:function(t){return e(function(e){return{type:"FOCUS_TAPE_CELL",payload:{pos:e}}}(t))},clear:function(){return e({type:"CLEAR_TAPE"})}}})(oo),io=(n(61),function(e){function t(){var e,n;Object(K.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(qn.a)(this,(e=Object(Xn.a)(t)).call.apply(e,[this].concat(o)))).reset=function(){n.props.reset()},n.togglePlayPause=function(){n.props.isInEditMode?n.props.play():n.props.pause()},n.step=function(){n.props.step()},n.handleSpeedChange=function(e){n.props.setIntervalDivisor(Number(e.target.value))},n}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props.isInEditMode,t=Rr()("sim-controls__button",e?"sim-controls__play-button":"sim-controls__pause-button");return o.a.createElement("div",{className:"sim-controls"},o.a.createElement("button",{className:"sim-controls__button sim-controls__reset-button",title:"reset simulation",onClick:this.reset}),o.a.createElement("button",{className:t,title:e?"play simulation":"pause simulation",onClick:this.togglePlayPause}),o.a.createElement("button",{className:"sim-controls__button sim-controls__step-button",title:"run a single step of the simulation",disabled:!e,onClick:this.step}),o.a.createElement("div",{className:"sim-controls__speed-control"},o.a.createElement("span",{className:"sim-controls__speed-control-label"},"slow"),o.a.createElement("input",{type:"range",value:this.props.intervalDivisor,min:1,max:15,onChange:this.handleSpeedChange}),o.a.createElement("span",{className:"sim-controls__speed-control-label"},"fast")))}}]),t}(o.a.Component)),so=Object(s.b)(function(e){return{isInEditMode:$(e),intervalDivisor:St(e)}},function(e){return{reset:function(){return e(v())},pause:function(){return e({type:E})},step:function(){return e({type:y})},play:function(){return e({type:b})},setIntervalDivisor:function(t){return e(function(e){return{type:"SET_SIM_INTERVAL_DIVISOR",payload:{divisor:e}}}(t))}}})(io),co=(n(62),function(e){function t(){var e,n;Object(K.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(qn.a)(this,(e=Object(Xn.a)(t)).call.apply(e,[this].concat(o)))).handleNameChange=function(e){n.props.changeName(e.target.value)},n}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return o.a.createElement("input",{className:"name-input",type:"text",value:this.props.name,onChange:this.handleNameChange,placeholder:"Machine name"})}}]),t}(o.a.Component)),uo=Object(s.b)(function(e){return{name:Wn(e)}},function(e){return{changeName:function(t){return e(function(e){return{type:"CHANGE_MACHINE_NAME",payload:{name:e}}}(t))}}})(co),lo=(n(63),function(e){function t(){var e,n;Object(K.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(qn.a)(this,(e=Object(Xn.a)(t)).call.apply(e,[this].concat(o)))).handleMessageClick=function(e){e.stopPropagation()},n.dismiss=function(){n.props.dismiss()},n}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return this.props.show&&o.a.createElement("div",{className:"message__container",onClick:this.dismiss},o.a.createElement("div",{className:"message",onClick:this.handleMessageClick},o.a.createElement("h1",{className:"message__title"},this.props.title),o.a.createElement("div",{className:"message__content"},this.props.content),o.a.createElement("button",{className:"message__dismiss-button",onClick:this.dismiss},"Dismiss")))}}]),t}(o.a.Component)),po=Object(s.b)(function(e){return{show:Mn(e),title:kn(e),content:Ln(e)}},function(e){return{dismiss:function(){return e({type:"DISMISS_MESSAGE"})}}})(lo),fo=(n(64),function(e){function t(){var e,n;Object(K.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(qn.a)(this,(e=Object(Xn.a)(t)).call.apply(e,[this].concat(o)))).handleKeyDown=function(e){n.props.keyDown(e.key,e)},n.handleKeyUp=function(e){n.props.keyUp(e.key)},n}return Object(Zn.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement(Xr,null),o.a.createElement(uo,null),o.a.createElement(ao,null),o.a.createElement(to,null),o.a.createElement(ro,null),o.a.createElement(so,null),o.a.createElement(po,null))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp),this.props.loadSaved()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}}]),t}(o.a.Component)),mo=Object(s.b)(null,function(e){return{keyDown:function(t,n){return e(function(e,t){return{type:"KEY_DOWN",payload:{key:e,event:t}}}(t,n))},keyUp:function(t){return e(function(e){return{type:"KEY_UP",payload:{key:e}}}(t))},loadSaved:function(){return e({type:"LOAD_SNAPSHOT"})}}})(fo);n(65);i.a.render(o.a.createElement(s.a,{store:kr},o.a.createElement(mo,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.5833b057.chunk.js.map